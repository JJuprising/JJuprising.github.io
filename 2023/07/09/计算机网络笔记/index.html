<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>计算机网络笔记 | yjchen</title><meta name="keywords" content="笔记"><meta name="author" content="JJuprising"><meta name="copyright" content="JJuprising"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="计算机网络笔记"><meta name="application-name" content="计算机网络笔记"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="计算机网络笔记"><meta property="og:url" content="https://jjuprising.github.io/2023/07/09/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%94%E8%AE%B0/index.html"><meta property="og:site_name" content="yjchen"><meta property="og:description" content="错题 无效Mac帧  帧的长度不是整数字节 数据字段的长度不在46-1500字节之间 帧的长度不在64-1518字节之间 用收到的帧检验序列FCS查出有差错   网桥从某一端口收到正确的数据帧后，在其他址转发表中查找该帧要到达的目的站，若查找不到，则会  向除该端口以外的所有端口转发此帧  以太网交"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://jjuprising.github.io/img/404.jpg"><meta property="article:author" content="JJuprising"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://jjuprising.github.io/img/404.jpg"><meta name="description" content="错题 无效Mac帧  帧的长度不是整数字节 数据字段的长度不在46-1500字节之间 帧的长度不在64-1518字节之间 用收到的帧检验序列FCS查出有差错   网桥从某一端口收到正确的数据帧后，在其他址转发表中查找该帧要到达的目的站，若查找不到，则会  向除该端口以外的所有端口转发此帧  以太网交"><link rel="shortcut icon" href="/images/sta_logo.jpg"><link rel="canonical" href="https://jjuprising.github.io/2023/07/09/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%94%E8%AE%B0/"><link rel="preconnect" href="//cdn.cbd.int"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: {"enable":true,"img":"https://upload-bbs.miyoushe.com/upload/2023/09/03/125766904/ee23df8517f3c3e3efc4145658269c06_5714860933110284659.png"},
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: {"skills":null},
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: JJuprising","link":"链接: ","source":"来源: yjchen","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'yjchen',
  title: '计算机网络笔记',
  postAI: '',
  pageFillDescription: '错题, 一, 计网的作用, 概述, 组成, 电路交换, 报文交换, 分组交换, 路由器, ⭐三种交换比较, 计网在我国的发展, 计算机网络的类别, 定义, 分类, 计算机网路的性能, 性能指标, 非性能特征, 计算机网络的体系结构, 体系结构的形成, 协议与划分层次, 三种分层概念, 五层协议, 协议与服务有何区别？有何关系？, 一些名词, 二 物理层, 主要任务, 数据通信, 模型, 信道, 常见编码方式, 基本的带通调制方法, ⭐信道的极限容量, 传输媒体, 导引型, 双绞线, 同轴电缆, 光缆, 非导引型, 短波通信, 微波通信, ⭐信道复用技术, 频分复用、时分复用和统计时分复用, 频分复用, 时分复用, 波分复用, ⭐码分复用CDMA, 码片序列, 应用, 例题, 数字传输系统, 同步光纤网SONET, 同步数字序列SDH, 宽带接入技术, ADSL技术, 光纤同轴混合网（HFC网）, FTTx技术, 🖼图床至此为止, 三 数据链路层, 数据链路和帧, 三个基本问题, 封装成帧, 透明传输, 差错控制, 3.2点对点协议PPP, 3.2.2PPP 协议的帧格式, 透明传输问题, 3.3使用广播信道的数据链路层, CSMAx2FCD协议, 争用期, 二进制指数类型退避算法, 要点, 使用集线器的星形拓扑, 参数α与利用率, 以太网的MAC层, MAC层硬件地址, 适配器检查MAC地址, 3.4 扩展以太网, 在物理层扩展以太网, 在数据链路层扩展以太网, 以太网交换机, 从总线以太网到星形以太网, 虚拟局域网, 3.5 高速以太网, 四 网络层, 4.2 网际协议IP, 4.2.1 虚拟互连网络, 4.2.2 分类的IP地址, 点分十进制记法, IP地址的重要特点, 小结, 4.2.3 IP地址与硬件地址, 4.2.4 地址解析协议ARP, 为什么我们不直接使用硬件地址进行通信？, 小结, 4.2.5IP数据报的格式, IP 数据报首部的固定部分中的各字段, 死亡之ping, 练习, 小结, 4.2.6 IP 层转发分组的流程, ⚠4.3划分子网和构造超网, 4.3.1划分子网, 子网掩码, 4.3.2 使用子网时分组的转发, 4.3.3 无分类编址 CIDR, 路由聚合, 构成超网, 最长前缀匹配, 二叉线索法, 4.4网际控制报文协议ICMP, 4.4.1ICMP报文的种类, ICMP 差错报告报文, ICMP 询问报文, 4.4.2ICMP的应用距离, PING(Packet InterNet Groper), Traceroute, 小结, 4.5互联网的路由选择协议, 4.5.1有关路由选择协议的几个基本概念, 分层次的路由选择协议, 互联网有两大类路由选择协议, 小结, 4.5.2RIP内部网关协议, 特点, RIP2报文, 小结, OSPF内部网关协议, 划分区域, 小结, *4.5.4BGP外部网关协议, *4.5.5路由器的构成, 4.6 IPV6, 4.6.1 IPv6的基本首部, 4.6.2 IPv6的地址, 冒分十六进制, 4.6.3 从IPv4向IPv6过渡, *4.6.4 ICMPv6, 4.8 虚拟专用网VPN和网络地址转换NAT, 4.8.1 虚拟专用网VPN, 虚拟专用网, 远程接入VPN, 小结, 4.8.2 网络地址转换NAT, *4.9 多协议标记交换MPLS, 本章总结, 5传输层, 5.1 运输层协议概述, 5.1.1 进程之间的通信, 两大类端口, 常用的熟知端口–记忆, 5.1.2 运输层的两个主要协议, TCP与UDP 表格, 5.2 用户数据报协议UDP, UDP主要特点, 检验和, UDP的应用, IP、ICMP、UDP、TCP报文首部检验和字段, 5.3 传输控制协议TCP 概述, 5.3.1 TCP 最主要的特点, 5.4可靠传输的工作原理, 5.4.1 停止等待协议, 5.4.2 连续ARQ 协议, 累计确认, Go-back-N（回退N）, 小结, 5.5TCP 报文段的首部格式, 小结, 5.6 TCP 可靠传输的实现, 小结, 5.6.2 超时重传时间的选择, 5.6.3 选择确认SACK, 小结, 5.7TCP的流量控制, 5.7.1利用滑动窗口实现流量控制, 持续计时器, 5.8 TCP 的拥塞控制, 5.8.1 拥塞控制的一般原理, 开环控制和闭环控制, 5.8.2 TCP 的拥塞控制方法, 拥塞判断, TCP拥塞控制算法, 5.9 TCP 的运输连接管理, 5.9.1 TCP 的连接建立, 5.9.2 TCP 的连接释放, 总结, 第6章应用层, 6.1 域名系统DNS, 6.1.1 域名系统概述, 6.1.2 互联网的域名结构, 6.1.3 域名服务器, 四种类型, 6.2 FTP, 特点, 两个连接, *6.3远程终端协议TELNET, 6.4万维网www, 概述, 工作方式, 解决的问题, 代理服务器, 6.4.4万维网的文档 了解, 6.4.5 万维网的信息检索系统 了解, 6.4.6 博客和微博  了解, 小结, 6.5电子邮件, 6.5.2 简单邮件传送协议SMTP, SMTP通信的三个阶段, 6.5.4 邮件读取协议POP3 和IMAP, IMAP 协议, 6.5.5 基于万维网的电子邮件, 6.5.6 通用互联网邮件扩充MIME, 错题, 6.6 动态主机配置协议DHCP, 客户-服务器方式, DHCP 中继代理(relay agent)错题无效帧帧的长度不是整数字节数据字段的长度不在字节之间帧的长度不在字节之间用收到的帧检验序列查出有差错网桥从某一端口收到正确的数据帧后在其他址转发表中查找该帧要到达的目的站若查找不到则会向除该端口以外的所有端口转发此帧以太网交换机进行转发决策时使用的地址是目的物理地址关于以太网错误的是表示双绞线组网表示粗同轴电缆组网指的是传输速率为指的是基带传输是一种星形以太网属于虚电路操作特点的是每个分组携带有终点的地址信息它的传送是自身寻址的在整个传送过程中不需要建立虚电路网络节点要为每个分组做出路由选择使所有分组按顺序到达目的系统下面哪个协议不属于网络层体系中网络层的协议协议协议协议协议属于传输层点分十进制类类类类在因特网中数据报从源结点到目的结点可能需要经过多个网络和路由器在整个传输过程中数据报报头的源地址和目的地址都不会变化读取过程只是找到下一跳地址数据报需要由源主机和中途路由器到达目的主机通常源主机和中途路由器都不知道数据报到达目的主机需要经过的完整路径源主机只知道默认网关是谁中途路由器根据路由表转发给下一跳在因特网中路由器可连接多个物理网络此时路由器具有单一地址具有多个地址每个地址与各相连的物理网中具有相同网络号并占用一个主机号具有多个地址每个地址与各相连的物理网中具有相同网络号并占用多个主机号以下为源和目标主机的不同地址组合其中组合可以不经过路由直接寻址和和和位为网络号不同位相同借前换成进制发现网络号一样但是子网掩码网络段是不一样的不能选关于无分类编址下列说法错误的是使用各种长度的网络前缀来代替分类地址中的网络号和子网号将网络前缀都相同的连续的地址组成地址块网络前缀越短其地址块所包含的地址数就越少使用查找路由表时可能会得到多个匹配结果应当从匹配结果中选择具有最长网络前缀的路由因为网络前缀越长路由就越具体最长前缀匹配原则对网际控制报文协议描述错误的是封装在数据报的数据部分是属于应用层的协议是协议的必需的一个部分命令使用了回送请求与回送应答报文下列前缀中的哪一个和地址及都匹配聚合前三个都是因此网络号为后面全一共为网络号是不属于路由选择协议适用小型适用大型某自治系统采用协议收到邻居距离向量包含信息则可以得到结论通过到跳数为不能到通过到跳数为能到条数为忘记了跳表示不可达了下一跳路由器分别为新收到从发来的路由信息中目的网络跳数下跳路由器分别为则路由表中更新后关于的路由信息为错选注意自加若下一跳字段给出的路由器地址相同则把收到的项目替换源路由表项目如果收到项目中的距离小于路由表中的距离则进行更新下列关于的表述中是错误的的头部长度是不可变的不允许路由设备来讲行分片采用了的地址号理论上不可能用完使用了头部校验和来保证传输的正确性基本首部字节不可变开始的值就设定好了不需要分片有首部检验而反而没有取消下面哪个地址属于专用地址环回地址开头属于传输层协议的是网络层网络层流量控制对发送方对接收方对发接双方链路上任两结点间数据一个连接的数据传输阶段如果发送端的发送窗口值由变为意味着可以在收到一个确认之前可发个报文段可发可发可发个报文段和之间建立了连接向发送了一个报文段其中序号字段确认号字段数据部分包含个字节那么在对该报文的确认报文段中分别为序号就是收到的确认号确认号为上一个序号加数据在一个连接中为当拥塞窗口为时收到了个元余报文如果在接下来的个内报文段传输都是成功的那么当这些报文段均得到确认后拥塞窗口的大小是个超时减半然后根据个往返时间线性增加说法错误的是系统运行在协议之上对于数据小用的少的用采用客户服务器工作模式域名的命名原则是采用层次结构的命名树域名不能反映计算机所在的物理地址逻辑地址一台主机希望解析域名如果这台主机配置的本地域名服务器为根域名服务器为而存储与其地址对应关系的权限域名服务器为那么这台主机解析该域名时首先查询地址为的域名服务器地址为的域名服务器地址为的域名服务器不能确定主机想进行域名解析先查询本地域名服务器如果其不知查询根域名再查顶级再查权限一计网的作用三网融合电信网络有线电视网络计算机网络互联网两个重要特点连通性共享概述起源组成边缘部分端系统之间的通信方式核心部分三种交换方式电路交换分组交换路由器电报交换电路交换电报采用基于存储转发的报文交换电路交换整个报文的比特流连续地从源点直达终点好像在一个管道传输报文交换报文交换整个报文先传送到相邻节点全部存储下来后查找转发表转发到下一个节点分组交换分组又称为包分组交换单个分组传送到相邻节点存储下来后查找转发表转发到下一个节点路由器注意分组的存储转发过程在路由器分组放入缓存查路由表转发路由器输入和输出端口没有直接连线的而交换机有路由器利用软件时间数据交换交换机是依靠硬件前者比后者慢注意路由器和交换机的区别带来的问题要排队会造成一定时延如果分组太多造成时延太大会直接丢掉分组必须携带首部造成了一定的开销三种交换比较稳定性电报交换传输更加稳定报文和分组交换存在丢包可能传输速率当要连续传输大量的数据电路交换的传输速率较快传输效率和信道利用率传输突发式的计算机数据时电报交换速率由于线路被占用且需要预先分配带宽使得传输效率和信道利用率很低报文交换和不需要预先分配传输带宽且不必先占用一条端到端的通信资源省去了开销数据的传输效率和信道利用率更高例子有线电话和电话电话成本低计算机网络连接分组交换逐端占用通话质量没那么高有线电话稳定通话质量高专用链路连接成本高计网在我国的发展年被正式承认为接入互联网的国家中国互联网络发展状况统计报告计算机网络的类别定义地理位置不同的具有独立功能的多台计算机及其外部设备硬件通过通信线路连接在网络操作系统网络管理系统和协议等软件的管理和协调下实现资源共享和信息传递的计算机系统分类从作用范围上分类广域网作用距离在几十到几千公里是互联网核心部分域域网作用距离在公里作用范围可跨越几个街区整个城市局域网作用距离公里以内作用范围一般是一个学校公司或工厂个人区域网作用距离米以内是用无线技术将个人使用的电子设备连接起来形成的网络从网络的使用者上分类公用网简单理解就是大家都可以用的网络只要交了钱由电信公司出资建设专用网某个部分机关由于内部需要专用的网络不对外提供服务计算机网路的性能性能指标比特一个比特就是二进制数字中的或带宽本来是指信号具有的频带宽度在计网中表示在单位时间内网络中的某通道所能通过的最高数据率单位是即比特每秒在时间轴上的信号的宽度随带宽的增大而变窄频率增大吞吐量在单位时间内通过某网络或信道接口的数据量时延数据从网络的一端传送到另一端所需的时间有时也称位延迟或迟延由四部分组成发送时延传播时延处理时延排队时延发送时延发送时延数据帧长度发送速率传播时延传播时延信道长度电磁波在信道上的传播速率处理时延排队时延总时延发送时延传播时延处理时延排队时延总时延发个分组的用时每个分组的发送时延之和最后一个分组的传播时延和处理时延时延带宽积时延带宽积传播时延带宽往返时间发送时间数据长度发送速率有效数据率数据长度发送时间利用率利用率越大时延增加非性能特征费用质量标准化可靠性可拓展性和升级性易于管理和维护计算机网络的体系结构体系结构的形成为什么分层分层次结构有很多好处比如能够使各层之间独立问题的复杂度变小了灵活性好各层互不影响结构上可分割各层都采用最合适的技术来实现易于实现和维护能促进标准化工作每一次的功能都很明确比如我们学生组织分为几个部门有些部门负责统筹组织有些部门负责整合资料有些部门负责宣传推广分层次地把一个大的项目和任务实施解决缺点麻烦各层完成的主要功能差错控制流量控制分段和重装复用和分用连接建立和释放协议与划分层次网络协议三个要素语法即数据与控制信息的结构或格式语义即需要发出何种控制信息完成何种动作以及做出何种响应同步即事件实现顺序的说明三种分层概念具有五层协议的体系结构的七层协议的四层体系结构五层协议应用层处理不同应用应用层是体系结构的最高处任务是通过应用进程间的交互来完成特定网络应用应用层协议定义的是应用进程间通信和交互的规则运输层运输运输层的任务就是负责向两台主机中进程之间的通信提供通用的数据传输服务应用进程利用该服务传送应用层报文主要使用传输控制协议和用户数据报协议流量控制网络层路由找路线网络层负责为分组交换网上的不同主机提供通信服务将用户数据封装成数据报主要功能是路由数据链路层封装拆分成帧将数据报组装成帧包括了数据和必要的控制信息是链路上传输数据的协议物理层接口有关物理层上传输数据的单位是比特需要考虑传输的编码方式和硬件条件协议与服务有何区别有何关系协议是水平的服务是垂直的在协议的控制下两个对等实体间的通信使得本层能够向上一层提供服务要实现本层协议还需要使用下面一层所提供的服务只有那些能被高一层实体看得见的功能才能称之为服务一些名词协议栈协议栈是指由多个协议层组成的一种网络通信协议体系结构每一层协议都负责特定的功能例如物理层数据链路层网络层传输层应用层等协议栈中的每一层都通过接口与上下层交换信息并对其上层提供服务实体实体是指一个网络节点上的一个网络通信实体它可以是硬件设备软件程序网络服务器等实体在网络中通过地址进行标识通常使用地址或地址对等层对等层是指在协议栈中相互配对的同级协议层在对等层之间通信双方具有相同的角色和功能并且它们通过接口进行通信协议数据单元协议数据单元是在网络通信中不同层之间传递信息的基本单元在不同层之间的命名和格式可能不同服务访问点服务访问点是指在同一层协议中对上下层提供服务的接口每个都有一个唯一的标识符用于标识服务提供者和服务请求者之间的通信关系客户客户指的是通过网络请求服务的设备或应用程序在客户服务器模型中客户向服务器发出请求等待服务器响应并接收数据服务器服务器指的是提供服务的设备或应用程序在客户服务器模型中服务器接收客户端请求处理请求并向客户端发送响应数据客户服务器方式客户服务器方式是一种网络通信模型其中客户端设备或应用程序通过网络向服务器发出请求等待服务器响应并接收数据服务器接收客户端请求处理请求并向客户端发送响应数据这种模型在分布式计算和服务中广泛使用二物理层数据通信的基础知识奈氏准则香农定理传输媒体导引型非导引型信道复用频分时分波分码分主要任务解决与接口有关的任务包括机械特性电气特性功能特性过程特性数据在计算机内部是并行传输在通信线路上是串行传输数据通信模型通信系统分为源系统传输系统目的系统信道单工通信半双工通信全双工通信来自信号源的信号称为基带信号基本频带信号解决通信问题需要对基带信号进行调制基带调制变换后还是基带信号带通调制使用载波常见编码方式不归零制归零制曼彻斯特编码差分曼彻斯特编码基本的带通调制方法调幅调频调相正交振幅调制信道的极限容量奈氏准则单位波特率码元传输最高速率是带宽的两倍码元秒比特率波特率信噪比信噪比香农定理传输媒体传输媒体分为导引型有线非导引型无线导引型双绞线无屏蔽双绞线非屏蔽双绞线套层与带绝缘层的铜线之间有一层铝箔屏蔽层导线相互缠绕可降低电磁干扰同向的导线磁场抵消消除导线之间的串扰差值法避免了噪声干扰八个脚位发送数据正负极接收数据正负极交换机内部做了翻转收发主机和路由也用交叉接头水晶头同轴电缆光缆光纤做成结实的光缆光线入射角足够大就会出现全发射即光线碰到包层时就会折射会纤芯纤芯直径光源传输速率应用多模光纤较大同时传输多条光线发光二极管低性能差局域网单模光纤较小一次传输一条光线激光高楼间广域网多模光线传输速率低性能差但是成本低一般用于局域网单模光纤通常用于楼间连接或广域网连接光纤优点通信容量非常大传输损耗小中继距离长抗雷电和电磁干扰性能好无串音干扰保密性好体积小重量轻缺点成本脆弱非导引型波长越长频率越小短波通信主要靠电离层的反射会产生多经效应一次反射可传输一般用于军事通讯微波通信频谱范围特性在空间主要是直线传播难以传过建筑物两种方式地面微波中继通信卫星通信信道复用技术复用技术允许共享信道进行通信降低成本提高利用率频分复用时分复用和统计时分复用频分复用在同样时间占用不同的带宽频率带宽资源例子同时听到猫叫和狗叫可以区分因为频率不同时分复用所有用户在不同的时间占用同样的频带宽度是将时间划分为一段段等长的时分复用帧帧每一个时分复用的用户在每一个帧中占用固定序号的时隙波分复用波分复用就是光的频分复用使用一根光纤来同时传输多个光载波信号码分复用码分复用特殊挑选不同码型因此彼此不会相互干扰有较强的抗干扰能力其频谱类似于白噪声不易被敌人发现应用第三代数字移动通信系统码片序列每一个比特时间划分为个短的间隔称为码片每个站被指派一个唯一的码片序列如发送比特则发送自己的码片序列如发送比特则发送该码片序列的二进制反码例如站的码片序列是发送比特时就发送序列发送比特时就发送序列站的码片序列表示两个不同站的码片序列正交因此有规格化内积为和别人为和自己为和反码为应用接收信号的时候接收到不止一个站发送的信号比如此时我想要接收站的信息假设收到的是此时用的码片序列去做规格化内积此时得到的结果是所以最终规格化内积后可得结果为将它除以码片序列的长度结果为时说明发了结果为时说明发了共有四个站进行码分多址通信四个站的码片序列为现收到这样的码片序列问哪个站发送了数据发送数据的站发送的是还是站站站站站发送的是结果为发送的是而站没有发送数据例题模拟信道的信号功率为噪声功率为传输频率为问最大传输速率有噪声利用香农公式其实频带带宽信号具有的频带宽度数字传输系统脉码调制般包括三个过程采样量化和编码同步光纤网美国提出一个数字传输标准叫做同步光纤网同步数字序列相当于的同义词标准近似首次实现了数字传输体制上的世界性标准宽带接入技术用户要连接到互联网必须先连接到某个初期用户利用电话的用户线通过调制解调器连接到最高速率美国联邦通信委员会认为只要双向速率和超过就是宽带技术非对称数字用户线上行与下行速率不同特点下行速率远大于上下采用非对称传输的原因在网络应用中用户的下载数据量要远大于上传的数据量在用户线铜线的两端各安装一个调制解调器我国目前采用的方案是离散多音调频率调制技术打电话上网上传下载多用户都不互相影响光纤同轴混合网网网对网进行了改造网将原网中的同轴电缆主干部分改换为光纤并使用模拟光纤技术技术代表多种宽带光纤接入方式图床至此为止三数据链路层数据链路的主要功能数据链路层协议的三个基本问题数据链路使用的信道类型协议的特点帧格式工作状态局域网拓扑结构协议以太网的帧地址如何实现在物理层数据链路层扩展以太网集线器交换机的特点与区别交换机的工作原理生成树协议的作用工作原理的作用和特点以太网的演进数据链路和帧链路是一条无源的点到点的物理线路段中间没有任何其他的交换结点不同的链路层可能采用不同的数据链路层协议三个基本问题封装成帧透明传输差错控制封装成帧首部和尾部进行帧定界透明传输透明实际存在但是又摸不到看不着这里是相对上层来说透明任何一个二层协议都要解决透明传输问题控制字符在数据出现会导致帧定界出错解决方法字节填充如果数据中有控制字符那么在控制字符前进行字节填充差错控制传输过程中可能会产生比特差错可能会变成而也可能变成传输错误的比特占所传输比特总数的比率称为误码率误码率与信噪比有很大的关系为了保证数据传输的可靠性在计算机网络传输数据时必须采用各种差错检测措施广泛使用循环冗余检验的检测方法假设待传送的一组数据现在我们在的后面再添加供差错检测用的位冗余码一起发送二进制模运算进行乘的运算相当于在后面添加个冗余码计算举例现在设除数被除数是模运算的结果是商余数把余数作为冗余码添加在数据的后面发送出去发送的数据是即共位余数作为任意一个比特出错都能查出来表示检验若得出余数则判断这个帧没有差错就接收若余数则有差错丢弃这种方法并不能确定究竟是哪一个或哪几个比特出现了差错只要经过严格的挑选并使用位数足够多的除数则检测不出差错的概率将很小仅用循环冗余检验差错检测技术只能做到无差错接受也就是说凡是接收端数据链路层接受的帧都没有传输差错有差错的帧就丢弃而不接受要做到可靠传输即发送什么就收到什么就必须再加上确认和重传机制奇偶校验这能检测出奇数个位出错偶数位出错查不出来练习要发送的数据是采用的生成多项式是试求应添加在数据后面的余数不借位注意补零算错两次了点对点协议特点组成工作状态帧格式透明传输协议的帧格式帧的首部和尾部分别为个字段和个字段标志字段符号表示后面的字符是用十六进制表示十六进制的的二进制表示是地址字段只置为地址字段实际上并不起作用控制字段通常置为是面向字节的所有的帧的长度都是整数字节透明传输问题字符填充零比特填充在协议中为了解决传输中出现的数据丢失或者错误采用了同步传输技术并在数据帧中使用了零比特填充的方法具体地当数据帧中出现连续的五个时在第六个之后自动插入一个零以避免在传输过程中与控制帧的标识字段发生混淆使用广播信道的数据链路层以太网的两个标准逻辑链路控制子层媒体接入控制子层由于经常试验作用不大很少有了适配器作用网络接口板又称为通信适配器或网络接口卡或网卡重要功能进行串行并行转换对数据进行缓存在计算机的操作系统安装设备驱动程序实现以太网协议以太网采取了两种重要的措施为了通信方便采用较为灵活的无连接的工作方式以太网发送的数据都使用曼彻斯特编码媒体共享技术动态媒体接入控制多点接入随机接入方式争用可能会起冲突受控接入方式每一个站点轮流拿令牌把信息加载令牌后动态分配的特点信息是开放的没有预分配通过多点接入协议动态分配信道资源提高信道利用率常用的还是随机接入典型的随机接入协议协议想发就发协议先听后发协议先听后发边发边听协议多点接入表示许多计算机以多点接入的方式连接在一根总线上碰撞检测就是计算机边发送数据边检测信道上的信号电压大小载波监听是指每一个站在发送数据之前先要检测一下总线上是否有其他计算机在发送数据如果有则暂时不要发送数据以免发生碰撞争用期最迟检测时间就是到的往返时延过了说明就可以了没有冲突因此称为征用期对于以太网在争用期内可发送因此以太网最短的帧为如果发生冲突就一定是在发送的前字节之内由于一检测到冲突就立即中止发送这时已经发送出去的数据一定小于字节以太网规定了最短有效帧长为字节凡长度小于字节的帧都是由于冲突而异常中止的无效帧二进制指数类型退避算法发生碰撞的站在停止发送数据后要推迟退避一个随机时间才能再发送数据说话有冲突双方都等一下再说等多久呢从整数集合中随机取一个数记为重传所需的时延就是倍基本退避时间比如集合就是随机到那么冲突之后不等待直接重传当时参数等于重传次数当重传达次仍不成功则丢弃帧并向高层报告要点准备发送检测信道忙则等待若检测到信道空闲并在比特时间内信道保存空闲保证了帧间最小间隔就发送这个帧检测碰撞发送成功未检测到碰撞发送完毕回到准备发送发送失败检测到碰撞立即停止发送人为干扰信号然后执行指数退避算法等待倍比特时间后回到检测信道步骤若重传次仍不成功停止重传向上报错使用集线器的星形拓扑年制定出星形以太网的标准中的表示信号在电缆上的传输速率为表示电缆上的信号是基带信号代表双绞线星形网奠定了以太网在局域网的统治地位既降低了成本又提高了可靠性具有很高的性价比从此以太网的总线型变为星形网络参数与利用率在以太网中定义了参数它是以太网单程端到端时延与帧的发送时间之比集线器工作在物理层所有接收的数据都发出去使用集线器的以太网在逻辑上仍是一个总线网工作站使用协议共享逻辑上的总线使用集线器的以太网利用率很低以太网的层层硬件地址硬件地址又称为物理地址或地址个字节位表示的是某个端口的地址适配器检查地址发往本站的帧包括以下三种帧单播帧一对一广播帧一对全体多播帧一对多混杂方式工作只要听到有帧在以太网上传输都接收下来帧头目的地址源地址类型协议加上前后帧就是在帧前面插入的字节第一个字段共个字节是前同步码用来迅速实现帧的比特同步第二个字段个字节是帧开始定界符表示后面的信息就是帧相当于的准备指令最后的就是齐步走的指令规定的帧第三个字段是长度类型扩展以太网在物理层扩展以太网在数据链路层扩展以太网早期使用网桥现在使用以太网交换机以太网交换机特点实质上就是一个多接口的网桥每个接口都是与主机或交换机直接相连并且全双工方式工作以太网交换机具有并行性优点用户独享带宽增加了总容量对于普通共享式以太网所有用户平分带宽而以太网交换机每个接口带宽都是一样接口越多带宽总容量越大共享转交换不用改动具有多种速率接口适合不同用户交换机要分割广播域需要用到虚拟局域网工作原理交换机起初有一张空的地址表通信之后自动学习地址然后转发信息第一次交换机会广播包然后和都收到但是是需要的接到后返回包给交换机这时候交换机已经知道两者的地址了将包返回给此后发包交换机都会直接在二者进行不用广播了若在有效时间内两主机都没通信该条目会被删除地址表空间有限一旦表满就会泛洪到所有新地址的帧知道现存地址条目老化未知监听短时间大量发送错误的地址进行攻击造成内存溢出交换机就会从点对点的交换式退回共享式监听其他主机的数据了交换方式把整个数据帧先缓存检查是否出错如无错才送往目的端口有差错控制交换时延较长从总线以太网到星形以太网早期以太网采用无源的总线结构现在采用以太网交换机的星形结构成为以太网的首选拓扑总线以太网使用协议以半双工方式工作交换机不使用共享总线没有碰撞问题因此不使用协议而是以全双工式工作但仍然采用以太网的帧结构使用了生成树协议不改变网络的实际拓扑但在逻辑上则切断某些链路使得从一台主机到所有其他主机的路径是无环路的树状结构从而消除了兜圈子现象虚拟局域网虚拟局域网它是将局域网从逻辑上划分为一个个的网段从而实现虚拟工作组的一种交换技术因此同一个网段下的主机都要设置同一个网络号补充当子网掩码为则前三个段表示网络号前两个为网络号在位二进制表示全那么不同网段设置不同网络号就好了为什么要设是逻辑地址随时改不安全不严谨一个一个广播域逻辑网段子网高速以太网吉特以太网上层链路速度要比下层所有加起来要大或等于四网络层网络层提供的两种服务虚电路服务面向连接让网络负责可靠交付数据报服务无连接让主机负责可靠交付网络层两种服务含义优点缺点虚电路服务借助电信网经验通信之前先建立虚电路以保证双方通信所需的一切网络资源使所发送的分组无差错按序到达终点不丢失不重复占用一定的网络带宽造成资源浪费数据报服务网络在发送分组时不需要先建立连接每一个分组即数据报独立发送与其前后的分组无关不进行编号传输网络不提供端到端的可靠传输服务网络的造价大大降低运行方式灵活能够适应多种应用网络层不提供服务质量的承诺即所传送的分组可能出错丢失重复和失序不按序到达终点不保证分组传送的时限网际协议协议到的映射报告出错情况虚拟互连网络意义所谓虚拟互连网络也就是逻辑互连网络使用虚拟互连网络的好处是当互联网上的主机进行通信时就好像在一个网络上通信一样而看不见互连的各具体的网络异构细节如果在这种覆盖全球的网的上层使用协议那么就是现在的互联网核心层汇聚层接入层为什么要有而不单独用因为就像一个人的名字找是很难找的就像学号具备逻辑信息找起来方便分类的地址类地址的第一个十进制数范围从类地址的第一个十进制数范围从类地址的第一个十进制范围例如网络号字段即类类类点分十进制记法机器中存放地址是位二进制代码位为一组转换为十进制数提高可读性转换为的位代表的十进制数相加一般不使用的特殊的地址网络号主机号源地址实验目的地址实验代表的意思可以不可在本网络上的本主机节协议可以不可在本网络上的某台主机全全不可可以只在本网络上进行广播各路由器均不转发全不可可以对上的所有主机进行广播调试网络自己没错网关网关没错下一跳没问题再下一跳地址的重要特点分等级的地址结构两个好处地址管理机构在分配地址时只分配网络号由该网络号的单位自行分配剩下的主机号方便地址管理路由器仅根据目的主机所连接的网络号来转发分组使路由器中的项目数大幅减少从而减小路由表所占的存储空间实际上地址是标志一个主机或路由器和一条链路的接口因此当一个主机连接到两个网络上时就必须同时具有两个相应的地址这两个网络号必须不同称为多归属主机一个路由器至少应对连接到两个网络这样才能将数据报从一个网络转发到另一个即路由器至少要有两个不同的地址用转发器或网桥连接起来的若干个局域网仍为一个网络因此这些局域网都具有同样的网络号所有分配到网络号的网络无论是范围很小的局域网还是可能覆盖很大地理范围的广域网都是平等的小结地址是一种分等级的地址结构路由器用于连接不同网络一个路由器至少有两个网络号不同的地址用转发器或网桥连接起来的局域网仍属于一个网络在同一个网络上的主机或路由器的地址中的网络号必须是一样的地址与硬件地址数据报头部是地址帧首部是硬件地址在层抽象的互联网上只能看到数据报图中的表示从源地址到目的地址两个路由器的地址并不出现在数据报的首部中路由器只根据目的站的地址的网络号进行路由选择那怎么知道到哪个路由器呢这个时候就需要地址了层抽象的互联网屏蔽了下层很复杂的细节在抽象的网络层上讨论问题就能够使用统一的抽象的地址研究主机和主机或主机和路由器之间的通信地址解析协议通信时使用了两个地址地址网络层地址地址数据链路层地址来找地址解析协议作用就是从网络层使用的地址解析出在数据链路层使用的硬件地址作用从网络层使用的地址解析出在数据链路层使用的硬件地址要点不管网络层是什么协议当网络上传输数据帧时还是需要使用硬件地址的每一个主机都设有一个高速缓存里面有所在的局域网上的各主机和路由器的地址到硬件地址的映射表地址映射有效时间向发数据报先查有无的地址就可以查到硬件地址并写入帧通过局域网将帧发往硬件地址进程在本局域网广播发送一个请求分组收到响应后将映射写入注意是解决同一个局域网上的主机或路由器的地址和硬件地址的映射问题如果目的主机不在同一个局域网则现有找到一个位于本局域网上的某个路由器的硬件地址将分组发送给路由器进行转发剩下的工作由下一个网络来做从地址到硬件地址的解析是自动进行主机用户不知道只要与已知的设备进行通信协议就会自动地将该地址解析为链路层所需要的硬件地址为什么我们不直接使用硬件地址进行通信异构网络转换复杂由于全世界存在着各式各样的网络它们使用不同的硬件地址要使这些异构网络能够互相通信就必须进行非常复杂的硬件地址转换工作因此几乎是不可能的事编址解决这一问题统一标准进行编号连接到互联网的主机只需各自拥有一个唯一的地址它们之间的通信就像连接在同一个网络上那样简单方便因为上述的调用的复杂过程都是由计算机软件自动进行的对用户来说是看不见这种调用过程的因此在虚拟的网络上用地址进行通信给广大的计算机用户带来了很大的方便第一个是广播发送全地址发送路由器的地址让路由器转发分组主机可以访问服务器但不能访问以太网数据部分整个帧小结协议的作用从地址解析出硬件地址每一个主机都设有一个高速缓存用于存放最近获得的地址到地址的绑定当目的主机和源主机不在同一个局域网时通过找到默认网关的硬件地址然后由默认网关把分组转发给下一个网络数据报的格式一个数据报由首部和数据两部分组成首部的前一部分是固定长度共字节是所有数据报必须具有的在首部的固定部分的后面是一些可选字段其长度是可变的数据报首部的固定部分中的各字段首部前一部分是固定长度共字节是所有数据报必须具有的可选字段说明长度是可变第一行从左到右版本占位指协议的版本目前的协议版本号为即首部长度占位可表示的最大数值是个单位一个单位为字节因此的首部长度的最大值是字节区分服务只有使用区分服务才起作用一般不使用总长度占位指首部和数据之和的长度单位为字节因此数据报的最大长度为字节总长度必须不超过最大传送单元最大传输单元一个帧可传输的数据量的上界数据经先分片到目的站再重组第二行从左到右标识占位它是一个计数器用来产生数据报的标识标志占位目前只有前两位有意义表示后面还有分片表示最后一个分片时才允许分片片偏移占位指出较长的分组在分片后某片在原分组中的某片在原分组中的相对位置片偏移以个字节为偏移单位除以例子第三行从左到右生存时间占位记为指示数据报在网络中可通过的路由器数的最大值协议占位指出此数据报携带的数据使用何种协议以便目的主机的层将数据部分上交给那个处理过程首部检验和占位只检验数据报的首部不检验数据部分这里不采用检验码而采用简单的计算方法死亡之包尺寸目标包最大而实际规定的最大尺寸并达不到一直发大包分片之后没问题接收到重组之后就发现超过了尺寸使得额外数据被写入其他正常区域造成缓存溢出攻击解决办法对超出规定长度的包直接丢掉不重组生存时间协议首部检验和并不检验数据为了减少路由器处理时延转发分组更快缺点出现差错不能及时发现计算距离了解即可目的地址源地址可变部分从字节到字节不等现在少用一般都是固定的练习一行由位进制标识当有一个分组表每个单元是一个位进制那么源地址就是第四个单元如解答主机的地址是对应的十六进制是根据分组的源地址知道分组和是发送的快速以太网数据帧的数据最小长度为当分组总和小于时需要填充根据分组的总长度字段个分组的长度分别为即第个分组大小分别为均大于最小帧长不需要填充第个分组分组大小为因此需要填充小结数据报由首部和数据组成途径较小网络数据报会被分片到达目的站后再进行重组数据报采用位二进制反码求和算法检验数据报的首部层转发分组的流程在路由表中对每一条路由最主要的是目的网络地址下一跳地址查找路由表根据目的网络地址就能确定下一跳路由器这样做的结果是数据报最终一定可以找到目的主机所在目的网络上的路由器可能要通过多次的间接交付只有到达最后一个路由器时才试图向目的主机进行直接交付特定主机路由分组转发基于目的主机所在网络特例是为特定目的主机指明一个路由方便控制和测试默认路由减少路由表占用空间和搜索路由表时间注意数据报首部没有指明下一跳路由器的当路由器接到数据报是将下一跳地址递交下一层网络接口软件而非填入数据报网络接口软件使用负责将下一跳路由器的地址转换成硬件地址并将此硬件地址放在链路层的帧的首部然后根据这个硬件地址找到下一跳路由器路由器分组转发算法从首部提取目的主机地址得出目的网络地址若直接相连则直接交付目的主机否则间接交付执行若有特定主机路由则传送给指明的下一跳路由器否则执行若有到达网络的路由传送否则若有默认路由传送给指明的默认路由器否则报告转发分组出错划分子网和构造超网划分子网原因早期地址设计不够合理利用率低两级的地址不够灵活解决在地址中增加一个子网号字段从两级变成三级地址叫做划分子网基本思路划分子网纯属单位内部的事借助主机位划分子网对外仍然是一个网络从主机号再借用若干位作为子网号因此主机号就相应减少了若干位从其他网络发来的数据报仍然根据数据包的目的网络号找到本单位网络上的路由器此路由器再按目的网络号和子网号找到目的子网优点减少了地址的浪费使网络的组织更加灵活更便于维护和管理子网掩码原因根据数据报首部无法判断目的网络是否进行子网划分解决通过子网掩码可以找到地址中的子网部分规则子网掩码长度位某位地址中的对应位为网络号和子网号某位地址中的对应位为主机号看例题因此无法仅通过首部判断源主机或目的主机所连接的网络是否进行了子网划分与运算地址子网掩码网络地址借的位数越多子网越多但是每个子网能带的主机数越少如何理解借用呢看下面的例子通过地址可以看到是个类但是子网掩码不是默认的而是写出的进制是前面个借了位也就是划分了个子网三位二进制有种组合每一种组合加上后面全就对应一个子网号网络地址子网掩码说明借了两位产生子网子网数借了多少位产生多少子网主机数有效子网广播地址网络段不变包括借位的部分后面全有效主机范围是地址类别分段网络号主机号默认子网掩码位位位位位位使用子网时分组的转发无分类编址网络前缀的位数即网络号为地址块例有多少地址一个位网络占则地址有最大最小地址看最后位全则为最小网络号全为最大网络号地址块后位全即最小地址子网掩码令位全后位全路由聚合构成超网将多个子网聚合成一个较大的子网构成超网或网络聚合方法将网络前缀缩短所有网络取交集这两个网络只有前位相同因此取交集网络前缀缩短为即划分子网从少到多构成超网从多变少最长前缀匹配使用时路由表中的每个项目由网络前缀和下一跳地址组成在查找路由表时可能会得到不止一个匹配结果使用时查找路由表可能得到几个匹配结果跟网络掩码按位相与应选择具有最长网络前缀的路由前缀越长地址块越小路由越具体根据最长前缀匹配如果匹配成功则选择网络前缀最长的就是目标路由器解题步骤先将目的地址和路由表所有项目的子网掩码进行与运算看看结果是否等于路由表的项目如果有多个相同的结果取子网掩码长的例这里就匹配到了两个结果选择子网掩码最长的即因此下一跳为二叉线索法网际控制报文协议目的为了更加有效转发数据报和提高交付成功的机会作用允许主机或路由器报告差错情况和提供有关异常情况的报告注意不是高层协议它封装在数据报中作为数据部分是层的协议报文的种类两种差错报告报文询问报文报文格式前个字节统一格式三个字段类型代码和检验和接着个字节与类型有关差错报告报文四种终点不可达时间超过参数问题改变路由重定向不应发送差错报告报文的几种情况对差错报告报文不再发送差错报告报文对第一个分片的数据报片的所有后续数据报片都不发送差错报告报文对具有多播地址的数据报都不发送差错报告报文对具有特殊地址如或的数据报不发送差错报告报文询问报文回送请求和回答报文时间戳请求和回答报文的应用距离用来测试两个主机之间的连通性使用了回送请求与回送回答报文是应用层直接使用网络层的例子它没有通过运输层的或中命令是用来跟踪一个分组从源点到终点的路径它利用数据报中的字段和时间超过差错报告报文实现对从源点到终点的路径的跟踪小结用于主机或路由器报告差错情况和提供有关异常情况的报告报文包括差错报告报文和询问报文两种应用互联网的路由选择协议有关路由选择协议的几个基本概念路由算法路由选择优点缺点静态路由选择策略非自适应路由选择简单和开销较小但不能及时适应网络状态的变化动态路由选择策略自适应路由选择能较好地适应网络状态的变化实现起来较为复杂开销也比较大分层次的路由选择协议互联网采用分层次的路由选择协议原因互联网的规模非常大为了节省路由表空间同时避免通信链路饱和单位不想让外界了解自己的网络自治系统在单一的技术管理下的一组路由器使用内部的路由选择协议和共同的度量来确定其中的路由还使用之间的路由选择协议来确定分组在之间的路由尽管一个使用了多种内部路由选择协议和度量一个对其他表现出的是一个单一的和一致的路由选择策略互联网有两大类路由选择协议内部网关协议在一个自治系统内部使用的路由选择协议这类使用的最多如和外部网关协议源站和目的站不在一个自治系统数据报传到自治系统边界就要用一种协议将路由选择信息传递进另一个自治系统这个系欸就是使用最多的是自治系统之间路由选择叫域间路由选择内部路由选择叫做域内路由选择路由器和网关可以当作同义词小结路由选择包括静态和动态两种路由选择策略一个自治系统表现出一致的路由选择策略根据是在自治系统内部使用还是在自治系统之间使用路由选择协议可以分为内部网关协议和外部网关协议内部网关协议内部网关协议中最先得到广泛使用协议一种分布式的基于距离向量的路由选择协议协议要求网络中的每一个路由器都要维护从它自己到其他每一个目的网络的距离记录距离指最短距离路由器到直连网络距离定义为到非直连的距离定义为所经过的路由器数加也成为跳数经过一个路由器跳数加好的路由就是经过路由器数目少即距离短允许一条路径最多只能包含个路由器加上自己就是跳就表示不可达因此只适用于小型网络不能使用多条路由这导致它永远选最短的那条哪怕另外还有一条低时延的路由把下一跳字段中的地址都改为并把所有的距离字段的值加特点仅和相邻路由器交换信息交换自己的路由表按固定的时间间隔交换路由信息查看错题若下一跳字段给出的路由器地址相同则把收到的项目替换源路由表项目如果收到项目中的距离小于路由表中的距离则进行更新报文存在划分子网情况要用具有简单的鉴别功能小结使用跳数判断到其他网络的距离周期性地和相邻路由器交换自己的路由表能使用的最大距离为跳不可达适用于小型网络好消息传播得快坏消息传播得慢信息一直不匹配要不断更新直到超过导致更新过程收敛时间过长内部网关协议采用分布式的链路状态协议邻居表邻居路由器的信息拓扑表也叫链路状态数据库同区域中所有路由器的信息必须保持一致路由表到达目标网络的最佳路径链路状态数据库拓扑表链路状态即本路由器和哪些路由器相邻以及该链路的度量所有路由器最终建立一个链路状态数据库全网的拓扑结构图它在全网范围内是一致的同步能较快地更新收敛快是其重要优点区域用于规模大地网络将一个自治系统再划分为若干个更小的范围即区域每个区域有位的区域标识符点分十进制表示区域最好不超过个划分区域主干区域全常规区域非好处利用洪泛法交换链路状态信息的范围局限于每一个区域而不是整个的自治系统这就减少了整个网络上的通信量在一个区域内部的路由器只知道本区域的完整网络拓扑而不知道其他区域的网络拓扑的情况使用层次结构的区域划分在上层的区域叫作主干区域主干区域的标识符规定为主干区域的作用是用来连通其他在下层的区域不用而是直接用数据报传送数据报短不必分片但只要丢失一个就得整个重传支持可变长度的子网划分和无分类编址五种分组类型类型问候分组类型数据库描述分组类型链路状态请求分组类型链路状态更新分组用洪泛法对全网更新链路状态类型链路状态确认分组与比较每隔一段时间如分钟要刷新一次数据库中的链路状态当互联网规模很大时协议要比距离向量协议好得多没有坏消息传播得慢的问题据统计其响应网络变化的时间小于小结包括邻居表拓扑表链路状态数据库路由表链路状态数据库在全网范围内一致同步的更新过程收敛速度快将一个自治系统划分为若干个区域区域内部的路由器只需要知道本区域的网络拓扑区域包括主干区域和常规区域两种通过洪泛发送更新分组外部网关协议路由器的构成的基本首部主要变化更大的地址空间从的位增大到了位扩展的地址层次结构灵活的首部格式定义了许多可选的扩展首部改进的选项允许协议继续扩充支持即插即用即自动配置因此不需要使用支持资源的预分配首部改为字节对齐首部长度必须是字节的整数倍原来的首部是字节对齐扩展首部把原来首部中选项的功能都放在扩展首部中数据报途中经过的路由器都不处理这些扩展首部只有一个首部例外即逐跳选项扩展首部这样就大大提高了路由器的处理效率的地址目的地址可以是以下三种基本类型地址之一单播点对点多播一点对多点任播目的是一组计算机数据包交付时只交付其中一个通常为距离最近的一个冒分十六进制允许零压缩即一连串连续的零可以为一对冒号所取代例如可压缩为注意在任一地址中只能使用一次零压缩的斜线表示法仍然可用从向过渡两种策略使用双协议栈网络地址转换协议转换技术使用隧道技术把数据报封装成为数据报整个的数据报变成了数据报的数据部分离开网络中的隧道时再把数据部分即原来的数据报交给主机的协议栈虚拟专用网和网络地址转换虚拟专用网原因地址紧缺对于机构内部可以自行分配地址然而很容易有本地地址和全球地址相同的情况造成二义性因此需要作出规定三个专用地址块到即开头类或记为它又称为位块到即类或记为它又称为位块到即开头类或记为它又称为位块这类地址不需要申请直接可以使用仅在本机构内部使用不能出公网虚拟专用网一般专用网就是专线直接相连使用专用地址然而直接用线路连成本过高对大部分机构不实际需要虚拟利用公用的互联网作为本机构各专用网之间的通信载体表示好像是但实际上并不是因为现在并没有真正使用通信专线而只是在效果上和真正的专用网一样远程接入远程接入可以满足外部流动员工访问公司网络的需求小结专用地址只能用作本地地址互联网中的路由器不转发目的地址为专用地址的数据报采用专用地址的互连网络称为专用网虚拟专用网利用公用的互联网作为本机构各专用网之间的通信载体使用隧道技术实现网络地址转换问题在专用网上使用专用地址的主机如何与互联网上的主机通信并不需要加密申请全球地址采用网络地址转换装有软件的路由器叫作路由器它至少有一个有效的外部全球地址所有使用本地地址的主机在和外界通信时都要在路由器上将其本地地址转换成全球地址才能和互联网连接优点避免重新编址节约全局地址使用不直接使用全局地址在互联网上不直接可见增加了安全性三种类型静态每个主机被永久映射成外部网络中的某个合法的地址一对一动态定义了一系列合法地址利用动态分配进行映射一对一重载把内部地址映射到外部网络一个地址的不同端口上多对一多协议标记交换本章总结网络层提供的两种服务面向连接虚电路无连接数据报网络互联设备集线器交换机路由器多层交换机两级的地址结构网络号主机号地址的点分十进制记法地址的分类类类类类类地址与硬件地址的区别协议的作用工作原理如何知道硬件地址数据报的格式大题路由器分组转发算法划分子网的基本思路优点计算题子网掩码使用子网时分组的转发的特点最长前缀匹配使用二叉线索查找路由表作用报文的格式种类应用路由选择协议内部网关协议外部网关协议协议的特点的基本首部的地址向的过渡的作用特点专用地址块每一点都有关联理清关系为什么要有这样的协议技术解决何种问题传输层运输层在协议栈中的地位从通信和信息处理角度运输层为上面的应用层提供通信服务是面向通信部分的最高层和用户功能的最底层端到端通信时只有主机协议栈才有运输车而路由器在转发分组时都只用到下三层从网络层来说协议虽然能把分组送到目的主机但是分组还停留在主机的网络层没有交付主机的应用程序然而真正的通信实体是主机间的进程所以还需要运输层完成交付从运输层来看通信真正的端点并不是主机而是主机的进程即端到端的通信是应用进程之间的通信同时运输层还有复用分用的功能还要对收到的报文进行差错检测因此运输层在协议栈中非常重要必不可少运输层和网络层的重要区别运输层网络层位置七层网络结构的第四层七层网络结构的第三层重要区别提供应用进程之间的逻辑通信提供主机之间的逻辑通信服务协议协议运输层协议概述进程之间的通信路由器工作在下三层不单只是主机之间通信还得提供应用进程的通信复用和分用功能两大类端口服务器端使用的端口号熟知端口数值一般为登记端口号数值为为没有熟知端口号的应用程序使用的使用这个范围的端口号必须在登记以防止重复客户端使用的端口号又称为短暂端口号数值为留给客户进程选择暂时使用当服务器进程收到客户进程的报文时就知道了客户进程所使用的动态端口号通信结束后这个端口号可供其他客户进程以后使用常用的熟知端口记忆协议明文传输抓包就能看到具体信息而在基础上加上安全套接层加密运输层的两个主要协议用户数据报协议传输控制协议与表格一种无连接协议提供无连接服务在传送数据之前不需要先建立连接传送的数据单位协议是报文或用户数据报对方的运输层在收到报文后不需要给出任何确认虽然不提供可靠交付但在某些情况下是一种最有效的工作方式一种面向连接的协议提供面向连接的服务传送的数据单位协议是报文段不提供广播或多播服务由于要提供可靠的面向连接的运输服务因此不可避免地增加了许多的开销这不仅使协议数据单元的首部增大很多还要占用许多的处理机资源用户数据报协议在数据报服务增加了复用和分用的功能差错检测的功能主要特点无连接尽最大努力交付面向报文没有拥塞控制支持一对一一对多多对一和多对多首部开销小只有字节而有字节检验和检验和字段置零用户数据报凑够偶数字节把所有位伪首部首部数据部分按位划分为不同的字计算上述所有位字的和如果有进位导致总位数超过位则把进位值加到末位将上述计算的和取反即为用户数据报的检验和的应用对传输协议的可靠性要求不高需要传送的数据不多使用频率不高如服务域名映射服务服务等实时应用如电话视频会议等报文首部检验和字段校验和算法一样但作用范围不同校验和只校验数据报的首部校验和覆盖整个报文首部数据和校验和不仅覆盖整个报文而且还有个字节的伪首部传输控制协议概述最主要的特点面向连接只有两个端点点对点可靠交付全双工面向字节流的连接连接的端点叫做套接字或插口端口号地址构成套接字套接字地址端口号连接可靠传输的工作原理停止等待协议理想的传输条件有以下两个特点传输信道不产生差错不管发送方以多快的速度发送数据接收方总是来得及处理收到的数据每发送完一个分组就停止发送等待对方的确认在收到确认后再发送下一个分组全双工通信的双方既是发送方也是接收方无差错情况发完暂停等待确认收到确认后再发送出现差错传输过程丢失接收时出错解决办法超时重传确认丢失和确认迟到确认丢失此在超时计时器到期后就要重传接收到后可以丢弃向发送确认确认重传对分组的确认迟到会收到重复的确认后丢弃仍然会收到重复的丢弃重复的并重传确认分组注意在发送完一个分组后必须暂时保留已发送的分组的副本以备重发分组和确认分组都必须进行编号在发送完一个分组后必须暂时保留已发送的分组的副本以备重发信道利用率停止等待协议的优点是简单缺点是信道利用率太低连续协议连续协议规定发送方每收到一个确认就把发送窗口向前滑动一个分组的位置累计确认不必对分组逐个发送确认对到达的最后一个分组发送确认表示之前的所有我都收到了优容易实现即使确认丢失也不必重传缺不能向发送方反映出接收方已经正确收到的所有分组的信息回退回退表示需要再退回来重传已发送过的个分组比如发的前个分组是收到由于开始不联系只确认即以前都收到不知道后三个分组下落超时后重传连接的每一端都必须设有两个窗口一个发送窗口和一个接收窗口小结流水线传输允许发送方连续发送多个分组而不需要等待对方的确认从而提高信道利用率位于发送窗口内的分组可连续发送出去发送方每收到一个确认就把发送窗口向前滑动一个分组的位置接收方采用累积确认的方式对按序到达的最后一个分组发送确认报文段的首部格式面向字节流传送的数据单元却是报文段源端口和目的端口字段各占字节端口是运输层与应用层的服务接口运输层的复用和分用功能都要通过端口才能实现序号字段占字节数据流每个字节都编上一个序号序号字段的值则指的是本报文段所发送的数据的第一个字节的序号确认号字段占字节期望收到对方的下一个报文段的数据的第一个字节的序号比如发的确认号字段就是序号确认号数据偏移即首部长度占位它指出报文段的数据起始处距离报文段的起始处有多远数据偏移的单位是位以字节为计算单位保留字段占位目前为紧急当时表明紧急指针字段有效它告诉系统此报文段中有紧急数据应尽快传送相当于高优先级的数据确认只有当时确认号字段才有效当时确认号无效推送接收收到的报文段就尽快地交付接收应用进程而不再等到整个缓存都填满了后再向上交付复位当时表明连接中出现严重差错如由于主机崩溃或其他原因必须释放连接然后再重新建立运输连接同步同步表示这是一个连接请求或连接接受报文终止用来释放一个连接表明此报文段的发送端的数据已发送完毕并要求释放运输连接窗口字段占字节窗口字段用来控制对方发送的数据量单位为字节连接的一端根据设置的缓存空间大小确定自己的接收窗口大小然后通知对方以确定对方的发送窗口的上限窗口字段指出了现在允许对方发送的数据量窗口值是经常在动态变化的如设确认号是窗口字段是这就表明从号算起发送此报文段的一方还有个字节数据字节序号是的接收缓存空间检验和和类似占字节检验和字段检验的范围包括首部和数据这两部分在计算检验和时要在报文段的前面加上字节的伪首部紧急指针字段占位指出紧急数据多少字节紧急数据放在本报文段数据的最前面选项字段长度可变最初只规定了一种选项即最大报文段长度报文段长度减去首部长度填充字段使整个首部长度是字节的整数倍小结的每条连接都有发送序号和确认号序号字段是本报文段所发送的数据的第一个字节的序号确认号字段是期望收到对方的下一个报文段的数据的第一个字节的序号连接的一端根据缓存空间大小确定自己的窗口大小利用窗口字段控制对方发送的数据量可靠传输的实现的滑动窗口是以字节为单位的根据给出的窗口值构造出自己的发送窗口发送窗口表示在没有收到的确认的情况下可以连续把窗口内的数据都发送出去发送窗口里面的序号表示允许发送的序号显然窗口越大发送方就可以在收到对方确认之前连续发送更多的数据因而可能获得更高的传输效率小结连接的一端根据另一端给出的窗口值构造自己的发送窗口连接的一端可以连续把发送窗口内的数据都发送出去而不需要等待对方的确认收到新的确认号发送窗口向前滑动超时重传时间的选择重传时间的选择是最复杂的问题之一采用了一种自适应算法它记录一个报文段发出的时间以及收到相应的确认的时间这两个时间之差就是报文段的往返时间慢慢更新平均往返更新通过加权平均往返时间计算超时重传时间选择确认缺少部分只发送缺少的不全部重传的接收方在接收对方发送过来的数据字节流的序号不连续结果就形成了一些不连续的字节块如果使用选择确认那么原来首部中的确认号字段的用法仍然不变只是以后在报文段的首部中都增加了选项以便报告收到的不连续的字节块的边界小结采用自适应算法计算报文段的往返时间超时重传时间略大于往返时间的流量控制利用滑动窗口实现流量控制流量控制就是让发送方的发送速率不要太快既要让接收方来得及接收也不要使网络发生拥塞方法滑动窗口机制可能发生的问题互相等待的死锁方法持续计时器持续计时器只要连接的一方收到对方的零窗口通知举例的最后一条就启动该持续计时器若持续计时器设置的时间到期就发送一个零窗口探测报文段仅携带字节的数据而对方就在确认这个探测报文段时给出了现在的窗口值若窗口仍然是零则收到这个报文段的一方就重新设置持续计时器若窗口不是零则死锁的僵局就可以打破了的拥塞控制拥塞控制的一般原理某资源需求超过了提供的可用部分网络性能变坏发生拥塞拥塞问题很复杂开环控制和闭环控制开环控制闭环控制的拥塞控制方法采用基于窗口的方法进行拥塞控制该方法属于闭环控制方法拥塞判断重传定时器超时超时收到三个相同重复的丢包拥塞控制算法拥塞控制算法含义作用慢开始由小到大逐渐增大拥塞窗口数值防止拥塞窗口增长过大引起网络拥塞拥塞避免每经过一个往返时间就把发送方的拥塞窗口加而不是加倍使拥塞窗口按线性规律缓慢增长加法增大的特点按线性规律缓慢增长比慢开始算法的增长速率缓慢很多快重传首先要求接收方不要等待自己发送数据时才进行捎带确认而是要立即发送确认即时收到了失序的报文段也要立即发出对已收到的报文段的重复确认让发送方尽早知道发生了个别报文段的缺失发送方只要一连收到三个重复确认就知道接收方确实没有收到应当立即重传因此不会出现超时发送方也不会误认为出现了网络拥塞快恢复发送方收到三次确认可以认为网络没有发送拥塞不执行慢开始而执行快恢复新的拥塞窗口等于当前拥塞窗口的一半并执行拥塞避免算法进行缓慢线性增长提高网络传输效率提升吞吐量慢开始算法的思路由小到大逐渐增大拥塞窗口数值发收发收发收发收指数级增长拥塞避免避免办法设定阈值超过后下一轮只加当计时器超时拥塞将阈值改为一半重新进行慢开始快重传确认发送方改为执行快重传和快恢复算法发送方只要一连收到三个重复确认就知道接收方确实没有收到报文段因而应当立即进行重传即快重传这样就不会出现超时发送方也不就会误认为出现了网络拥塞不难看出快重传并非取消重传计时器而是在某些情况下可更早地重传丢失的报文段快恢复由于发送方现在认为网络很可能没有发生拥塞因此现在不执行慢开始算法而是执行快恢复算法可以看出在拥塞避免阶段拥塞窗口是按照线性规律增大的这常称为加法增大当出现超时或个重复的确认时就要把门限值设置为当前拥塞窗口值的一半并大大减小拥塞窗口的数值这常称为乘法减小乘法减小和加法增大用途乘法减小当出现超时或个重复的确认时就要把门限值设置为当前拥塞窗口值的一半并大大减小拥塞窗口的数值当网络频繁出现拥塞时门限值就下降得很快以大大减少注入到网络中的分组数加法增大在拥塞避免阶段拥塞窗口是按照线性规律增大的例如在收到对所有报文段得确认后即经过一个往返时间就把拥塞窗口增加一个大小使拥塞窗口缓慢增大防止网络过早出现拥塞小结对网络资源的需求超过了可用资源网络就会出现拥塞采用基于窗口的方法进行拥塞控制拥塞窗口的大小取决于网络的拥塞程度发送窗口大小取决于接收方公告的窗口和拥塞窗口后面的跳过了的运输连接管理的连接建立建立连接的过程叫做握手握手需要在客户和服务器之间交换三个报文段称之为三报文握手防止失效又突然传送到了产生错误说明进行确认确认包的值是收到的练习的连接释放数据传输结束后通信的双方都可释放连接连接释放过程是四报文握手总结掌握运输层的端口的概念及作用掌握的特点可靠传输停止等待协议连续协议了解的首部格式源端口目的端口序号确认号窗口掌握可靠传输流量控制拥塞控制的实现掌握的连接建立连接释放的过程连接处于状态以下的事件相继发生收到报文段收到报文段发生了超时在每一个事件之后连接的状态是什么在每一个事件之后发生的动作是什么等待接收方发送连接释放报文进入关闭等待状态半连接重传连接释放报文第章应用层域名系统域名系统概述地址不便记忆管理域名的系统就是互联网的域名结构互联网采用了层次树状结构的命名方法任何一个连接在互联网上的主机或路由器都有一个唯一的层次结构的名字即域名域名的结构由标号序列组成各标号之间用点隔开各标号分别代表不同级别的域名域名只是个逻辑概念并不代表计算机所在的物理地点域名服务器一个服务器所负责管辖的或有权限的范围叫做区每一个区设置相应的权限域名服务器用来保存该区中的所有主机的域名到地址的映射四种类型根域名服务器顶级域名服务器权限域名服务器本地域名服务器特点使用主要功能减少不同操作系统处理文件不兼容性使用客户服务器方式服务器进程由一个主进程负责接受新的请求和若干从属进程负责处理单个请求两个连接端口控制连接端口数据连接远程终端协议本节了解即可用户用就可在其所在地通过连接注册即登录到远地的另一个主机上使用主机名或地址用户感觉到好像键盘和显示器是直接连在远地主机上万维网概述万维网是一个大规模的联机式的信息储藏所并非某种特殊的计算机网络工作方式以客户服务器方式工作浏览器就是在用户计算机上的万维网客户程序万维网文档所驻留的计算机则运行服务器程序客户程序向服务器程序发出请求服务器程序向客户程序送回客户所要的万维网文档在一个客户程序主窗口上显示出的万维网文档称为页面解决的问题怎样标志分布在整个互联网上的万维网文档使用统一资源定位符唯一标识输入解析域名建立连接请求报文响应报文释放连接代理服务器使用高速缓存可减少访问互联网服务器的时延万维网的文档了解超文本标记语言万维网的信息检索系统了解博客和微博了解小结万维网是一个大规模的联机式的信息储藏所万维网用链接的方法从互联网上的一个站点访问另一个站点万维网以客户服务器方式工作万维网使用来标志文档万维网使用协议在客户程序与服务器程序之间进行交互万维网使用语言令页面显示出来可以使用搜索引擎在万维网上查找信息电子邮件发件人调用中的用户代理撰写和编辑要发送的邮件发件人的用户代理把邮件用协议发给发送方邮件服务器服务器把邮件临时存放在邮件缓存队列中等待发送发送方邮件服务器的客户与接收方邮件服务器的服务器建立连接然后就把邮件缓存队列中的邮件依次发送出去简单邮件传送协议使用客户服务器方式通信的三个阶段连接建立连接是在发送主机的客户和接收主机的服务器之间建立的不使用中间的邮件服务器邮件传送连接释放邮件发送完毕后应释放连接邮件读取协议和非常简单但功能有限的邮件读取协议现在使用的是它的第三个版本也使用客户服务器的工作方式缺陷读取完就在服务器删掉了协议客户服务器是一个联机协议需要的时候才传到用户计算机附件可以先不下载存在服务器节省资源基于万维网的电子邮件电子邮件从发送到网易邮件服务器使用协议两个邮件服务器之间的传送使用邮件从新浪邮件服务器传送到是使用协议万维网电子邮件的好处只要能够找到上网的计算机打开任何一种浏览器就可以非常方便地收发电子邮件通用互联网邮件扩充受限于无法传输错题动态主机配置协议互联网广泛使用的动态主机配置协议提供了即插即用连网的机制客户服务器方式需要地址的主机在启动时就向服务器广播发送发现报文这时该主机就成为客户服务器先在其数据库中查找该计算机的配置信息若找到则返回找到的信息若找不到则从服务器的地址池中取一个地址分配给该计算机服务器的回答报文叫做提供报文中继代理原因使得服务器的数量太多代理它配置了服务器的地址信息方法当中继代理收到主机发送的发现报文后就以单播方式向服务器转发此报文并等待其回答收到服务器回答的提供报文后中继代理再将此提供报文发回给主机',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-05-29 20:12:51',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.0.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="/./images/ava.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><a id="site-name" href="/" accesskey="h"><div class="title">yjchen</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/cv/cyj_CV.pdf"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> CV</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" alt="微信" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/C/" style="font-size: 1.05rem;">C++<sup>1</sup></a><a href="/tags/DL/" style="font-size: 1.05rem;">DL<sup>1</sup></a><a href="/tags/JavaScript/" style="font-size: 1.05rem;">JavaScript<sup>1</sup></a><a href="/tags/Linux/" style="font-size: 1.05rem;">Linux<sup>2</sup></a><a href="/tags/c/" style="font-size: 1.05rem;">c++<sup>1</sup></a><a href="/tags/html/" style="font-size: 1.05rem;">html<sup>2</sup></a><a href="/tags/javascript/" style="font-size: 1.05rem;">javascript<sup>1</sup></a><a href="/tags/minecraft/" style="font-size: 1.05rem;">minecraft<sup>1</sup></a><a href="/tags/python/" style="font-size: 1.05rem;">python<sup>2</sup></a><a href="/tags/%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8/" style="font-size: 1.05rem;">云服务器<sup>1</sup></a><a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 1.05rem;">前端<sup>1</sup></a><a href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/" style="font-size: 1.05rem;">小程序<sup>1</sup></a><a href="/tags/%E6%95%99%E7%A8%8B/" style="font-size: 1.05rem;">教程<sup>2</sup></a><a href="/tags/%E6%95%B0%E5%AD%A6/" style="font-size: 1.05rem;">数学<sup>2</sup></a><a href="/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/" style="font-size: 1.05rem;">服务器<sup>1</sup></a><a href="/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" style="font-size: 1.05rem;">深度学习<sup>1</sup></a><a href="/tags/%E7%AC%94%E8%AE%B0/" style="font-size: 1.05rem;">笔记<sup>8</sup></a><a href="/tags/%E7%BB%8F%E9%AA%8C%E5%88%86%E4%BA%AB/" style="font-size: 1.05rem;">经验分享<sup>1</sup></a><a href="/tags/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" style="font-size: 1.05rem;">编程语言<sup>6</sup></a><a href="/tags/%E8%84%91%E7%94%B5/" style="font-size: 1.05rem;">脑电<sup>1</sup></a><a href="/tags/%E9%A1%B9%E7%9B%AE/" style="font-size: 1.05rem;">项目<sup>5</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/05/"><span class="card-archive-list-date">五月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/04/"><span class="card-archive-list-date">四月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/03/"><span class="card-archive-list-date">三月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/11/"><span class="card-archive-list-date">十一月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/10/"><span class="card-archive-list-date">十月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/09/"><span class="card-archive-list-date">九月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">6</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/07/"><span class="card-archive-list-date">七月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">6</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/06/"><span class="card-archive-list-date">六月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%9C%AC%E7%A7%91%E8%AF%BE%E7%A8%8B/" itemprop="url">本科课程</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/%E7%AC%94%E8%AE%B0/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>笔记</span></a></span></div></div><h1 class="post-title" itemprop="name headline">计算机网络笔记</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2023-07-09T14:41:06.000Z" title="发表于 2023-07-09 22:41:06">2023-07-09</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2024-05-29T12:12:51.142Z" title="更新于 2024-05-29 20:12:51">2024-05-29</time></span></div><div class="meta-secondline"><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为广州"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>广州</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="/img/404.jpg"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="https://jjuprising.github.io/2023/07/09/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%94%E8%AE%B0/"><header><a class="post-meta-categories" href="/categories/%E6%9C%AC%E7%A7%91%E8%AF%BE%E7%A8%8B/" itemprop="url">本科课程</a><a href="/tags/%E7%AC%94%E8%AE%B0/" tabindex="-1" itemprop="url">笔记</a><h1 id="CrawlerTitle" itemprop="name headline">计算机网络笔记</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">JJuprising</span><time itemprop="dateCreated datePublished" datetime="2023-07-09T14:41:06.000Z" title="发表于 2023-07-09 22:41:06">2023-07-09</time><time itemprop="dateCreated datePublished" datetime="2024-05-29T12:12:51.142Z" title="更新于 2024-05-29 20:12:51">2024-05-29</time></header><h1 id="错题"><a href="#错题" class="headerlink" title="错题"></a>错题</h1><ul>
<li><p>无效Mac帧</p>
<ul>
<li>帧的长度不是整数字节</li>
<li>数据字段的长度不在46-1500字节之间</li>
<li>帧的长度不在64-1518字节之间</li>
<li>用收到的帧检验序列FCS查出有差错</li>
</ul>
</li>
<li><p>网桥从某一端口收到正确的数据帧后，在其他址转发表中查找该帧要到达的目的站，若查找不到，则会  <strong><u>向除该端口以外的所有端口转发此帧</u></strong></p>
</li>
<li><p>以太网交换机进行转发决策时使用的PDU地址是 <strong><u>目的物理地址</u></strong></p>
</li>
<li><p>关于100BASE-T以太网，错误的是：A，表示双绞线组网</p>
<p>A.T表示粗同轴电缆组网</p>
<p>B.100指的是传输速率为100Mb&#x2F;s</p>
<p>C.BASE指的是基带传输</p>
<p>D.100BASE-T是一种星形以太网</p>
</li>
<li><p>属于虚电路操作特点的是：D</p>
<p>A 每个分组携带有终点的地址信息，它的传送是自身寻址的</p>
<p>B 在整个传送过程中，不需要建立虚电路</p>
<p>C 网络节点要为每个分组做出路由选择</p>
<p>D 使所有分组按顺序到达目的系统</p>
</li>
<li><p>下面哪个协议不属于网络层？ C</p>
<p>A ARP</p>
<p>B ICMP</p>
<p>C TCP</p>
<p>D IP</p>
<p><strong>TCP&#x2F;IP 体系中网络层的协议：<strong><strong>IP 协议</strong></strong>、ARP协</strong></p>
<p><strong>议、ICMP协议、IGMP协议</strong> TCP属于传输层</p>
</li>
<li><p>点分十进制：**-A类-127-B类-191-C类-223-D类**</p>
</li>
<li><p>在因特网中，IP数据报从源结点到目的结点可能需要经过多个网络和路由器在整个传输过程中，IP数据报报头的：<strong>源地址和目的地址都不会变化</strong>，读取过程只是找到下一跳地址</p>
</li>
<li><p>IP数据报需要由源主机和中途路由器到达目的主机，通常：；<strong>源主机和中途路由器都不知道</strong>IP数据报到达目的主机需要经过的完整路径。源主机只知道默认网关是谁，中途路由器根据路由表转发给下一跳</p>
</li>
<li><p>在因特网中，路由器可连接多个物理网络，此时路由器 <strong>B</strong></p>
<p>A具有单一IP地址</p>
<p>B具有多个IP地址，每个IP地址与各相连的物理网中具有相同网络号，并占用<strong>一个主机号</strong></p>
<p>C具有多个IP地址，每个IP地址与各相连的物理网中具有相同网络号，并占用多个主机号</p>
</li>
<li><p>以下为源和目标主机的不同IP地址组合，其中()组合可以不经过路由直接寻址 B</p>
<p>A.125.2.5.3&#x2F;24和136.2.2.3&#x2F;24</p>
<p>B125.2.5.3&#x2F;16和125.2.3&#x2F;16</p>
<p>C126.2.5.3&#x2F;16和126.2.2.3&#x2F;21</p>
<p>A，24位为网络号，不同；B，16位，相同；C，126.2.2.3借前21，换成2进制发现网络号一样，但是子网掩码(网络段)是不一样的，不能选</p>
</li>
<li><p>关于无分类编址CIDR，下列说法<strong>错误</strong>的是(C)<br>ACIDR使用各种长度的“网络前缀”来代替分类地址中的网络号和子网号。</p>
<p>BCIDR将网络前缀都相同的连续的IP地址组成“CIDR”地址块。</p>
<p>C.网络前缀越短，其地址块所包含的地址数就越少</p>
<p>D使用CIDR，查找路由表时可能会得到多个匹配结果应当从匹配结果中选择具有最长网络前缀的路由。因为网络前缀越长，路由就越具体。 最长前缀匹配原则</p>
</li>
<li><p>对网际控制报文协议 (ICMP) 描述错误的是()。<br>A.ICMP封装在IP数据报的数据部分<br>B.ICMP是属于应用层的协议</p>
<p>C.ICMP是IP协议的必需的一个部分</p>
<p>D.Ping命令使用了ICMP回送请求与回送应答报文</p>
</li>
<li><p>下列前缀中的哪一个和地址152.7.77.159及15231.47.252都匹配?(D)</p>
<p>A.152.40&#x2F;13 </p>
<p>B.153.40&#x2F;9</p>
<p>C.152.64&#x2F;12<br>D.152.0&#x2F;11</p>
<p>聚合，152.7-&gt;152.00000111 </p>
<p>​          152.31-&gt;152.00011111 前三个都是0</p>
<p>因此网络号为152.00000000.0.0 后面全0，一共11为网络号，是152.0&#x2F;11</p>
</li>
<li><p>不属于路由选择协议 B</p>
<p>A RIP</p>
<p>B ICMP</p>
<p>C BGP</p>
<p>D OSPF</p>
</li>
<li><p>RIP适用小型，OSPF适用大型</p>
</li>
<li><p>某自治系统采用RIP协议，R1收到邻居R2距离向量，包含信息**&lt;net1,16&gt;**，则可以得到结论 B</p>
<p>A R2 通过 R1 到net1，跳数为17</p>
<p>B R2 不能到 net1</p>
<p>C R1 通过 R2 到net1，跳数为17</p>
<p>D R2 能到 net1，条数为16</p>
<p><strong>忘记了16跳表示不可达了</strong></p>
</li>
<li><p>下一跳路由器分别为N2、2、X，新收到从X发来的路由信息中目的网络、跳数、下跳路由器分别为N2、5、Y，则路由表D中更新后关于N2的路由信息为(C)。</p>
<p>A N2、2、X 错选</p>
<p>B N2、5、X</p>
<p>C N2、6、X <strong>注意自加1</strong></p>
<p>D N2、5、Y</p>
<p>若下一跳字段给出的路由器地址<strong>相同</strong>，则把收到的项目<strong>替换源</strong>路由表项目。</p>
<p>如果收到项目中的距离小于路由表中的距离，则进行更新</p>
</li>
<li><p>下列关于IPv6的表述中，(D) 是错误的。、</p>
<p>AIPv6的头部长度是不可变的</p>
<p>BIPv6不允许路由设备来讲行分片</p>
<p>CIPv6采用了16B的地址号，理论上不可能用完</p>
<p>DIPv6使用了头部校验和来保证传输的正确性</p>
<p>基本首部40字节，不可变；开始的mpu值就设定好了，不需要分片；IPV4有首部检验，而IPV6反而没有，取消</p>
</li>
<li><p>下面哪个地址属于专用IP地址？(C)</p>
<p>A127.0.0.1 环回地址</p>
<p>B192.32.116.22 </p>
<p>–192.168开头</p>
<p>C172.16.1.31</p>
<p>–172.16-172.31</p>
<p>D255.0.0.0</p>
</li>
<li><p>属于传输层协议的是C</p>
<p>AIP</p>
<p>网络层</p>
<p>BARP</p>
<p>网络层</p>
<p>CTCP</p>
<p>DRARP</p>
</li>
<li><p>TCP流量控制 A</p>
<p>对发送方</p>
<p>对接收方</p>
<p>对发、接双方</p>
<p>链路上任两结点间数据</p>
</li>
<li><p>一个TCP连接的数据传输阶段，如果发送端的发送窗口值由2000变为3000，意味着可以 C</p>
<p>在收到一个确认之前可发3000个TCP报文段</p>
<p>可发1000B</p>
<p>可发3000B</p>
<p>可发2000个TCP报文段</p>
</li>
<li><p>A和B之间建立了TCP连接，A向B发送了一个报文段，其中序号字段seq&#x3D;300，确认号字段ack&#x3D;101，数据部分包含7个字节，那么B在对该报文的确认报文段中seq,ack分别为(D) </p>
<p>A307,101</p>
<p>B301,108</p>
<p>C101,306</p>
<p>D101,307</p>
<p>序号就是收到的确认号，确认号为上一个序号加数据300+7&#x3D;307</p>
</li>
<li><p>在一个TCP连接中，MSS为1KB，当拥塞窗口为34KB时收到了3个元余ACK报文。如果在接下来的4个RTT内报文段传输都是成功的，那么当这些报文段均得到确认后，拥塞窗口的大小是(D)<br>A 8KB</p>
<p>B16KB</p>
<p>C27KB</p>
<p>D21KB</p>
<p>3个ACK，超时减半，然后根据4个RTT(往返时间)线性增加，34&#x2F;2+4&#x3D;21</p>
</li>
<li><p>DNS说法错误的是 A</p>
<p>A.DNS系统运行在TCP协议之上</p>
<p>对于数据小，用的少的用<strong>UDP</strong></p>
<p>B.DNS采用客户服务器工作模式</p>
<p>C.域名的命名原则是采用层次结构的命名树</p>
<p>D.域名不能反映计算机所在的物理地址</p>
<p>逻辑地址</p>
</li>
<li><p>一台主机希望解析域名<a target="_blank" rel="noopener" href="http://www.bit.edu.cn,如果这台主机配置的本地域名服务器为202.120.6688,internet根域名服务器为10.1.2.3而存储www.bit.edu.cn与其ip地址对应关系的权限域名服务器为202.110.6.8,那么这台主机解析该域名时首先查询/">www.bit.edu.cn，如果这台主机配置的本地域名服务器为202.120.6688，internet根域名服务器为10.1.2.3而存储www.bit.edu.cn与其IP地址对应关系的权限域名服务器为202.110.6.8，那么这台主机解析该域名时首先查询</a> ()。</p>
<p>A.地址为202.120.66.88的域名服务器</p>
<p>B.地址为10.1.2.3的域名服务器</p>
<p>C.地址为202.110.6.8的域名服务器</p>
<p>D.不能确定</p>
<p>主机想进行域名解析先查询本地域名服务器，如果其不知，查询根域名，再查顶级，再查权限 </p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/jC2kSc6KNIFVpHy.png" alt="image-20230609085517082.png"></p>
</li>
</ul>
<h1 id="一"><a href="#一" class="headerlink" title="一"></a>一</h1><h2 id="计网的作用"><a href="#计网的作用" class="headerlink" title="计网的作用"></a>计网的作用</h2><ul>
<li>三网融合：电信网络、有线电视网络、计算机网络</li>
<li>互联网两个重要特点：连通性、共享</li>
</ul>
<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>起源 ARPANET</p>
<h2 id="组成"><a href="#组成" class="headerlink" title="组成"></a>组成</h2><ul>
<li>边缘部分，端系统之间的通信方式：C&#x2F;S、P2P</li>
<li>核心部分，三种交换方式：电路交换、分组交换(路由器)、电报交换</li>
</ul>
<h3 id="电路交换"><a href="#电路交换" class="headerlink" title="电路交换"></a>电路交换</h3><p>1950S，电报采用基于存储转发的报文交换</p>
<p>电路交换——整个报文的比特流连续地从源点直达终点。好像在一个管道传输。</p>
<h3 id="报文交换"><a href="#报文交换" class="headerlink" title="报文交换"></a>报文交换</h3><p>报文交换——整个报文先传送到相邻节点、全部存储下来后查找转发表，转发到下一个节点。</p>
<h3 id="分组交换"><a href="#分组交换" class="headerlink" title="分组交换"></a>分组交换</h3><p>分组又称为“包”，分组交换——单个分组传送到相邻节点，存储下来后查找转发表，转发到下一个节点。</p>
<h4 id="路由器"><a href="#路由器" class="headerlink" title="路由器"></a>路由器</h4><p>注意分组的<strong>存储转发</strong>过程，在路由器分组放入缓存，查路由表，转发</p>
<p>路由器输入和输出端口没有直接连线的，而交换机有</p>
<p>路由器利用软件时间数据交换，交换机是依靠硬件，前者比后者慢</p>
<blockquote>
<p>注意路由器和交换机的区别</p>
</blockquote>
<p><strong>带来的问题：</strong></p>
<ul>
<li>要排队，会造成一定时延。（如果分组太多，造成时延太大，会直接丢掉分组）</li>
<li>必须携带首部，造成了一定的开销</li>
</ul>
<h3 id="⭐三种交换比较"><a href="#⭐三种交换比较" class="headerlink" title="⭐三种交换比较"></a>⭐三种交换比较</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/03/03/DrENTCmXzG9htiJ.png" alt="image.png"></p>
<ul>
<li><p>稳定性：电报交换传输更加稳定，报文和分组交换存在丢包可能。</p>
</li>
<li><p>传输速率：当要连续传输大量的数据，电路交换的传输速率较快。</p>
</li>
<li><p>传输效率和信道利用率：传输突发式的计算机数据时，电报交换速率由于线路被占用，且需要预先分配带宽，使得传输效率和信道利用率很低；报文交换和不需要预先分配传输带宽，且不必先占用一条端到端的通信资源，省去了开销，数据的传输效率和信道利用率更高。</p>
</li>
<li><p>例子：有线电话和IP电话</p>
<ul>
<li>IP电话成本低，计算机网络连接分组交换逐端占用，通话质量没那么高</li>
<li>有线电话稳定，通话质量高，专用链路连接，成本高</li>
</ul>
</li>
</ul>
<h2 id="计网在我国的发展"><a href="#计网在我国的发展" class="headerlink" title="计网在我国的发展"></a>计网在我国的发展</h2><p>94年被正式承认为接入互联网的国家</p>
<p>《中国互联网络发展状况统计报告》</p>
<h2 id="计算机网络的类别"><a href="#计算机网络的类别" class="headerlink" title="计算机网络的类别"></a>计算机网络的类别</h2><h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><p>地理位置不同的具有独立功能的多台计算机及其外部设备（硬件），通过通信线路连接，在网络操作系统、网络管理系统和协议等（软件）的管理和协调下，实现 资源共享和i信息传递的计算机系统</p>
<h3 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h3><ul>
<li><p><strong>从作用范围上分类</strong></p>
<ul>
<li>广域网WAN(Wide) 作用距离在几十到几千公里，是互联网核心部分。</li>
<li>域域网MAN(Metroplitan) 作用距离在5-50公里 作用范围可跨越几个街区&#x2F;整个城市。</li>
<li>局域网LAN(Local) 作用距离1公里以内，作用范围一般是一个学校、公司或工厂。</li>
<li>个人区域网PAN(Personal) 作用距离10米以内，是用无线技术将个人使用的电子设备连接起来形成的网络。</li>
</ul>
</li>
<li><p><strong>从网络的使用者上分类</strong></p>
<ul>
<li>公用网 简单理解就是大家都可以用的网络(只要交了钱)，由电信公司出资建设。</li>
<li>专用网 某个部分&#x2F;机关由于内部需要专用的网络，不对外提供服务。</li>
</ul>
</li>
</ul>
<h2 id="计算机网路的性能"><a href="#计算机网路的性能" class="headerlink" title="计算机网路的性能"></a>计算机网路的性能</h2><h3 id="性能指标"><a href="#性能指标" class="headerlink" title="性能指标"></a>性能指标</h3><p><strong>比特</strong> 一个比特就是二进制数字中的0或1</p>
<p><strong>带宽</strong> </p>
<p>本来是指信号具有的频带宽度</p>
<p>在计网中表示<strong>在单位时间内网络中的某通道所能通过的“最高数据率”</strong>。单位是bit&#x2F;s，即比特每秒</p>
<p>在时间轴上的<strong>信号的宽度</strong>随带宽的增大而变窄，频率增大</p>
<p><strong>吞吐量</strong></p>
<p>在单位时间内通过某网络（或信道、接口）的数据量</p>
<p><strong>时延</strong></p>
<p>数据从网络的一端传送到另一端所需的时间，有时也称位延迟或迟延。</p>
<p>由四部分组成，发送时延、传播时延、处理时延、排队时延</p>
<p>发送时延：<br>$$<br>发送时延&#x3D;\frac{数据帧长度(bit)}{发送速率(bit&#x2F;s)}<br>$$<br>传播时延：<br>$$<br>传播时延&#x3D;\frac{信道长度(m)}{电磁波在信道上的传播速率(m&#x2F;s)}<br>$$<br>处理时延</p>
<p>排队时延<br>$$<br>总时延&#x3D;发送时延+传播时延+处理时延+排队时延<br>$$</p>
<p>总时延</p>
<p>发10个分组的用时：每个分组的发送时延之和+最后一个分组的传播时延和处理时延</p>
<p><strong>时延带宽积</strong><br>$$<br>时延带宽积&#x3D;传播时延×带宽<br>$$<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/03/03/OW31DC2Ge4h6YFp.png" alt="image.png"></p>
<p><strong>往返时间RTT</strong></p>
<p>$$<br>发送时间&#x3D;\frac{数据长度}{发送速率}<br>$$</p>
<p>$$<br>有效数据率&#x3D;\frac{数据长度}{发送时间+RTT}<br>$$</p>
<p><strong>利用率</strong></p>
<p>利用率越大，时延增加</p>
<h3 id="非性能特征"><a href="#非性能特征" class="headerlink" title="非性能特征"></a>非性能特征</h3><p><strong>费用</strong></p>
<p><strong>质量</strong></p>
<p><strong>标准化</strong></p>
<p><strong>可靠性</strong></p>
<p><strong>可拓展性和升级性</strong></p>
<p><strong>易于管理和维护</strong></p>
<h2 id="计算机网络的体系结构"><a href="#计算机网络的体系结构" class="headerlink" title="计算机网络的体系结构"></a>计算机网络的体系结构</h2><h3 id="体系结构的形成"><a href="#体系结构的形成" class="headerlink" title="体系结构的形成"></a>体系结构的形成</h3><ul>
<li><p>为什么分层？分层次结构有很多好处，比如：</p>
<ul>
<li>能够使各层之间独立，问题的复杂度变小了；</li>
<li>灵活性好，各层互不影响；</li>
<li>结构上可分割，各层都采用最合适的技术来实现；</li>
<li>易于实现和维护；</li>
<li>能促进标准化工作，每一次的功能都很明确。</li>
<li>比如我们学生组织分为几个部门，有些部门负责统筹组织，有些部门负责整合资料，有些部门负责宣传推广，分层次地把一个大的项目和任务实施解决。</li>
</ul>
</li>
<li><p>缺点</p>
<ul>
<li>麻烦</li>
</ul>
</li>
<li><p>各层完成的主要功能</p>
<ul>
<li>差错控制</li>
<li>流量控制</li>
<li>分段和重装</li>
<li>复用和分用</li>
<li>连接建立和释放</li>
</ul>
</li>
</ul>
<h3 id="协议与划分层次"><a href="#协议与划分层次" class="headerlink" title="协议与划分层次"></a>协议与划分层次</h3><ul>
<li>网络协议三个要素<ul>
<li>语法，即数据与控制信息的结构或格式</li>
<li>语义，即需要发出何种控制信息，完成何种动作以及做出何种响应；</li>
<li>同步，即事件实现顺序的说明。</li>
</ul>
</li>
</ul>
<h4 id="三种分层概念"><a href="#三种分层概念" class="headerlink" title="三种分层概念"></a>三种分层概念</h4><p>具有五层协议的体系结构</p>
<p>OSI的七层协议</p>
<p>TCP&#x2F;IP的四层体系结构</p>
<h4 id="五层协议"><a href="#五层协议" class="headerlink" title="五层协议"></a>五层协议</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/03/03/Zs3TeWgtJKkHYoL.png" alt="image.png"></p>
<ul>
<li><p>应用层 处理不同应用</p>
<ul>
<li>应用层是体系结构的最高处。任务是通过应用进程间的交互来完成特定网络应用。应用层协议定义的是应用进程间通信和交互的规则。</li>
</ul>
</li>
<li><p>运输层 运输</p>
<ul>
<li>运输层的任务就是负责向两台主机中进程之间的通信提供通用的数据传输服务。应用进程利用该服务传送应用层报文。主要使用传输控制协议TCP和用户数据报协议UDP。流量控制</li>
</ul>
</li>
<li><p>网络层 路由，找路线</p>
<ul>
<li>网络层负责为<strong>分组</strong>交换网上的不同主机提供通信服务，将用户数据封装成IP数据报，主要功能是路由。</li>
</ul>
</li>
<li><p>数据链路层 封装，拆分成<strong>帧</strong></p>
<ul>
<li>将数据报组装成帧，包括了数据和必要的控制信息，是链路上传输数据的协议。</li>
</ul>
</li>
<li><p>物理层 接口有关</p>
<ul>
<li>物理层上传输数据的单位是<strong>比特</strong>，需要考虑传输的编码方式和硬件条件。</li>
</ul>
</li>
</ul>
<h4 id="协议与服务有何区别？有何关系？"><a href="#协议与服务有何区别？有何关系？" class="headerlink" title="协议与服务有何区别？有何关系？"></a>协议与服务有何区别？有何关系？</h4><p>协议是水平的，服务是垂直的。在协议的控制下，两个对等实体间的通信使得本层能够向上一层提供服务。要实现本层协议，还需要使用下面一层所提供的服务。只有那些能被高一层实体“看得见”的功能才能称之为“服务”。</p>
<h2 id="一些名词"><a href="#一些名词" class="headerlink" title="一些名词"></a>一些名词</h2><ul>
<li><p>协议栈：协议栈是指由<strong>多个协议层组成</strong>的一种网络通信协议体系结构。每一层协议都负责特定的功能，例如物理层、数据链路层、网络层、传输层、应用层等。协议栈中的每一层都通过接口与上下层交换信息，并对其上层提供服务。</p>
</li>
<li><p>实体：实体是指一个网络节点上的一个网络通信实体，它可以是硬件设备、软件程序、网络服务器等。实体在网络中通过地址进行标识，通常使用IP地址或MAC地址。</p>
</li>
<li><p>对等层：对等层是指在协议栈中相互配对的<strong>同级协议层</strong>。在对等层之间，通信双方具有相同的角色和功能，并且它们通过接口进行通信。</p>
</li>
<li><p>协议数据单元：协议数据单元是在网络通信中，不同层之间传递信息的<strong>基本单元</strong>。在不同层之间，PDU的命名和格式可能不同。</p>
</li>
<li><p>服务访问点：服务访问点是指在同一层协议中，<strong>对上下层提供服务的接口</strong>。每个SAP都有一个唯一的标识符，用于标识服务提供者和服务请求者之间的通信关系。</p>
</li>
<li><p>客户（Client）：客户指的是通过网络<strong>请求服务</strong>的设备或应用程序。在客户-服务器模型中，客户向服务器发出请求，等待服务器响应并接收数据。</p>
</li>
<li><p>服务器（Server）：服务器指的是<strong>提供服务</strong>的设备或应用程序。在客户-服务器模型中，服务器接收客户端请求，处理请求并向客户端发送响应数据。</p>
</li>
<li><p>客户-服务器方式（Client-Server）：客户-服务器方式是一种网络通信模型，其中客户端设备或应用程序通过网络向服务器发出请求，等待服务器响应并接收数据。服务器接收客户端请求，处理请求并向客户端发送响应数据。这种模型在分布式计算和Web服务中广泛使用</p>
</li>
</ul>
<h1 id="二-物理层"><a href="#二-物理层" class="headerlink" title="二 物理层"></a>二 物理层</h1><p>数据通信的基础知识：奈氏准则、香农定理</p>
<p>传输媒体：导引型，非导引型</p>
<p>信道复用：频分、时分、波分、码分</p>
<h2 id="主要任务"><a href="#主要任务" class="headerlink" title="主要任务"></a>主要任务</h2><p>解决与接口有关的任务，包括：</p>
<ul>
<li>机械特性</li>
<li>电气特性</li>
<li>功能特性</li>
<li>过程特性</li>
</ul>
<p>数据在计算机内部是并行传输，在通信线路上是串行传输</p>
<h2 id="数据通信"><a href="#数据通信" class="headerlink" title="数据通信"></a>数据通信</h2><h3 id="模型"><a href="#模型" class="headerlink" title="模型"></a>模型</h3><p>通信系统分为：</p>
<ul>
<li>源系统</li>
<li>传输系统</li>
<li>目的系统</li>
</ul>
<h3 id="信道"><a href="#信道" class="headerlink" title="信道"></a>信道</h3><ul>
<li>单工通信</li>
<li>半双工通信</li>
<li>全双工通信</li>
</ul>
<p>来自信号源的信号称为基带信号（基本频带信号）</p>
<p>解决通信问题需要对基带信号进行调制。</p>
<ul>
<li>基带调制 变换后还是基带信号</li>
<li>带通调制 使用载波</li>
</ul>
<h4 id="常见编码方式"><a href="#常见编码方式" class="headerlink" title="常见编码方式"></a>常见编码方式</h4><ul>
<li>不归零制</li>
<li>归零制</li>
<li>曼彻斯特编码</li>
<li>差分曼彻斯特编码</li>
</ul>
<h4 id="基本的带通调制方法"><a href="#基本的带通调制方法" class="headerlink" title="基本的带通调制方法"></a>基本的带通调制方法</h4><ul>
<li>调幅</li>
<li>调频</li>
<li>调相</li>
</ul>
<p>正交振幅调制</p>
<h3 id="⭐信道的极限容量"><a href="#⭐信道的极限容量" class="headerlink" title="⭐信道的极限容量"></a>⭐信道的极限容量</h3><p><strong>奈氏准则</strong></p>
<p>单位波特率，码元传输最高速率是带宽的两倍，2W（码元&#x2F;秒）</p>
<p>比特率&#x3D;波特率×log<sub>2</sub>N</p>
<p><strong>信噪比</strong><br>$$<br>信噪比(dB)&#x3D;10log(S&#x2F;N)<br>$$<br><strong>香农定理</strong><br>$$<br>C&#x3D;Wlog2(1+S&#x2F;N)<br>$$</p>
<h2 id="传输媒体"><a href="#传输媒体" class="headerlink" title="传输媒体"></a>传输媒体</h2><p>传输媒体分为</p>
<ul>
<li>导引型 （有线）</li>
<li>非导引型 （无线）</li>
</ul>
<h3 id="导引型"><a href="#导引型" class="headerlink" title="导引型"></a>导引型</h3><h4 id="双绞线"><a href="#双绞线" class="headerlink" title="双绞线"></a>双绞线</h4><p>无屏蔽双绞线UTP</p>
<p>非屏蔽双绞线STP PVC套层与带绝缘层的铜线之间有一层<strong>铝箔屏蔽层</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/03/17/aSLOkYfym89niju.png" alt="image.png"></p>
<ul>
<li><p>导线相互缠绕可降低电磁干扰</p>
<ul>
<li>同向的导线，磁场抵消，消除导线之间的串扰</li>
<li>差值法避免了噪声干扰</li>
</ul>
</li>
<li><p>八个脚位</p>
<ul>
<li>1、2发送数据正&#x2F;负极，3、6接收数据正&#x2F;负极</li>
<li>交换机内部做了翻转，1、2收，3、6发</li>
<li>主机和路由也用交叉</li>
<li>RJ45：接头+水晶头</li>
</ul>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/03/17/UqPMRhs2jIaXor1.png" alt="image.png"></p>
<h4 id="同轴电缆"><a href="#同轴电缆" class="headerlink" title="同轴电缆"></a>同轴电缆</h4><h4 id="光缆"><a href="#光缆" class="headerlink" title="光缆"></a>光缆</h4><p>光纤做成结实的光缆</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/03/17/WucFAkwlrvIS2Ee.png" alt="image.png"></p>
<p>光线入射角足够大就会出现全发射，即光线碰到包层时就会折射会纤芯</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/03/17/ox4bszGPlFfDTjN.png" alt="image.png"></p>
<table>
<thead>
<tr>
<th></th>
<th>纤芯直径</th>
<th>光源</th>
<th>传输速率</th>
<th>应用</th>
</tr>
</thead>
<tbody><tr>
<td>多模光纤</td>
<td>较大，同时传输多条光线</td>
<td>发光二极管</td>
<td>低、性能差</td>
<td>局域网</td>
</tr>
<tr>
<td>单模光纤</td>
<td>较小，一次传输一条光线</td>
<td>激光</td>
<td>高</td>
<td>楼间、广域网</td>
</tr>
</tbody></table>
<p>多模光线传输速率低、性能差但是成本低，一般用于局域网</p>
<p>单模光纤通常用于楼间连接或广域网连接</p>
<p><strong>光纤优点</strong></p>
<ul>
<li>通信容量非常大</li>
<li>传输损耗小，中继距离长</li>
<li>抗雷电和电磁干扰性能好</li>
<li>无串音干扰，保密性好</li>
<li>体积小，重量轻</li>
</ul>
<p>缺点</p>
<ul>
<li>成本</li>
<li>脆弱</li>
</ul>
<h3 id="非导引型"><a href="#非导引型" class="headerlink" title="非导引型"></a>非导引型</h3><p>波长越长、频率越小</p>
<h4 id="短波通信"><a href="#短波通信" class="headerlink" title="短波通信"></a>短波通信</h4><p>主要靠电离层的反射，会产生多经效应</p>
<p>一次反射可传输4000km，一般用于军事通讯</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/03/17/1y3rlwizaoNBZ9b.png" alt="image.png"></p>
<h4 id="微波通信"><a href="#微波通信" class="headerlink" title="微波通信"></a>微波通信</h4><p>频谱范围：300MHz-300GHz</p>
<p>特性：在空间主要是直线传播，难以传过建筑物</p>
<p>两种方式：地面微波中继通信、卫星通信</p>
<h2 id="⭐信道复用技术"><a href="#⭐信道复用技术" class="headerlink" title="⭐信道复用技术"></a>⭐信道复用技术</h2><p><strong>复用</strong>技术允许共享信道进行通信，降低成本，提高利用率</p>
<h3 id="频分复用、时分复用和统计时分复用"><a href="#频分复用、时分复用和统计时分复用" class="headerlink" title="频分复用、时分复用和统计时分复用"></a>频分复用、时分复用和统计时分复用</h3><h4 id="频分复用"><a href="#频分复用" class="headerlink" title="频分复用"></a>频分复用</h4><p>在同样时间占用不同的带宽(频率带宽)资源.例子：同时听到猫叫和狗叫，可以区分，因为频率不同</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/03/17/JxbA7GnuCjvYkrz.png" alt="image.png"></p>
<h4 id="时分复用"><a href="#时分复用" class="headerlink" title="时分复用"></a>时分复用</h4><p>所有用户在不同的时间占用同样的频带宽度</p>
<p>是将时间划分为一段段等长的时分复用帧 （TDM 帧）。每一个时分复用的用户在每一个 TDM  帧中占用固定序号的时隙。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/03/17/dCZ5YxwuXRANGcp.png" alt="image.png"></p>
<h4 id="波分复用"><a href="#波分复用" class="headerlink" title="波分复用"></a>波分复用</h4><p>波分复用就是光的频分复用。使用一根 光纤来同时传输多个光载波信号。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/03/17/16PUFdW9Ty2QSLY.png" alt="image.png"></p>
<h4 id="⭐码分复用CDMA"><a href="#⭐码分复用CDMA" class="headerlink" title="⭐码分复用CDMA"></a>⭐码分复用CDMA</h4><ul>
<li>码分复用 CDMA</li>
<li>特殊挑选不同码型，因此彼此不会相互干扰</li>
<li>有较强的抗干扰能力，其频谱类似于白噪声，不易被敌人发现</li>
<li>应用：第三代数字移动通信系统（3G)</li>
</ul>
<h5 id="码片序列"><a href="#码片序列" class="headerlink" title="码片序列"></a>码片序列</h5><p>每一个比特时间划分为 m 个短的间隔，称为码片 (chip)。</p>
<p>◼ 每个站被指派一个唯一的 m bit 码片序列。 </p>
<p>​    ◼ 如发送比特 1，则发送自己的 m bit 码片序列。</p>
<p>​    ◼ 如发送比特 0，则发送该码片序列的二进制反码。</p>
<p>◼ 例如，S 站的 8 bit 码片序列是 00011011。 </p>
<p>​     ◼ 发送比特 1 时，就发送序列 00011011， </p>
<p>​     ◼ 发送比特 0 时，就发送序列 11100100。 </p>
<p>◼ S 站的码片序列：(–1 –1 –1 +1 +1 –1 +1 +1) ，-1表示0</p>
<p><strong>两个不同站的码片序列正交</strong>，因此有规格化内积为0：<br>$$<br>S\cdot T&#x3D;\frac{1}{m}\sum_{i&#x3D;1}^m{S_iT_i&#x3D;0}<br>$$<br>和别人为0，和自己为1，和反码为-1</p>
<h5 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h5><p>接收信号的时候接收到不止一个站发送的信号，比如此时我想要接收S站的信息，假设收到的是<br>$$<br>(S+T)<br>$$<br>此时用S的码片序列去做规格化内积：<br>$$<br>S·(S+T)&#x3D;S·S+S·T<br>$$<br>此时S·T得到的结果是0，所以最终规格化内积后可得结果为：<br>$$<br>S·S<br>$$<br><strong>将它除以码片序列的长度，结果为1时说明发了1，结果为-1时说明发了0</strong></p>
<ul>
<li>共有四个站进行码分多址CDMA通信。四个站的码片序列为:</li>
</ul>
<p>A: (-1 -1 -1 +1 +1 -1 +1 +1)  B: (-1 -1 +1 -1 +1 +1 +1 -1)</p>
<p>C: (-1 +1 -1 +1 +1 +1 -1 -1)  D: (-1 +1 -1 -1 -1 -1 +1 -1)</p>
<p>现收到这样的码片序列：(-1 +1 -3 +1 -1 -3 +1 +1)。问哪个站发送了数据？发送数据的站发送的是1还是0？<br>$$<br>A站：\left( -1-1-1+1+1-1+1+1 \right) \cdot \left( -1+1-3+1-1-3+1+1 \right) &#x2F;8&#x3D;1<br>$$</p>
<p>$$<br>B站：\left( -1-1+1-1+1+1+1-1 \right) \cdot \left( -1+1-3+1-1-3+1+1 \right) &#x2F;8&#x3D;-1<br>$$</p>
<p>$$<br>C站：\left( -1+1-1+1+1+1-1-1 \right) \cdot \left( -1+1-3+1-1-3+1+1 \right) &#x2F;8&#x3D;0<br>$$</p>
<p>$$<br>D站：\left( -1+1-1-1-1-1+1-1 \right) \cdot \left( -1+1-3+1-1-3+1+1 \right) &#x2F;8&#x3D;1<br>$$</p>
<p>A、D站发送的是1，B结果为-1发送的是0，而C站没有发送数据</p>
<h2 id="例题"><a href="#例题" class="headerlink" title="例题"></a>例题</h2><p>模拟信道的信号功率为0.62W，噪声功率为0.02W，传输频率为3.5-3.9MHz，问最大传输速率？</p>
<p>有噪声，利用香农公式，其实频带W&#x3D;(3.9-3.5)M（带宽：信号具有的频带宽度）</p>
<h2 id="数字传输系统"><a href="#数字传输系统" class="headerlink" title="数字传输系统"></a>数字传输系统</h2><p>脉码调制 PCM般包括三个过程：采样、量化和编码。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/03/24/mgIk9MnStpUqer1.png" alt="image.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/03/24/DxqXcyfIb5uVpGR.png" alt="image.png"></p>
<h3 id="同步光纤网SONET"><a href="#同步光纤网SONET" class="headerlink" title="同步光纤网SONET"></a>同步光纤网SONET</h3><p>1988美国提出一个数字传输标准，叫做同步光纤网SONET</p>
<h3 id="同步数字序列SDH"><a href="#同步数字序列SDH" class="headerlink" title="同步数字序列SDH"></a>同步数字序列SDH</h3><p>SDH相当于SONET的同义词，标准近似</p>
<blockquote>
<p>首次实现了数字传输体制上的世界性标准</p>
</blockquote>
<h2 id="宽带接入技术"><a href="#宽带接入技术" class="headerlink" title="宽带接入技术"></a>宽带接入技术</h2><p>用户要连接到互联网，必须先连接到某个ISP</p>
<p>初期用户利用电话的用户线通过调制解调器连接到ISP，最高速率56kbit&#x2F;s</p>
<p>美国联邦通信委员会FCC认为只要<strong>双向速率和超过200kbit&#x2F;s就是宽带</strong></p>
<h3 id="ADSL技术"><a href="#ADSL技术" class="headerlink" title="ADSL技术"></a>ADSL技术</h3><p>ADSL非对称数字用户线，上行与下行速率不同。</p>
<ul>
<li>特点<ul>
<li>下行速率远大于上下</li>
<li>采用非对称传输的原因：在网络应用中，用户 的下载数据量要远大于上传的数据量</li>
<li>ADSL 在用户线（铜线）的两端各安装一个 ADSL 调制解调器。 </li>
<li>我国目前采用的方案是离散多音调(频率) DMT  (Discrete Multi-Tone)调制技术。</li>
<li>打电话、上网、上传、下载、多用户，都不互相影响</li>
</ul>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/03/24/LCHX7O9IsjEhaPF.png" alt="image.png"></p>
<h3 id="光纤同轴混合网（HFC网）"><a href="#光纤同轴混合网（HFC网）" class="headerlink" title="光纤同轴混合网（HFC网）"></a>光纤同轴混合网（HFC网）</h3><p>HFC 网对 CATV 网进行了改造。HFC 网将原 CATV 网中的同轴电缆<strong>主干部分改换为光纤</strong>，并使用模拟光纤技术。</p>
<h3 id="FTTx技术"><a href="#FTTx技术" class="headerlink" title="FTTx技术"></a>FTTx技术</h3><p>代表多种宽带光纤接入方式</p>
<h1 id="🖼图床至此为止"><a href="#🖼图床至此为止" class="headerlink" title="🖼图床至此为止"></a>🖼图床至此为止</h1><h1 id="三-数据链路层"><a href="#三-数据链路层" class="headerlink" title="三 数据链路层"></a>三 数据链路层</h1><ul>
<li>数据链路的主要功能</li>
<li><strong>数据链路层协议的三个基本问题</strong></li>
<li>数据链路使用的信道类型</li>
<li>PPP协议的特点、帧格式、工作状态</li>
<li>局域网拓扑结构</li>
<li><strong>CSMA&#x2F;CD 协议</strong></li>
<li><strong>以太网V2的MAC帧地址</strong></li>
<li>如何实现在物理层、<strong>数据链路层扩展以太网</strong></li>
<li><strong>集线器、交换机的特点与区别</strong></li>
<li><strong>交换机的工作原理</strong></li>
<li>生成树协议的作用、工作原理</li>
<li>VLAN的作用和特点</li>
<li>以太网的演进</li>
</ul>
<h2 id="数据链路和帧"><a href="#数据链路和帧" class="headerlink" title="数据链路和帧"></a>数据链路和帧</h2><p>链路是一条无源的点到点的物理线路段，中间没有任何其他的交换结点</p>
<p>不同的链路层可能采用不同的数据链路层协议：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/gCY8GSp1TUHLkcf.png" alt="image-20230324105441524.png"></p>
<h3 id="三个基本问题"><a href="#三个基本问题" class="headerlink" title="三个基本问题"></a>三个基本问题</h3><ul>
<li>封装成帧</li>
<li>透明传输</li>
<li>差错控制</li>
</ul>
<h4 id="封装成帧"><a href="#封装成帧" class="headerlink" title="封装成帧"></a>封装成帧</h4><p>首部和尾部进行帧定界</p>
<h4 id="透明传输"><a href="#透明传输" class="headerlink" title="透明传输"></a>透明传输</h4><p>透明：实际存在但是又摸不到看不着，这里是相对上层来说透明</p>
<p>任何一个二层协议都要解决透明传输问题</p>
<p>控制字符在数据出现会导致帧定界出错！</p>
<p>解决方法：<strong>字节填充</strong></p>
<p>如果数据中有控制字符，那么在控制字符前进行字节填充</p>
<h4 id="差错控制"><a href="#差错控制" class="headerlink" title="差错控制"></a>差错控制</h4><p>传输过程中可能会产生比特差错：1 可能会变 成 0 而 0 也可能变成 1。</p>
<p>传输错误的比特占所传输比特 总数的比率称为<strong>误码率 BER</strong></p>
<p>误码率与信噪比有很大的关系。</p>
<p>为了保证数据传输的可靠性，在计算机网络传输数据时，必须采用各种差错检测措施。</p>
<ul>
<li>广泛使用循环冗余检验CRC的检测方法：</li>
</ul>
<p>假设待传送的一组数据 M &#x3D; 101001（现在 k &#x3D;  6)。我们在 M 的后面再添加供差错检测用的 n 位冗余码一起发送</p>
<p><strong>二进制模2运算</strong>：进行2^n乘M的运算，相当于在M后面<strong>添加n个0</strong></p>
<ul>
<li><p>冗余码计算举例</p>
<p>现在 k &#x3D; 6, M &#x3D; 101001。  设 n &#x3D; 3, 除数 P &#x3D; 1101，  被除数是 2^nM &#x3D; 101001000。  模 2 运算的结果是：商 Q &#x3D; 110101， 余数 R &#x3D; 001。  把余数 R 作为冗余码添加在数据 M 的后面发送出去。 发送的数据是：2^nM+R，即101001001，共(k+n)位</p>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/97askT6t3A4DQIR.png" alt="image-20230331091534750.png"></p>
<p>余数001作为FCS</p>
<p><strong>任意一个比特出错都能查出来</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/hlMjO5bPqY1Cnpv.png" alt="image-20230331090019952.png"></p>
<p>P&#x3D;1<em>X^3+1</em>X^2+0*X+1，表示1101</p>
<ul>
<li><p>检验</p>
<p>若得出余数R&#x3D;0，则判断这个帧没有差错，就接收</p>
<p>若余数R≠0，则有差错，丢弃</p>
</li>
<li><p>这种方法并不能确定究竟是哪一个或哪几个比特出现了差错，只要经过严格的挑选，并使用位数足够多的除数P，则检测不出差错的概率将很小</p>
</li>
</ul>
<blockquote>
<p>仅用循环冗余检验 CRC 差错检测技术只能做到无差错 接受 (accept)。也就是说：“凡是接收端数据链路层接受的帧都没有 传输差错”（有差错的帧就丢弃而不接受）</p>
</blockquote>
<p>要做到<strong>“可靠传输”</strong>（即发送什么就收到什么）就必 须再加上<strong>确认</strong>和<strong>重传</strong>机制。</p>
<ul>
<li>奇偶校验这能检测出奇数个位出错，偶数位出错查不出来</li>
</ul>
<p><strong>练习：</strong>要发送的数据是101110，采用CRC的生成多项 式是P(X)&#x3D;X^3+1。试求应添加在数据后面的余数。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/97askT6t3A4DQIR.png" alt="image-20230331091534750.png"></p>
<blockquote>
<p>不借位，注意补零，算错两次了</p>
</blockquote>
<h2 id="3-2点对点协议PPP"><a href="#3-2点对点协议PPP" class="headerlink" title="3.2点对点协议PPP"></a>3.2点对点协议PPP</h2><p>特点、组成、工作状态、帧格式、透明传输</p>
<p>Point-to-Point</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/J8jOKrzomaVL7bx.png" alt="image-20230331095445730.png"></p>
<h3 id="3-2-2PPP-协议的帧格式"><a href="#3-2-2PPP-协议的帧格式" class="headerlink" title="3.2.2PPP 协议的帧格式"></a>3.2.2PPP 协议的帧格式</h3><ul>
<li><p>PPP 帧的首部和尾部分别为 4 个字段和 2 个字段。</p>
</li>
<li><p>标志字段 F &#x3D; 0x7E （符号“0x”表示后面的字符是用 十六进制表示。十六进制的 7E 的二进制表示是 01111110）。 </p>
</li>
<li><p>地址字段 A 只置为 0xFF。地址字段实际上并不起作用。 </p>
</li>
<li><p>控制字段 C 通常置为 0x03。 </p>
</li>
<li><p>PPP 是面向字节的，所有的 PPP 帧的长度都是整数字节</p>
</li>
</ul>
<h4 id="透明传输问题"><a href="#透明传输问题" class="headerlink" title="透明传输问题"></a>透明传输问题</h4><p>字符填充</p>
<p>零比特填充</p>
<p>在PPP协议中，为了解决传输中出现的数据丢失或者错误，采用了同步传输技术，并在数据帧中使用了零比特填充（Zero-bit stuffing）的方法。具体地，当数据帧中出现连续的五个1时，在第六个1之后自动插入一个零，以避免在传输过程中与控制帧的标识字段发生混淆。</p>
<h2 id="3-3使用广播信道的数据链路层"><a href="#3-3使用广播信道的数据链路层" class="headerlink" title="3.3使用广播信道的数据链路层"></a>3.3使用广播信道的数据链路层</h2><ul>
<li><p>以太网的两个标准</p>
<ul>
<li>DIX Ethernet V2</li>
<li>IEEE 802.3<ul>
<li>逻辑链路控制 <strong>LLC</strong>子层</li>
<li>媒体接入控制 <strong>MAC</strong>子层</li>
</ul>
</li>
</ul>
<blockquote>
<p>由于TCP&#x2F;IP经常试验DIX Ethernet V2，LLC作用不大，很少有了</p>
</blockquote>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/BZmRXpDM4W6lTYt.png" alt="image-20230331103324404.png"></p>
<ul>
<li>适配器作用<ul>
<li>网络接口板又称为通信适配器 (adapter) 或网络 接口卡 NIC (Network Interface Card)，或“网 卡”。</li>
<li>重要功能<ul>
<li>进行串行&#x2F;并行转换</li>
<li>对数据进行缓存</li>
<li>在计算机的操作系统安装设备驱动程序</li>
<li>实现以太网协议</li>
</ul>
</li>
</ul>
</li>
<li>以太网采取了两种重要的措施，为了通信方便<ul>
<li>采用较为灵活的无连接的工作方式</li>
<li>以太网发送的数据都使用曼彻斯特 (Manchester) 编码</li>
</ul>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/NOYJ7twhGP8p4EW.png" alt="image-20230331103533420.png"></p>
<p><strong>媒体共享技术</strong>：</p>
<ul>
<li>动态媒体接入控制（多点接入）<ul>
<li>随机接入方式：争用，可能会起冲突</li>
<li>受控接入方式，每一个站点轮流拿令牌，把信息加载令牌后</li>
</ul>
</li>
<li>动态分配的特点<ul>
<li>信息是开放的</li>
<li>没有预分配</li>
</ul>
</li>
</ul>
<blockquote>
<p>通过多点接入协议动态分配信道资源，提高信道利用率。</p>
<p>常用的还是随机接入</p>
</blockquote>
<ul>
<li>典型的随机接入协议<ul>
<li>ALOHA协议：想发就发</li>
<li>CSMA协议：先听后发</li>
<li><strong>CSMA&#x2F;CD协议</strong>：<strong>先听后发、边发边听</strong></li>
</ul>
</li>
</ul>
<h4 id="CSMA-x2F-CD协议"><a href="#CSMA-x2F-CD协议" class="headerlink" title="CSMA&#x2F;CD协议"></a><strong>CSMA&#x2F;CD协议</strong></h4><p>“多点接入”表示许多计算机以多点接入的方式连接 在一根总线上。</p>
<p>“碰撞检测”就是计算机边发送数据边检测信道上的信 号电压大小。</p>
<p>“载波监听”是指每一个站在发送数据之前先要检测 一下总线上是否有其他计算机在发送数据，如果有， 则暂时不要发送数据，以免发生碰撞</p>
<h5 id="争用期"><a href="#争用期" class="headerlink" title="争用期"></a>争用期</h5><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/E6YGCdueqO1WrKv.png" alt="image-20230331110122116.png"></p>
<p>最迟检测时间就是A到B的<strong>往返时延</strong>$2τ$。过了$2τ$说明就可以了，没有冲突。因此$2τ$称为征用期。</p>
<p>对于10Mbit&#x2F;s以太网，在争用期内可发送10Mbit&#x2F;s&#x2F;*51.2*10^-6&#x3D;64B，因此以太网最短的帧为64B。</p>
<p>如果发生冲突，就一定是在发送的前 64 字节之 内。由于一检测到冲突就立即中止发送，这时已经 发送出去的数据一定小于 64 字节。以太网规定了最短有效帧长为 64 字节，凡长度 小于 64 字节的帧都是由于冲突而异常中止的无 效帧。</p>
<h5 id="二进制指数类型退避算法"><a href="#二进制指数类型退避算法" class="headerlink" title="二进制指数类型退避算法"></a>二进制指数类型退避算法</h5><ul>
<li><p>发生碰撞的站在停止发送数据后，要推迟（退避）一 个<strong>随机时间</strong>才能再发送数据。说话有冲突，双方都等一下再说，等多久呢</p>
</li>
<li><p>从整数集合[0,1,…,(2<sup>k</sup>-1)]中<strong>随机取一个数</strong>，记为r。重传所需的时延就是r倍基本退避时间</p>
</li>
<li><p>比如k&#x3D;1，集合就是[0,1]，随机到0，那么冲突之后不等待，直接重传</p>
</li>
<li><p>当k≤10时，参数k等于重传次数</p>
</li>
<li><p>当重传达16次仍不成功则丢弃帧，并向高层报告</p>
</li>
</ul>
<h5 id="要点"><a href="#要点" class="headerlink" title="要点"></a>要点</h5><ol>
<li>准备发送。</li>
<li>检测信道。忙则等待，若检测到信道空闲，并在96比特时间内信道保存空闲（保证了帧间最小间隔），就发送这个帧。</li>
<li>检测碰撞<ol>
<li>发送成功：未检测到碰撞，发送完毕，回到准备发送</li>
<li>发送失败：检测到碰撞，立即停止，发送人为干扰信号，然后执行指数退避算法，等待r倍512比特时间后，回到检测信道步骤。若重传16次仍不成功，停止重传向上报错。</li>
</ol>
</li>
</ol>
<h3 id="使用集线器的星形拓扑"><a href="#使用集线器的星形拓扑" class="headerlink" title="使用集线器的星形拓扑"></a>使用集线器的星形拓扑</h3><p>1990年 IEEE 制定出星形以太网 10BASE-T 的 标准 802.3i。</p>
<p><strong>10BAST-T</strong>,110BASE-T 中的“10”表示信号在电缆上的传输速率为 10Mbit&#x2F;s ，“BASE” 表示电缆上的信号是基带信号，“T” 代表双绞线星形网，奠定了以太网在局域网的统治地位，既降低了成本，又提高了可靠性，具有很高的性价比</p>
<p>从此以太网的总线型变为星形网络。</p>
<h4 id="参数α与利用率"><a href="#参数α与利用率" class="headerlink" title="参数α与利用率"></a>参数α与利用率</h4><p>在以太网中定义了参数 α，它是以太网单程端到 端时延  与帧的发送时间 T0 之比：α&#x3D;$τ$&#x2F;T<sub>0</sub><br>$$<br>Smax&#x3D;\frac{T0}{T0+τ}&#x3D;\frac{1}{1+α}<br>$$</p>
<ul>
<li>集线器工作在物理层MAC，所有接收的数据都发出去。 </li>
<li>使用集线器的以太网在逻辑上仍是一个总线网， 工作站使用CSMA&#x2F;CD 协议共享逻辑上的总线。 </li>
<li>使用集线器的以太网<strong>利用率很低</strong>。</li>
</ul>
<h3 id="以太网的MAC层"><a href="#以太网的MAC层" class="headerlink" title="以太网的MAC层"></a>以太网的MAC层</h3><h4 id="MAC层硬件地址"><a href="#MAC层硬件地址" class="headerlink" title="MAC层硬件地址"></a>MAC层硬件地址</h4><p>硬件地址又称为物理地址，或 MAC 地址。6个字节，48位</p>
<p>表示的是某个端口的地址。</p>
<h4 id="适配器检查MAC地址"><a href="#适配器检查MAC地址" class="headerlink" title="适配器检查MAC地址"></a>适配器检查MAC地址</h4><p>发往本站的帧，包括以下三种帧</p>
<ul>
<li>单播帧（一对一）</li>
<li>广播帧（一对全体）</li>
<li>多播帧（一对多）</li>
</ul>
<p>混杂方式工作只要“听到”有帧在以太网上传输都接收下来。</p>
<p>帧头：目的地址、源地址、类型（协议）</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2024/05/29/ncDAmjobgyeHtU8.png" alt="image.png"></p>
<p>加上前后帧，就是64-1518</p>
<p>在帧前面插入的8字节，第一个字段共7个字节，是前同步码，用来迅速实现MAC帧的比特同步。第二个字段1个字节是帧开始定界符，表示后面的信息就是MAC帧</p>
<p>7相当于1，2，1，1，2，1的准备指令，最后的1就是齐步走的指令，</p>
<p>IEEE 802.3规定的MAC帧第三个字段是“长度&#x2F;类型”</p>
<h2 id="3-4-扩展以太网"><a href="#3-4-扩展以太网" class="headerlink" title="3.4 扩展以太网"></a>3.4 扩展以太网</h2><h3 id="在物理层扩展以太网"><a href="#在物理层扩展以太网" class="headerlink" title="在物理层扩展以太网"></a>在物理层扩展以太网</h3><h3 id="在数据链路层扩展以太网"><a href="#在数据链路层扩展以太网" class="headerlink" title="在数据链路层扩展以太网"></a>在数据链路层扩展以太网</h3><p>早期使用网桥，现在使用以太网交换机</p>
<h4 id="以太网交换机"><a href="#以太网交换机" class="headerlink" title="以太网交换机"></a>以太网交换机</h4><p><strong>特点：</strong></p>
<ul>
<li>实质上就是一个多接口的网桥</li>
<li>每个接口都是与主机或交换机直接相连，并且全双工方式工作</li>
<li>以太网交换机具有并行性</li>
</ul>
<p><strong>优点：</strong></p>
<ul>
<li>用户独享带宽，增加了总容量<ul>
<li>对于普通共享式以太网，所有用户平分带宽</li>
<li>而以太网交换机每个接口带宽都是一样，接口越多，带宽总容量越大</li>
</ul>
</li>
<li>共享转交换不用改动</li>
<li>具有多种速率接口，适合不同用户</li>
</ul>
<p>交换机要分割广播域，需要用到虚拟局域网(vlan)</p>
<p><strong>工作原理：</strong></p>
<p>交换机起初有一张空的mac地址表，通信之后自动学习mac地址，然后转发信息</p>
<p>pc0第一次ping pc1，交换机会<strong>广播</strong>包，然后pc1和pc2都收到，但是是pc1需要的，pc1接到后返回包给交换机，这时候交换机已经知道两者的mac地址了，将包返回给pc0。此后发包交换机都会直接在二者进行，不用广播了。</p>
<p>若在有效时间内两主机都没通信，该条目会被删除</p>
<p>MAC地址表空间有限，一旦表满，就会<strong>泛洪</strong>到所有新MAC地址的帧，知道现存地址条目老化未知</p>
<ul>
<li><p>监听</p>
<ul>
<li><p>短时间大量发送错误的mac地址进行攻击，造成内存溢出</p>
</li>
<li><blockquote>
<p>交换机就会从点对点的交换式退回共享式hub，****监听其他主机的数据了<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="D:\Typora\images\image-20230407110421469.png" alt="image-20230407110421469"></p>
</blockquote>
</li>
</ul>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/M5SbZDyWxpdQaKA.png"></p>
<p><strong>交换方式：</strong></p>
<ul>
<li>把整个数据帧先缓存，检查是否出错，如无错才送往目的端口。</li>
<li>有差错控制；交换时延较长。</li>
</ul>
<h4 id="从总线以太网到星形以太网"><a href="#从总线以太网到星形以太网" class="headerlink" title="从总线以太网到星形以太网"></a><strong>从总线以太网到星形以太网</strong></h4><ul>
<li>早期，以太网采用<strong>无源</strong>的总线结构。</li>
<li>现在，采用以太网交换机的星形结构成为以太网的首选拓扑。</li>
<li>总线以太网使用 <strong>CSMA&#x2F;CD 协议</strong>，以<strong>半双工</strong>方式工作。</li>
<li>交换机不使用共享总线，没有碰撞问题，因此不使用CSMA&#x2F;CD协议，而是以全双工式工作，但仍然采用以太网的帧结构</li>
</ul>
<p>使用了生成树协议，不改变网络的实际拓扑，但在<strong>逻辑上则切断</strong>某些链路，使得从一台主机到所有其他主机的路径是<strong>无环路的树状结构</strong>，从而消除了兜圈子现象。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/hOk4MWtriClZaqY.png"></p>
<h3 id="虚拟局域网"><a href="#虚拟局域网" class="headerlink" title="虚拟局域网"></a>虚拟局域网</h3><p>虚拟局域网（ VLAN ）：它是将局域网从逻辑上划分为一个个的<strong>网段</strong>，从而实现虚拟工作组的一种交换技术。</p>
<p>因此同一个网段下的主机都要设置同一个网络号。</p>
<p>补充：当子网掩码为255.255.255.0，则ip前三个段表示网络号；255.255.0.0，前两个为网络号。(255在8位二进制表示全1)</p>
<p>：那么不同网段设置不同网络号就好了为什么要设VLAN？</p>
<p>：IP是逻辑地址，随时改，不安全不严谨</p>
<blockquote>
<p>一个VLAN&#x3D;一个广播域&#x3D;逻辑网段(子网)</p>
</blockquote>
<h2 id="3-5-高速以太网"><a href="#3-5-高速以太网" class="headerlink" title="3.5 高速以太网"></a>3.5 高速以太网</h2><p>吉特以太网，上层链路速度要比下层所有加起来要大(或等于)</p>
<h1 id="四-网络层"><a href="#四-网络层" class="headerlink" title="四 网络层"></a>四 网络层</h1><p>网络层提供的两种服务：</p>
<ul>
<li>虚电路服务(面向连接，让网络负责可靠交付)</li>
<li>数据报服务(无连接，让主机负责可靠交付)</li>
</ul>
<table>
<thead>
<tr>
<th><strong>网络层两种服务</strong></th>
<th><strong>含义</strong></th>
<th><strong>优点</strong></th>
<th><strong>缺点</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>虚电路服务</strong></td>
<td>借助电信网经验，通信之前先建立虚电路(Virtual Circuit)，以保证双方通信所需的一切网络资源。</td>
<td>使所发送的分组无差错按序到达终点，不丢失、不重复。</td>
<td>占用一定的网络带宽，造成资源浪费</td>
</tr>
<tr>
<td><strong>数据报服务</strong></td>
<td>网络在发送分组时不需要先建立连接。每一个分组（即IP 数据报）独立发送，与其前后的分组无关（不进行编号）。</td>
<td>传输网络不提供端到端的可靠传输服务，网络的造价大大降低，运行方式灵活，能够适应多种应用。</td>
<td>网络层不提供服务质量的承诺。即所传送的分组可能出错、丢失、重复和失序（不按序到达终点），不保证分组传送的时限</td>
</tr>
</tbody></table>
<h2 id="4-2-网际协议IP"><a href="#4-2-网际协议IP" class="headerlink" title="4.2 网际协议IP"></a>4.2 网际协议IP</h2><p>ARP协议：IP到MAC的映射</p>
<p>ICMP( Internet Control Message Protocol )：报告出错情况</p>
<h3 id="4-2-1-虚拟互连网络"><a href="#4-2-1-虚拟互连网络" class="headerlink" title="4.2.1 虚拟互连网络"></a>4.2.1 虚拟互连网络</h3><p><strong>意义：</strong></p>
<ul>
<li><strong>所谓虚拟互连网络也就是逻辑互连网络</strong></li>
<li>使用虚拟互连网络的好处是：当互联网上的主机进行通信时，就好像在一个网络上通信一样，而看不见互连的各具体的网络异构细节。</li>
<li>如果在这种覆盖全球的 IP 网的上层使用 TCP 协议，那么就是现在的互联网 (Internet)</li>
</ul>
<p>核心层–汇聚层–接入层</p>
<p>为什么要有IP而不单独用MAC，因为MAC就像一个人的名字，找是很难找的，IP就像学号，具备逻辑信息，找起来方便</p>
<h3 id="4-2-2-分类的IP地址"><a href="#4-2-2-分类的IP地址" class="headerlink" title="4.2.2 分类的IP地址"></a>4.2.2 分类的IP地址</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/d8PiGq1hNlMVXJ6.png"></p>
<p>A类地址的第一个十进制数范围从(1-126)</p>
<p>B类地址的第一个十进制数范围从(128-191)</p>
<p>C类地址的第一个十进制范围(192-223)，例如192.168.1.1 网络号字段即192.168.1.0</p>
<p><strong>-A类-127-B类-191-C类-</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/tAVEsLlrjCfNo4G.png"></p>
<h4 id="点分十进制记法"><a href="#点分十进制记法" class="headerlink" title="点分十进制记法"></a>点分十进制记法</h4><p>机器中存放IP地址是32位二进制代码，8位为一组，转换为十进制数，提高可读性。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/vuxY8jhAZMTrbm3.png"></p>
<p><strong>※转换：</strong></p>
<p>为1的位代表的十进制数相加。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/V1OMYrks2JWECLK.png"></p>
<p><strong>一般不使用的特殊的IP地址：</strong></p>
<table>
<thead>
<tr>
<th>网络号</th>
<th>主机号</th>
<th>源地址实验</th>
<th>目的地址实验</th>
<th>代表的意思</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>0</td>
<td>可以</td>
<td>不可</td>
<td>在本网络上的本主机（6.6节DHCP协议）</td>
</tr>
<tr>
<td>0</td>
<td>host-id</td>
<td>可以</td>
<td>不可</td>
<td>在本网络上的某台主机host-id</td>
</tr>
<tr>
<td>全1</td>
<td>全1</td>
<td>不可</td>
<td>可以</td>
<td>只在本网络上进行广播（各路由器均不转发）</td>
</tr>
<tr>
<td>net-id</td>
<td>全1</td>
<td>不可</td>
<td>可以</td>
<td>对net-id上的所有主机进行广播</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/AOFXCgrntybdHJN.png"></p>
<p>调试网络：</p>
<p>ping自己，ip没错</p>
<p>ping网关，网关没错</p>
<p>ping下一跳，没问题再ping下一跳</p>
<h4 id="IP地址的重要特点"><a href="#IP地址的重要特点" class="headerlink" title="IP地址的重要特点"></a>IP地址的重要特点</h4><ol>
<li><strong>分等级的地址结构</strong>，两个好处<ul>
<li>IP 地址管理机构在分配 IP 地址时<strong>只分配网络号</strong>，由该网络号的单位自行分配剩下的主机号，方便IP地址管理。</li>
<li>路由器仅根据目的主机所连接的<strong>网络号</strong>来转发分组；使路由器中的项目数大幅减少，从而减小路由表所占的存储空间</li>
</ul>
</li>
<li>实际上 IP 地址是标志<strong>一个主机（或路由器）</strong>和<strong>一条链路</strong>的<strong>接口。</strong><ul>
<li>因此，当一个主机连接到两个网络上时，就必须同时具有两个相应的IP地址，这两个网络号必须不同，称为多归属主机。</li>
<li>一个路由器至少应对连接到两个网络，这样才能将数据报从一个网络转发到另一个，即路由器至少要有两个不同的IP地址。</li>
</ul>
</li>
<li>用<strong>转发器</strong>或<strong>网桥</strong>连接起来的若干个局域网<strong>仍为一个网络</strong>，因此这些局域网都具有<strong>同样的网络号 net-id</strong>。</li>
<li>所有分配到网络号 net-id 的网络，无论是范围很小的局域网，还是可能覆盖很大地理范围的广域网，<strong>都是平等的</strong>。</li>
</ol>
<h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><ul>
<li><p>IP 地址是一种分等级的地址结构</p>
</li>
<li><p>路由器用于连接不同网络，一个路由器至少有两个网络号不同的IP 地址。</p>
</li>
<li><p>用转发器或网桥连接起来的局域网仍属于一个网络。</p>
</li>
<li><p>在同一个网络上的主机或路由器的IP地址中的<strong>网络号必须是一样的</strong>。</p>
</li>
</ul>
<h3 id="4-2-3-IP地址与硬件地址"><a href="#4-2-3-IP地址与硬件地址" class="headerlink" title="4.2.3 IP地址与硬件地址"></a>4.2.3 IP地址与硬件地址</h3><p>IP数据报头部是IP地址，MAC帧首部是硬件地址</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/Wtn7s2M84xgb6Oq.png"></p>
<p><strong>在 IP 层抽象的互联网上只能看到 IP 数据报。</strong></p>
<p>图中的 IP1→IP2 表示从源地址 IP<em>到目的地址 IP2 。两个路由器的 IP 地址并不出现在 IP 数据报的首部中。路由器只根据目的站的 IP 地址的网络号进行路由选择。*<em>那怎么知道到哪个路由器呢？</em></em></p>
<p>这个时候就需要MAC地址了，<strong>IP 层抽象的互联网屏蔽了下层很复杂的细节。</strong>在抽象的网络层上讨论问题，就能够使用统一的、抽象的 IP 地址<em>研究主机和主机或主机和路由器之间的通信 。</em>*</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/H3xyW4R1whNLZKg.png"></p>
<h3 id="4-2-4-地址解析协议ARP"><a href="#4-2-4-地址解析协议ARP" class="headerlink" title="4.2.4 地址解析协议ARP"></a>4.2.4 地址解析协议ARP</h3><ul>
<li>通信时使用了两个地址<ul>
<li>IP地址(网络层地址)</li>
<li>MAC地址(数据链路层地址)—ARP来找</li>
</ul>
</li>
<li>地址解析协议ARP作用就是从网络层使用的IP地址<strong>解析出在数据链路层使用的硬件地址。</strong></li>
</ul>
<p>ARP 作用：从网络层使用的 IP 地址，解析出在数据链路层使用的硬件地址。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/fVsAjM5cZCbe4n9.png"></p>
<p>ARP要点：</p>
<ul>
<li><p>不管网络层是什么协议，当网络上传输数据帧时还是需要<strong>使用硬件地址的。</strong></p>
</li>
<li><p>每一个主机都设有一个<strong>ARP 高速缓存 (ARP cache)<strong>，里面有所在的局域网上的各主机和路由器的</strong>IP 地址到硬件地址</strong>的<strong>映射表</strong>。</p>
<blockquote>
<p>&lt;IP address; MAC address; TTL&gt;，TTL(Time To Live):地址映射有效时间</p>
</blockquote>
</li>
<li><p>A向B发IP数据报先查ARP cache有无B的IP地址</p>
<ul>
<li>Yes，就可以查到<strong>硬件地址并写入MAC帧</strong>，通过局域网将MAC帧发往硬件地址</li>
<li>No，ARP进程在本局域网<strong>广播</strong>发送一个<strong>ARP请求分组</strong>，收到响应后，将映射写入ARP cashe</li>
</ul>
</li>
</ul>
<p><strong>注意：</strong></p>
<ul>
<li>ARP是解决<strong>同一个局域网</strong>上的主机或路由器的IP地址和硬件地址的映射问题。</li>
<li>如果目的主机不在同一个局域网，则现有ARP找到一个位于本局域网上的<strong>某个路由器的硬件地址</strong>，<strong>将分组发送给路由器进行转发</strong>，剩下的工作由下一个网络来做。</li>
<li>从IP 地址到硬件地址的解析是自动进行，主机用户不知道</li>
<li>只要与已知IP的设备进行通信，ARP协议就会<strong>自动地</strong>将该IP 地址解析为链路层所需要的硬件地址。</li>
</ul>
<h4 id="为什么我们不直接使用硬件地址进行通信？"><a href="#为什么我们不直接使用硬件地址进行通信？" class="headerlink" title="为什么我们不直接使用硬件地址进行通信？"></a>为什么我们不直接使用硬件地址进行通信？</h4><ul>
<li>异构网络，转换复杂：由于全世界存在着各式各样的网络，它们使用不同的硬件地址。要使这些异构网络能够互相通信就必须进行非常复杂的硬件地址转换工作，因此几乎是不可能的事。</li>
<li>IP编址解决这一问题，统一标准，进行编号：连接到互联网的主机只需各自拥有一个唯一的IP 地址，它们之间的通信就像连接在同一个网络上那样简单方便，因为上述的调用ARP 的复杂过程都是由计算机软件自动进行的，对用户来说是看不见这种调用过程的。</li>
<li>因此，在虚拟的IP 网络上用<strong>IP 地址</strong>进行通信给广大的计算机用户带来了很大的方便。</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/jcgl74I8mq5Ahyd.png"></p>
<p>第一个是广播，发送全1地址；发送路由器的MAC地址，让路由器转发分组</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="D:\Blog\source_posts\计算机网络笔记.assets\image-20230522093726982.png" alt="image-20230522093726982"></p>
<p>主机1可以访问WWW服务器，但不能访问Internet。</p>
<p><strong>以太网 数据部分46-1500B 整个帧64-1518B</strong></p>
<h4 id="小结-1"><a href="#小结-1" class="headerlink" title="小结"></a>小结</h4><ul>
<li>ARP协议的作用：从<strong>IP地址解析出硬件地址</strong>。</li>
<li>每一个主机都设有一个<strong>ARP高速缓存</strong>，用于存放最近获得的IP 地址到MAC 地址的绑定。</li>
<li>当目的主机和源主机<strong>不在同一个局域网时</strong>，通过ARP找到默认网关的硬件地址，然后<strong>由默认网关把分组转发</strong>给下一个网络。</li>
</ul>
<h3 id="4-2-5IP数据报的格式"><a href="#4-2-5IP数据报的格式" class="headerlink" title="4.2.5IP数据报的格式"></a>4.2.5IP数据报的格式</h3><ul>
<li><p>一个 IP 数据报由首部和数据两部分组成。</p>
</li>
<li><p>首部的前一部分是固定长度，<strong>共 20 字节</strong>，是所有 IP 数据报必须具有的。</p>
</li>
<li><p>在首部的固定部分的后面是一些可选字段，其长度是可变的。</p>
</li>
</ul>
<h4 id="IP-数据报首部的固定部分中的各字段"><a href="#IP-数据报首部的固定部分中的各字段" class="headerlink" title="IP 数据报首部的固定部分中的各字段"></a>IP 数据报首部的固定部分中的各字段</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/KNXFhwnms1AB6tZ.png"></p>
<ul>
<li>首部前一部分是固定长度，共<strong>20字节</strong>，是所有IP数据报必须具有的</li>
<li>可选字段说明长度是可变</li>
</ul>
<p>第一行从左到右：</p>
<ul>
<li><p><strong>版本</strong>——占4 位，指IP 协议的版本。目前的IP 协议版本号为4 (即IPv4)。</p>
</li>
<li><p><strong>首部长度</strong>——占4 位，可表示的最大数值是15 个单位(一个单位为4 字节)，因此IP 的首部长度的最大值是60 字节。</p>
</li>
<li><p>区分服务，只有使用区分服务才起作用，一般不使用</p>
</li>
<li><p><strong>总长度</strong>——占16 位，指<strong>首部和数据之和</strong>的长度，单位为字节，因此数据报的最大长度为<strong>65535 字节</strong>。总长度必须不超过<strong>最大传送单元MTU</strong>。</p>
<blockquote>
<p>最大传输单元MTU：一个帧可传输的数据量的上界。</p>
<p>数据经MTU先分片，到目的站再重组</p>
</blockquote>
</li>
</ul>
<p>第二行从左到右：</p>
<ul>
<li><p><strong>标识</strong>(identification) ——占16 位，它是一个计数器，用来产生IP 数据报的标识。</p>
</li>
<li><p><strong>标志</strong>(flag) ——占3 位，目前只有前两位有意义。MF&#x3D;1表示后面还有分片，MF&#x3D;0表示最后一个分片。DF&#x3D;0时才允许分片</p>
</li>
<li><p><strong>片偏移</strong>—— 占13 位，指出：较长的分组在分片后，某片在原分组中的某片<strong>在原分组</strong>中的<strong>相对位置</strong>。片偏移以<strong>8 个字节</strong>为偏移单位。**(除以8)**</p>
</li>
<li><p>例子</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/Y8EpiyvMm5PtboO.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/8XoukmV2sgQb5pr.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/Nx1CutzJiscSQmB.png"></p>
</li>
</ul>
<p>第三行从左到右：</p>
<ul>
<li>生存时间——占8 位，记为TTL (Time To Live)，指示数据报在网络中可通过的路由器数的最大值。</li>
<li>协议——占8 位，指出此数据报携带的数据使用何种协议，以便目的主机的IP 层将数据部分上交给那个处理过程</li>
<li>首部检验和——占16 位，<strong>只检验数据报的首部</strong>，不检验数据部分。这里不采用CRC 检验码而采用简单的计算方法。</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/Y8EpiyvMm5PtboO.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/8XoukmV2sgQb5pr.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/Nx1CutzJiscSQmB.png"></p>
<h4 id="死亡之ping"><a href="#死亡之ping" class="headerlink" title="死亡之ping"></a>死亡之ping</h4><p>ping -l [包尺寸] 目标IP -t</p>
<p>IP包最大65535，而实际规定的最大尺寸并达不到。</p>
<p>一直发大包，分片之后没问题，接收到重组之后就发现超过了尺寸，使得额外数据被写入其他正常区域，造成缓存溢出(<strong>Buffer Overflow</strong>)攻击</p>
<p>解决办法：对超出规定长度的包直接丢掉不重组</p>
<ul>
<li>生存时间</li>
<li>协议</li>
<li>首部检验和<ul>
<li>并不检验数据，为了减少路由器处理时延，转发分组更快</li>
<li>缺点，出现差错不能及时发现</li>
<li>计算距离了解即可</li>
</ul>
</li>
<li>目的地址、源地址</li>
<li>可变部分，从1字节到40字节不等，现在少用，一般都是固定的</li>
</ul>
<h4 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h4><p>一行由8位16进制标识，当有一个IP分组表，每个单元是一个8位16进制，那么源地址就是第四个单元，如c0 a8 00 08–&gt;1100 0000. . . –&gt;192.168.0.8</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/Let4H8WYjhxQfEK.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/dzI7rXMQH8sRLbu.png"></p>
<p><strong>【解答】</strong>（1）H主机的IP地址是<strong>192.169.0.8</strong>，<strong>对应的十六进制是c0 a8 00 08</strong>，根据IP分组的源IP地址知道，分组1、3和4是H发送的。</p>
<p>（2）快速以太网数据帧的数据最小长度为46B，当IP分组<strong>总和小于46B时，需要填充。</strong></p>
<p>根据IP分组的“总长度”字段，5个分组的长度分别为00  30H、00 30H、00 28H、00 38H、00 28H，即：</p>
<p> 第1、2、4个分组大小分别为48B、48B、52B（均大于最小帧长46B），不需要填充；</p>
<p> 第3、5个分组28H<strong>（分组大小为40B）</strong>，因此<strong>需要填充</strong>。</p>
<h4 id="小结-2"><a href="#小结-2" class="headerlink" title="小结"></a>小结</h4><ul>
<li>IP 数据报由<strong>首部</strong>和<strong>数据</strong>组成。</li>
<li>途径MTU较小网络，数据报会被<strong>分片</strong>，到达目的站后再进行<strong>重组</strong>。</li>
<li>IP 数据报采用<strong>16 位二进制反码</strong>求和算法检验数据报的首部。</li>
</ul>
<h3 id="4-2-6-IP-层转发分组的流程"><a href="#4-2-6-IP-层转发分组的流程" class="headerlink" title="4.2.6 IP 层转发分组的流程"></a>4.2.6 <strong>IP 层转发分组的流程</strong></h3><p><strong>在路由表中，对每一条路由，最主要的是</strong></p>
<p><strong>（目的网络地址，下一跳地址）</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/ZBeM6culfJEFikV.png"></p>
<ul>
<li><p>查找路由表</p>
<ul>
<li><strong>根据目的网络地址</strong>就能确定下一跳路由器，这样做的结果是：<ul>
<li>IP 数据报最终一定可以找到目的主机所在目的网络上的路由器（可能要通过多次的<strong>间接交付</strong>）。</li>
<li>只有到达最后一个路由器时，才试图向目的主机进行<strong>直接交付</strong>。</li>
</ul>
</li>
</ul>
</li>
<li><p>特定主机路由</p>
<ul>
<li>分组转发基于目的主机所在网络，特例是为特定目的主机指明一个路由</li>
<li>方便控制和测试</li>
</ul>
</li>
<li><p>默认路由</p>
<ul>
<li>减少路由表占用空间和搜索路由表时间</li>
<li><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/SAkEeX8bNlhUTHy.png"></li>
</ul>
</li>
<li><p>注意</p>
<ul>
<li>数据报首部没有指明下一跳路由器的IP</li>
<li>当路由器接到数据报，是将下一跳地址递交下一层网络接口软件而非填入IP数据报</li>
<li>网络接口软件使用 ARP 负责将下一跳路由器的IP 地址转换成硬件地址，并将此硬件地址放在链路层的 MAC 帧的首部，然后根据这个硬件地址找到下一跳路由器。</li>
</ul>
</li>
<li><p>路由器分组转发算法</p>
<ol>
<li>从首部提取<strong>目的主机IP地址D</strong>，得出<strong>目的网络地址N</strong></li>
<li>若直接相连，则<strong>直接交付</strong>目的主机，否则<strong>间接交付</strong>，执行3</li>
<li>若有<strong>特定主机路由</strong>，则传送给指明的下一跳路由器，否则执行4</li>
<li>若有<strong>到达网络N的路由</strong>，传送，否则5</li>
<li>若有<strong>默认路由</strong>，传送给指明的默认路由器，否则6</li>
<li>报告转发分组出错</li>
</ol>
</li>
</ul>
<h2 id="⚠4-3划分子网和构造超网"><a href="#⚠4-3划分子网和构造超网" class="headerlink" title="⚠4.3划分子网和构造超网"></a>⚠4.3划分子网和构造超网</h2><h3 id="4-3-1划分子网"><a href="#4-3-1划分子网" class="headerlink" title="4.3.1划分子网"></a>4.3.1划分子网</h3><p>原因：早期IP地址设计不够合理，利用率低，两级的IP地址不够灵活</p>
<p>解决：在IP地址中增加一个“子网号字段”，从两级IP变成三级IP地址，叫做划分子网</p>
<p>基本思路：</p>
<ul>
<li>划分子网纯属单位内部的事。借助主机位划分子网，对外仍然是一个网络</li>
<li>从主机号再借用若干位作为子网号，因此主机号就相应减少了若干位</li>
<li>从其他网络发来的数据报，仍然根据IP数据包的目的网络号找到本单位网络上的路由器</li>
<li>此路由器再按目的<strong>网络号</strong>和<strong>子网号</strong>找到目的子网</li>
</ul>
<p>优点：</p>
<ul>
<li>减少了IP 地址的浪费</li>
<li>使网络的组织更加灵活</li>
<li>更便于维护和管理</li>
</ul>
<h4 id="子网掩码"><a href="#子网掩码" class="headerlink" title="子网掩码"></a>子网掩码</h4><p>原因：根据IP数据报首部无法判断目的网络是否进行子网划分</p>
<p>解决：通过子网掩码可以找到IP地址中的子网部分</p>
<p>规则：</p>
<ul>
<li>子网掩码长度＝32位</li>
<li>某位＝1：IP地址中的对应位为网络号和子网号</li>
<li>某位＝0：IP地址中的对应位为主机号</li>
</ul>
<p><strong>看例题</strong></p>
<p>因此无法仅通过首部判断源主机或目的主机所连接的网络是否进行了子网划分。</p>
<p>与运算<br>$$<br>(IP地址)AND(子网掩码)&#x3D;网络地址<br>$$<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/KXT2njZ9JReU1cE.png"></p>
<p>借的位数越多，子网越多但是每个子网能带的主机数越少,如何理解借用呢，看下面的例子</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2024/05/29/SrsUkdaXuw6nVyI.png" alt="image.png"></p>
<p>通过ip地址可以看到是个C类，但是子网掩码不是默认的255.255.255.0而是.224，写出224的2进制，是11100000，前面3个1，借了3位，也就是划分了2<sup>3</sup>个子网，三位二进制有8种组合，每一种组合加上后面全0就对应一个子网号</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="D:\Typora\images\image-20230428105145702.png" alt="image-20230428105145702"></p>
<p><strong>网络地址：192.168.10.0</strong></p>
<p><strong>子网掩码：255.255.255.192(&#x2F;26)</strong> ：192(11000000)说明借了两位产生子网</p>
<p>**1.子网数？ **借了多少位产生多少子网</p>
<p><strong>2.主机数？</strong></p>
<p><strong>3.有效子网？</strong></p>
<p><strong>4.广播地址？</strong> 网络段不变(包括借位的部分)，后面全1</p>
<p><strong>5.有效主机范围是？</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/OUvtdJEs4HlFX9w.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/Z9UnDyAmcT1Vr5j.png"></p>
<table>
<thead>
<tr>
<th>IP地址类别</th>
<th>分段</th>
<th>网络号</th>
<th>主机号</th>
<th>默认子网掩码</th>
</tr>
</thead>
<tbody><tr>
<td>A</td>
<td>0-127</td>
<td>8位</td>
<td>24位</td>
<td>255.0.0.0</td>
</tr>
<tr>
<td>B</td>
<td>128-191</td>
<td>16位</td>
<td>16位</td>
<td>255.255.0.0</td>
</tr>
<tr>
<td>C</td>
<td>192-223</td>
<td>24位</td>
<td>8位</td>
<td>255.255.255.0</td>
</tr>
</tbody></table>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/bUhN129rsGRijfg.png"></p>
<h3 id="4-3-2-使用子网时分组的转发"><a href="#4-3-2-使用子网时分组的转发" class="headerlink" title="4.3.2 使用子网时分组的转发"></a>4.3.2 使用子网时分组的转发</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/yovxnePRO7bfhAL.png"></p>
<h3 id="4-3-3-无分类编址-CIDR"><a href="#4-3-3-无分类编址-CIDR" class="headerlink" title="4.3.3 无分类编址 CIDR"></a>4.3.3 无分类编址 CIDR</h3><p>128.14.32.0&#x2F;20 网络前缀的<strong>位数</strong>(即网络号)为20，&#x2F;20地址块</p>
<ul>
<li>例 192.199.170.82&#x2F;27<ul>
<li>有多少ip地址？一个32位，网络占27，则ip地址有2^5&#x3D;32</li>
<li>最大最小地址：看82:(01010010)，最后5位全0则为最小网络号，全1为最大网络号</li>
<li>CIDR地址块.后5位全0，即最小地址</li>
<li>子网掩码，令27位全1，后5位全0</li>
</ul>
</li>
</ul>
<h4 id="路由聚合"><a href="#路由聚合" class="headerlink" title="路由聚合"></a>路由聚合</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/4v3o6hO8XTJb2SP.png"></p>
<h4 id="构成超网"><a href="#构成超网" class="headerlink" title="构成超网"></a>构成超网</h4><p>将多个子网聚合成一个较大的子网，构成超网或网络聚合</p>
<p><strong>方法：将网络前缀缩短所有网络取交集</strong></p>
<p>206.1.0.0&#x2F;17</p>
<p>206.1.128.0&#x2F;17</p>
<p>这两个网络只有前16位相同，因此取交集，网络前缀缩短为16，即206.1.0.0&#x2F;16</p>
<p>划分子网：从少到多；构成超网：从多变少</p>
<h4 id="最长前缀匹配"><a href="#最长前缀匹配" class="headerlink" title="最长前缀匹配"></a>最长前缀匹配</h4><p>使用CIDR 时，路由表中的每个项目由“网络前缀”和“下一跳地址”组成。在查找路由表时可能会得到<strong>不止一个匹配结果</strong>。</p>
<p>使用CIDR时，查找路由表可能得到几个匹配结果(跟网络掩码<strong>按位相与</strong>)，应选择具有最长网络前缀的路由。前缀越长，<strong>地址块越小，路由越具体</strong>。</p>
<p>根据最长前缀匹配，如果匹配成功则<strong>选择网络前缀最长</strong>的，就是目标路由器</p>
<p>解题步骤：</p>
<ul>
<li><p>先将目的地址和路由表所有项目的子网掩码进行与运算</p>
</li>
<li><p>看看结果是否等于路由表的项目IP</p>
</li>
<li><p>如果有多个相同的结果，取子网掩码长的</p>
</li>
<li><p>例：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/C8resPvTSiO7yX6.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/3tLwgYubH6z2Dlj.png"></p>
<p>这里就匹配到了两个结果，选择子网掩码最长的，即206.71.128&#x2F;25，因此下一跳为2</p>
</li>
</ul>
<h4 id="二叉线索法"><a href="#二叉线索法" class="headerlink" title="二叉线索法"></a>二叉线索法</h4><h2 id="4-4网际控制报文协议ICMP"><a href="#4-4网际控制报文协议ICMP" class="headerlink" title="4.4网际控制报文协议ICMP"></a>4.4网际控制报文协议ICMP</h2><p>目的：为了更加<strong>有效转发IP数据报</strong>和提高交付成功的机会</p>
<p>作用：ICMP 允许主机或路由器报<strong>告差错情况</strong>和<strong>提供</strong>有关<strong>异常</strong>情况的报告。</p>
<p>注意：<strong>不是高层协议</strong>，它封装在IP数据报中，作为数据部分，是IP层的协议</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/7ZVnztNPhMoE15C.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/nuTxl4EYoivc1CF.png"></p>
<h3 id="4-4-1ICMP报文的种类"><a href="#4-4-1ICMP报文的种类" class="headerlink" title="4.4.1ICMP报文的种类"></a>4.4.1ICMP报文的种类</h3><p>两种：</p>
<ul>
<li>ICMP 差错报告报文</li>
<li>ICMP 询问报文。</li>
</ul>
<p>报文格式：</p>
<ul>
<li>前4 个字节统一格式，三个字段：类型、代码和检验和。接着4个字节与ICMP类型有关</li>
</ul>
<h4 id="ICMP-差错报告报文"><a href="#ICMP-差错报告报文" class="headerlink" title="ICMP 差错报告报文"></a>ICMP 差错报告报文</h4><p>四种：</p>
<ul>
<li>终点不可达</li>
<li>时间超过</li>
<li>参数问题</li>
<li>改变路由（重定向）(Redirect)</li>
</ul>
<p>不应发送ICMP 差错报告报文的几种情况</p>
<ul>
<li>对ICMP 差错报告报文不再发送ICMP 差错报告报文。</li>
<li>对第一个分片的数据报片的所有后续数据报片都不发送ICMP 差错报告报文。</li>
<li>对具有多播地址的数据报都不发送ICMP 差错报告报文。</li>
<li>对具有特殊地址（如127.0.0.0 或0.0.0.0）的数<br>据报不发送ICMP 差错报告报文。</li>
</ul>
<h4 id="ICMP-询问报文"><a href="#ICMP-询问报文" class="headerlink" title="ICMP 询问报文"></a>ICMP 询问报文</h4><ul>
<li>回送请求和回答报文</li>
<li>时间戳请求和回答报文</li>
</ul>
<h3 id="4-4-2ICMP的应用距离"><a href="#4-4-2ICMP的应用距离" class="headerlink" title="4.4.2ICMP的应用距离"></a>4.4.2ICMP的应用距离</h3><h4 id="PING-Packet-InterNet-Groper"><a href="#PING-Packet-InterNet-Groper" class="headerlink" title="PING(Packet InterNet Groper)"></a>PING(Packet InterNet Groper)</h4><ul>
<li>PING用来测试两个主机之间的连通性</li>
<li>PING使用了<strong>ICMP 回送请求</strong>与<strong>回送回答</strong>报文。</li>
<li>PING是应用层<strong>直接使用网络层ICMP</strong> 的例子，它没有通过运输层的TCP 或UDP。</li>
</ul>
<h4 id="Traceroute"><a href="#Traceroute" class="headerlink" title="Traceroute"></a>Traceroute</h4><ul>
<li>Windows中命令是tracert</li>
<li>用来跟踪一个分组从源点到终点的路径</li>
<li>它利用IP 数据报中的TTL 字段和ICMP 时间超过差错报告报文实现对从源点到终点的路径的跟踪。</li>
</ul>
<h3 id="小结-3"><a href="#小结-3" class="headerlink" title="小结"></a>小结</h3><ul>
<li>ICMP用于主机或路由器报告差错情况和提供有关异常情况的报告</li>
<li>ICMP报文包括ICMP差错报告报文和ICMP询问报文两种</li>
<li>ICMP应用：PING、Traceroute</li>
</ul>
<h2 id="4-5互联网的路由选择协议"><a href="#4-5互联网的路由选择协议" class="headerlink" title="4.5互联网的路由选择协议"></a>4.5互联网的路由选择协议</h2><h3 id="4-5-1有关路由选择协议的几个基本概念"><a href="#4-5-1有关路由选择协议的几个基本概念" class="headerlink" title="4.5.1有关路由选择协议的几个基本概念"></a>4.5.1有关路由选择协议的几个基本概念</h3><table>
<thead>
<tr>
<th>路由算法</th>
<th>路由选择</th>
<th>优点</th>
<th>缺点</th>
</tr>
</thead>
<tbody><tr>
<td>静态路由选择策略</td>
<td>非自适应路由选择</td>
<td>简单和开销较小</td>
<td>但不能及时适应网络状态的变化</td>
</tr>
<tr>
<td>动态路由选择策略</td>
<td>自适应路由选择</td>
<td>能较好地适应网络状态的变化</td>
<td>实现起来较为复杂，开销也比较大。</td>
</tr>
</tbody></table>
<h4 id="分层次的路由选择协议"><a href="#分层次的路由选择协议" class="headerlink" title="分层次的路由选择协议"></a>分层次的路由选择协议</h4><p>互联网采用分层次的路由选择协议，原因：</p>
<ul>
<li>互联网的规模非常大，为了节省路由表空间，同时避免通信链路饱和</li>
<li>单位不想让外界了解自己的网络</li>
</ul>
<p>自治系统AS：</p>
<ul>
<li>在单一的技术管理下的一组路由器，使用AS内部的<strong>路由选择协议</strong>和<strong>共同的度量</strong>来确定其中的路由，还使用AS之间的路由选择协议来确定分组在AS之间的路由。</li>
<li>尽管一个AS 使用了多种内部路由选择协议和度量，一个AS 对其他AS 表现出的是一个<strong>单一的和一致</strong>的路由选择策略。</li>
</ul>
<h4 id="互联网有两大类路由选择协议"><a href="#互联网有两大类路由选择协议" class="headerlink" title="互联网有两大类路由选择协议"></a>互联网有两大类路由选择协议</h4><ul>
<li>内部网关协议IGP (Interior Gateway Protocol)<ul>
<li>在一个<strong>自治系统内部使用</strong>的路由选择协议。</li>
<li>这类使用的最多，如RIP和OSPF</li>
</ul>
</li>
<li>外部网关协议EGP (External Gateway Protocol)<ul>
<li>源站和目的站不在一个自治系统，数据报传到自治系统边界就要用一种协议将路由选择信息传递进另一个自治系统，这个系欸就是EGP。</li>
<li>使用最多的是BGP-4</li>
</ul>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/anNqrygvJ62xCRb.png"></p>
<blockquote>
<p>自治系统之间路由选择叫域间路由选择，内部路由选择叫做域内路由选择。</p>
</blockquote>
<p>路由器和网关可以当作同义词</p>
<h4 id="小结-4"><a href="#小结-4" class="headerlink" title="小结"></a>小结</h4><ul>
<li>路由选择包括<strong>静态</strong>和<strong>动态</strong>两种路由选择策略。</li>
<li>一个<strong>自治系统</strong>表现出一致的路由选择策略。</li>
<li>根据是在自治系统内部使用，还是在自治系统之间使用，路由选择协议可以分为<strong>内部网关协议IGP</strong>和<strong>外部网关协议EGP</strong>。</li>
</ul>
<h3 id="4-5-2RIP内部网关协议"><a href="#4-5-2RIP内部网关协议" class="headerlink" title="4.5.2RIP内部网关协议"></a>4.5.2RIP内部网关协议</h3><ul>
<li>内部网关协议IGP中最先得到广泛使用协议</li>
<li>一种<strong>分布式的、基于距离向量的路由选择协议</strong></li>
<li>RIP 协议要求网络中的每一个路由器都要维护<strong>从它自己到其他每一个目的网络的距离记录</strong>。</li>
</ul>
<p><strong>距离(指最短距离)：</strong></p>
<ul>
<li>路由器到直连网络距离定义为1</li>
<li>到非直连的距离定义为所经过的路由器数加1</li>
<li>也成为跳数，经过一个路由器跳数加1</li>
<li>好的路由就是经过路由器数目少，即<strong>距离短</strong></li>
<li>RIP允许一条路径最多<strong>只能包含15个路由器</strong>，加上自己就是16，<strong>16跳就表示不可达，</strong>因此只适用于小型网络</li>
<li>RIP<strong>不能使用多条路由</strong>，这导致它永远选最短的那条，哪怕另外还有一条低时延的路由</li>
</ul>
<p>把“下一跳”字段中的地址都改为X，并把所有的“距离”字段的值<strong>加1</strong></p>
<h4 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h4><ul>
<li>仅和<strong>相邻路由器</strong>交换信息。</li>
<li>交换自己的<strong>路由表</strong>。</li>
<li>按固定的时间间隔<strong>交换路由信息</strong></li>
</ul>
<p>查看错题</p>
<ul>
<li><p>若下一跳字段给出的路由器地址<strong>相同</strong>，则把收到的项目<strong>替换源</strong>路由表项目。</p>
</li>
<li><p>如果收到项目中的距离小于路由表中的距离，则进行更新</p>
</li>
</ul>
<h4 id="RIP2报文"><a href="#RIP2报文" class="headerlink" title="RIP2报文"></a>RIP2报文</h4><p>存在划分子网情况要用version2</p>
<p>RIP2 具有简单的鉴别功能</p>
<h4 id="小结-5"><a href="#小结-5" class="headerlink" title="小结"></a>小结</h4><ul>
<li>使用跳数判断到其他网络的距离。</li>
<li><strong>周期性</strong>地和<strong>相邻路由器</strong>交换<strong>自己的路由表</strong>。</li>
<li>RIP能使用的最大距离为<strong>15跳</strong>(16不可达)，适用于小型网络。</li>
<li>RIP好消息传播得快，<strong>坏消息传播得慢</strong>(信息一直不匹配，要不断更新，直到超过15)，导致更新过程<strong>收敛时间过长</strong>。</li>
</ul>
<h3 id="OSPF内部网关协议"><a href="#OSPF内部网关协议" class="headerlink" title="OSPF内部网关协议"></a>OSPF内部网关协议</h3><p>采用分布式的链路状态协议(link stateprotocol)。</p>
<ul>
<li><p>邻居表</p>
<p>邻居路由器的信息</p>
</li>
<li><p>拓扑表</p>
<p>也叫链<strong>路状态数据库（LSDB）</strong>，同区域中所有路由器的LSDB信息必须保持一致。</p>
</li>
<li><p>路由表</p>
<p>到达目标网络的最佳路径</p>
</li>
</ul>
<p>链路状态数据库(拓扑表)</p>
<ul>
<li>“链路状态”即本路由器和哪些路由器<strong>相邻</strong>，以及该链路的<strong>度量</strong></li>
<li>所有路由器最终建立<strong>一个链路状态数据库</strong>，全网的拓扑结构图，它在全网范围内是一致的(同步)</li>
<li>能较快地更新，收敛快是其重要优点</li>
</ul>
<p>OSPF区域 (area)</p>
<ul>
<li>OSPF用于规模大地网络，将一个自治系统再划分为若干个更小的范围即区域</li>
<li>每个区域有32位的区域标识符(点分十进制表示)</li>
<li>区域最好不超过200个</li>
</ul>
<h4 id="划分区域"><a href="#划分区域" class="headerlink" title="划分区域"></a>划分区域</h4><ul>
<li>主干区域，全0</li>
<li>常规区域，非0</li>
</ul>
<p>好处：</p>
<ul>
<li><p>利用洪泛法<strong>交换链路状态信息的范围</strong>局限于每一个区域而不是整个的自治系统，这就减少了整个网络上的通信量。</p>
</li>
<li><p>在一个区域内部的路由器只知道本区域的完整网络拓扑，而不知道其他区域的网络拓扑的情况。</p>
</li>
<li><p>OSPF 使用<strong>层次结构的区域划分</strong>。在上层的区域叫作<strong>主干区域</strong>(backbone area)。</p>
</li>
<li><p>主干区域的标识符规定为0.0.0.0。主干区域的<strong>作用</strong>是用来连通其他在下层的区域。</p>
</li>
</ul>
<p>OSPF 不用UDP 而是直接用IP 数据报传送，数据报短，不必分片，但只要丢失一个就得整个重传</p>
<p>支持可变长度的子网划分和无分类编址CIDR。</p>
<p>OSPF五种分组类型：</p>
<ul>
<li><p>类型1，问候(Hello) 分组。</p>
</li>
<li><p>类型2，数据库描述(Database Description) 分组。</p>
</li>
<li><p>类型3，链路状态请求(Link State Request) 分组。</p>
</li>
<li><p>类型4，链路状态更新(Link State Update) 分组，用洪泛法对全网更新链路状态。</p>
</li>
<li><p>类型5，链路状态确认(Link State Acknowledgment)<br>分组。</p>
</li>
<li><p>与RIP比较</p>
<ul>
<li>每隔一段时间，如30 分钟，要刷新一次数据库中的链路状态。</li>
<li>当互联网规模很大时，OSPF协议要比距离向量协议RIP 好得多。</li>
<li>OSPF 没有“坏消息传播得慢”的问题，据统计，其响应网络变化的时间小于100 ms。</li>
</ul>
</li>
</ul>
<h4 id="小结-6"><a href="#小结-6" class="headerlink" title="小结"></a>小结</h4><ul>
<li>包括<strong>邻居表、拓扑表（链路状态数据库）、路由表。</strong></li>
<li>链路状态数据库在<strong>全网范围内一致（同步）</strong></li>
<li>OSPF的<strong>更新过程收敛速度快</strong>。</li>
<li>将一个自治系统划分为若干个<strong>区域</strong>，区域内部的路由器<strong>只需要知道本区域</strong>的网络拓扑。</li>
<li>区域包括<strong>主干区域</strong>和<strong>常规区域</strong>两种。</li>
<li>通过<strong>洪泛</strong>发送更新分组。</li>
</ul>
<h3 id="4-5-4BGP外部网关协议"><a href="#4-5-4BGP外部网关协议" class="headerlink" title="*4.5.4BGP外部网关协议"></a>*4.5.4BGP外部网关协议</h3><h3 id="4-5-5路由器的构成"><a href="#4-5-5路由器的构成" class="headerlink" title="*4.5.5路由器的构成"></a>*4.5.5路由器的构成</h3><h2 id="4-6-IPV6"><a href="#4-6-IPV6" class="headerlink" title="4.6 IPV6"></a>4.6 IPV6</h2><h3 id="4-6-1-IPv6的基本首部"><a href="#4-6-1-IPv6的基本首部" class="headerlink" title="4.6.1 IPv6的基本首部"></a>4.6.1 IPv6的基本首部</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/rDPdFVS6lxOkNp5.png"></p>
<ul>
<li>主要变化：<ul>
<li>更大的地址空间，从IPv4 的32 位增大到了128 位。</li>
<li>扩展的地址层次结构。</li>
<li>灵活的首部格式。IPv6 定义了许多可选的扩展首部。</li>
<li>改进的选项。</li>
<li>允许协议继续扩充。</li>
<li>支持即插即用（即自动配置）。因此IPv6 不需要使<br>用DHCP。</li>
<li>支持资源的预分配</li>
<li>IPv6 首部改为8 字节对齐。首部长度必须是8 字节的整数倍。原来的IPv4 首部是4 字节对齐。</li>
</ul>
</li>
<li>扩展首部<ul>
<li>Pv6 把原来IPv4 首部中选项的功能都放在扩展首部中</li>
<li>数据报途中经过的路由器<strong>都不处理</strong>这些扩展首部（只有一个首部例外，即逐跳选项扩展首部）。</li>
<li>这样就大大提高了路由器的处理效率</li>
</ul>
</li>
</ul>
<h3 id="4-6-2-IPv6的地址"><a href="#4-6-2-IPv6的地址" class="headerlink" title="4.6.2 IPv6的地址"></a>4.6.2 IPv6的地址</h3><ul>
<li>目的地址可以是以下三种基本类型地址之一<ul>
<li>单播，点对点</li>
<li>多播，一点对多点</li>
<li>任播，目的是一组计算机，数据包交付时只交付其中一个，通常为距离最近的一个</li>
</ul>
</li>
</ul>
<h4 id="冒分十六进制"><a href="#冒分十六进制" class="headerlink" title="冒分十六进制"></a>冒分十六进制</h4><ul>
<li>允许<strong>零压缩</strong>，即一连串连续的零可以为一对冒号所取代。例如FF05:0:0:0:0:0:0:B3 可压缩为：FF05::B3</li>
<li>注意：在任一地址中只能使用一次零压缩。</li>
<li>CIDR 的斜线表示法仍然可用。</li>
</ul>
<h3 id="4-6-3-从IPv4向IPv6过渡"><a href="#4-6-3-从IPv4向IPv6过渡" class="headerlink" title="4.6.3 从IPv4向IPv6过渡"></a>4.6.3 从IPv4向IPv6过渡</h3><ul>
<li>两种策略<ul>
<li>使用双协议栈，网络地址转换&#x2F;协议转换技术NAT-PT</li>
<li>使用隧道技术，把IPv6 数据报封装成为IPv4 数据报，整个的IPv6 数据报变成了IPv4 数据报的数据部分。离开IPv4 网络中的隧道时，再把数据部分（即原来的IPv6 数据报）交给主机的IPv6 协议栈。</li>
</ul>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/W4ThVUGZPdmMfDt.png"></p>
<h3 id="4-6-4-ICMPv6"><a href="#4-6-4-ICMPv6" class="headerlink" title="*4.6.4 ICMPv6"></a>*4.6.4 ICMPv6</h3><h2 id="4-8-虚拟专用网VPN和网络地址转换NAT"><a href="#4-8-虚拟专用网VPN和网络地址转换NAT" class="headerlink" title="4.8 虚拟专用网VPN和网络地址转换NAT"></a>4.8 虚拟专用网VPN和网络地址转换NAT</h2><h3 id="4-8-1-虚拟专用网VPN"><a href="#4-8-1-虚拟专用网VPN" class="headerlink" title="4.8.1 虚拟专用网VPN"></a>4.8.1 虚拟专用网VPN</h3><p>原因：IP地址紧缺，对于机构内部可以自行分配IP地址。</p>
<p>然而很容易有本地地址和全球地址相同的情况，造成二义性，因此需要作出规定。</p>
<ul>
<li>三个专用IP 地址块：</li>
</ul>
<p>(1) 10.0.0.0 到10.255.255.255，即10开头</p>
<p>A类，或记为10.0.0.0&#x2F;8，它又称为24位块</p>
<p>(2) 172.16.0.0 到172.31.255.255，即172.16-172.31</p>
<p>B类，或记为172.16.0.0&#x2F;12，它又称为20位块</p>
<p>(3) 192.168.0.0 到192.168.255.255，即192.168开头</p>
<p>C类，或记为192.168.0.0&#x2F;16，它又称为16位块</p>
<p>这类地址不需要申请，直接可以使用，仅在本机构内部使用，不能出公网</p>
<h4 id="虚拟专用网"><a href="#虚拟专用网" class="headerlink" title="虚拟专用网"></a>虚拟专用网</h4><p>一般专用网就是专线直接相连使用专用IP地址，然而直接用线路连成本过高，对大部分机构不实际</p>
<p>需要“虚拟”，利用公用的互联网作为本机构各专用网之间的通信载体。表示“好像是”，但实际上并不是，因为现在并没有真正使用通信专线，而VPN只是在效果上和真正的专用网一样。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/UPzHEjO1MFKcl4X.png"></p>
<h4 id="远程接入VPN"><a href="#远程接入VPN" class="headerlink" title="远程接入VPN"></a>远程接入VPN</h4><ul>
<li>远程接入VPN (remote access VPN)可以满足<strong>外部流动员工</strong>访问公司网络的需求。</li>
</ul>
<h4 id="小结-7"><a href="#小结-7" class="headerlink" title="小结"></a>小结</h4><ul>
<li><p>专用地址只能用作本地地址，互联网中的路由器不转发目的地址为专用地址的数据报。</p>
</li>
<li><p>采用专用IP 地址的互连网络称为专用网。</p>
</li>
<li><p>虚拟专用网VPN利用公用的互联网作为本机构各专用网之间的通信载体。</p>
</li>
<li><p>使用隧道技术实现VPN。</p>
</li>
</ul>
<h3 id="4-8-2-网络地址转换NAT"><a href="#4-8-2-网络地址转换NAT" class="headerlink" title="4.8.2 网络地址转换NAT"></a>4.8.2 网络地址转换NAT</h3><p>问题：在专用网上使用专用地址的主机如何与互联网上的主机通信（并不需要加密）？</p>
<ul>
<li>申请全球IP地址</li>
<li>采用网络地址转换NAT</li>
</ul>
<p>装有NAT 软件的路由器叫作NAT路由器，它至少有一个有效的外部全球IP地址。</p>
<p>所有使用本地地址的主机在和外界通信时，都要在NAT 路由器上<strong>将其本地地址转换成全球IP地址</strong>，才能和互联网连接。</p>
<p>优点</p>
<ul>
<li>避免重新编址</li>
<li>节约全局地址使用</li>
<li>不直接使用全局地址，在互联网上不直接可见，增加了安全性</li>
</ul>
<p>NAT三种类型</p>
<ul>
<li>静态，每个主机被<strong>永久映射</strong>成外部网络中的某个合法的地址。-一对一</li>
<li>动态，定义了<strong>一系列合法地址</strong>，利用<strong>动态分配</strong>进行映射。-一对一</li>
<li>重载(PAT)，把内部地址映射到外部网络**一个IP地址的不同端口(port)**上。-多对一</li>
</ul>
<h2 id="4-9-多协议标记交换MPLS"><a href="#4-9-多协议标记交换MPLS" class="headerlink" title="*4.9 多协议标记交换MPLS"></a>*4.9 多协议标记交换MPLS</h2><h3 id="本章总结"><a href="#本章总结" class="headerlink" title="本章总结"></a>本章总结</h3><ul>
<li>⭐网络层提供的两种服务:面向连接(虚电路)、<strong>无连接(数据报)</strong></li>
<li>⭐网络互联设备：<strong>集线器、交换机、路由器、多层交换机</strong></li>
<li>⭐<strong>两级的IP 地址结构：网络号、主机号</strong></li>
<li>IP 地址的点分十进制记法</li>
<li>⭐IP 地址的分类：<strong>A类、B类、C类</strong>、D类、E类</li>
<li>⭐<strong>IP 地址与硬件地址的区别</strong></li>
<li>⭐<strong>ARP协议的作用、工作原理</strong>（如何知道硬件地址）</li>
<li>IP 数据报的格式 大题</li>
<li>⭐<strong>路由器分组转发算法</strong></li>
<li>⭐<strong>划分子网的基本思路、优点 计算题</strong></li>
<li>子网掩码</li>
<li>⭐使用子网时<strong>分组的转发</strong></li>
<li>CIDR的特点</li>
<li>⭐<strong>最长前缀匹配</strong></li>
<li>使用二叉线索查找路由表</li>
<li>⭐<strong>ICMP 作用</strong>、ICMP报文的格式、种类、<strong>ICMP应用</strong></li>
<li>路由选择协议: 内部网关协议、外部网关协议</li>
<li>⭐<strong>RIP、OSPF协议的特点</strong></li>
<li>IPv6的基本首部、IPv6的地址、IPv4向IPv6的过渡</li>
<li>VPN、NAT的作用、特点</li>
<li>⭐<strong>专用IP 地址块</strong></li>
</ul>
<blockquote>
<p>每一点都有关联，理清关系，为什么要有这样的协议&#x2F;技术，解决何种问题</p>
</blockquote>
<h1 id="5传输层"><a href="#5传输层" class="headerlink" title="5传输层"></a>5传输层</h1><p><strong>运输层在协议栈中的地位</strong></p>
<p>Ø 从通信和信息处理角度，运输层为上面的应用层提供通信服务，是面向通信部分的最高层和用户功能的最底层。端到端通信时，只有主机协议栈才有运输车，而路由器在转发分组时都只用到下三层。</p>
<p>Ø 从网络层来说，IP协议虽然能把分组送到目的主机，但是分组还停留在主机的网络层，没有交付主机的应用程序。然而真正的通信实体是主机间的进程。所以还需要运输层完成交付。</p>
<p>Ø 从运输层来看，通信真正的端点并不是主机，而是主机的进程，即端到端的通信是应用进程之间的通信。同时，运输层还有复用、分用的功能，还要对收到的报文进行差错检测。</p>
<p>Ø 因此运输层在协议栈中非常重要，必不可少</p>
<p><strong>运输层和网络层的重要区别：</strong></p>
<table>
<thead>
<tr>
<th></th>
<th>*<strong>运输层*</strong></th>
<th>*<strong>网络层*</strong></th>
</tr>
</thead>
<tbody><tr>
<td>*<strong>位置*</strong></td>
<td>七层网络结构的第四层</td>
<td>七层网络结构的第三层</td>
</tr>
<tr>
<td>*<strong>重要区别*</strong></td>
<td>提供应用进程之间的逻辑通信</td>
<td>提供主机之间的逻辑通信</td>
</tr>
<tr>
<td>*<strong>服务协议*</strong></td>
<td>UDP、TCP</td>
<td>IP协议</td>
</tr>
</tbody></table>
<h2 id="5-1-运输层协议概述"><a href="#5-1-运输层协议概述" class="headerlink" title="5.1 运输层协议概述"></a>5.1 运输层协议概述</h2><h3 id="5-1-1-进程之间的通信"><a href="#5-1-1-进程之间的通信" class="headerlink" title="5.1.1 进程之间的通信"></a>5.1.1 进程之间的通信</h3><p>路由器工作在下三层。不单只是主机之间通信，还得提供<strong>应用进程</strong>的通信</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/lgOurvG5VwEbIKA.png"></p>
<p>复用和分用功能</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/mc1MwCp9JqotyHZ.png"></p>
<h4 id="两大类端口"><a href="#两大类端口" class="headerlink" title="两大类端口"></a>两大类端口</h4><p>(1) 服务器端使用的端口号</p>
<ul>
<li><strong>熟知端口</strong>，数值一般为<strong>0~1023</strong>。</li>
<li><strong>登记端口号</strong>，数值为<strong>1024~49151</strong>，为没有熟知端口号的应<br>用程序使用的。使用这个范围的端口号必须在IANA 登记，<br>以防止重复。</li>
</ul>
<p>(2) 客户端使用的端口号</p>
<ul>
<li><strong>又称为短暂端口号</strong>，数值为<strong>49152~65535</strong>，留给客户进程选<br>择暂时使用。</li>
<li>当服务器进程收到客户进程的报文时，就知道了客户进程所<br>使用的动态端口号。通信结束后，这个端口号可供其他客户<br>进程以后使用。</li>
</ul>
<h4 id="常用的熟知端口–记忆"><a href="#常用的熟知端口–记忆" class="headerlink" title="常用的熟知端口–记忆"></a>常用的熟知端口–记忆</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/gHRKy9zX7JOtM5A.png"></p>
<p>http协议明文传输，抓包就能看到具体信息，而https在http基础上加上Secure Sockets Layer安全套接层，加密</p>
<h3 id="5-1-2-运输层的两个主要协议"><a href="#5-1-2-运输层的两个主要协议" class="headerlink" title="5.1.2 运输层的两个主要协议"></a>5.1.2 运输层的两个主要协议</h3><p>(1) 用户数据报协议 UDP (User Datagram Protocol)</p>
<p>(2) 传输控制协议 TCP (Transmission Control)</p>
<h4 id="TCP与UDP-表格"><a href="#TCP与UDP-表格" class="headerlink" title="TCP与UDP 表格"></a>TCP与UDP 表格</h4><ul>
<li>UDP：一种无连接协议<ul>
<li>提供无连接服务。</li>
<li>在传送数据之前<strong>不需要先建立连接</strong>。</li>
<li>传送的<strong>数据单位协议</strong>是<strong>UDP 报文</strong>或<strong>用户数据报</strong>。</li>
<li>对方的运输层在收到UDP 报文后，不需要给出任何确认。</li>
<li>虽然 <strong>UDP 不提供可靠交付</strong>，但在某些情况下UDP是一种最有效的工作方式。</li>
</ul>
</li>
<li>TCP：一种面向连接的协议<ul>
<li>提供<strong>面向连接</strong>的服务。</li>
<li>传送的数据单位协议是<strong>TCP 报文段</strong>(segment)。</li>
<li><strong>TCP 不提供广播或多播服务。</strong></li>
<li>由于TCP 要<strong>提供可靠的、面向连接的运输服务</strong>，因<br>此不可避免地增加了许多的开销。这不仅使协议数<br>据单元的首部增大很多，还要占用许多的处理机资<br>源。</li>
</ul>
</li>
</ul>
<h2 id="5-2-用户数据报协议UDP"><a href="#5-2-用户数据报协议UDP" class="headerlink" title="5.2 用户数据报协议UDP"></a>5.2 用户数据报协议UDP</h2><p>在IP数据报服务增加了：</p>
<ul>
<li>复用和分用的功能</li>
<li>差错检测的功能</li>
</ul>
<h4 id="UDP主要特点"><a href="#UDP主要特点" class="headerlink" title="UDP主要特点"></a>UDP主要特点</h4><ul>
<li>无连接</li>
<li>尽最大努力交付</li>
<li>面向报文</li>
<li>没有拥塞控制</li>
<li>支持一对一、一对多、多对一和多对多</li>
<li>首部开销小，只有8字节，而TCP有20字节</li>
</ul>
<h4 id="检验和"><a href="#检验和" class="headerlink" title="检验和"></a>检验和</h4><p>\1.   检验和字段置零，UDP用户数据报凑够偶数字节；</p>
<p>\2.   把所有位（UDP伪首部+UDP首部+UDP数据部分）按16位划分为不同的字；</p>
<p>\3.   计算上述所有16位字的和，如果有进位导致总位数超过16位，则把进位值加到末位；</p>
<p>\4.   将上述计算的和取反即为UDP用户数据报的检验和。</p>
<h4 id="UDP的应用"><a href="#UDP的应用" class="headerlink" title="UDP的应用"></a>UDP的应用</h4><ul>
<li>对传输协议的可靠性要求不高，需要传送的数据不多，使用频率不高。如：DNS服务(域名映射IP)、DHCP服务、SNMP服务等。</li>
<li>实时应用，如：IP电话、视频会议、QQ等。</li>
</ul>
<h4 id="IP、ICMP、UDP、TCP报文首部检验和字段"><a href="#IP、ICMP、UDP、TCP报文首部检验和字段" class="headerlink" title="IP、ICMP、UDP、TCP报文首部检验和字段"></a>IP、ICMP、UDP、TCP报文首部检验和字段</h4><p>校验和算法一样，但作用范围不同。</p>
<ul>
<li>IP校验和只校验IP数据报的首部；</li>
<li>ICMP校验和覆盖整个ICMP报文(首部+数据)；</li>
<li>UDP和TCP校验和不仅覆盖整个报文，而且还有12<br>个字节的伪首部。</li>
</ul>
<h2 id="5-3-传输控制协议TCP-概述"><a href="#5-3-传输控制协议TCP-概述" class="headerlink" title="5.3 传输控制协议TCP 概述"></a>5.3 传输控制协议TCP 概述</h2><h3 id="5-3-1-TCP-最主要的特点"><a href="#5-3-1-TCP-最主要的特点" class="headerlink" title="5.3.1 TCP 最主要的特点"></a>5.3.1 TCP 最主要的特点</h3><ul>
<li>面向连接</li>
<li>只有两个端点</li>
<li>点对点</li>
<li>可靠交付</li>
<li>全双工</li>
<li>面向字节流</li>
</ul>
<p>5.3.2TCP的连接</p>
<ul>
<li><p>TCP 连接的端点叫做<strong>套接字(socket)</strong> 或插口。</p>
</li>
<li><p>端口号+IP地址构成套接字</p>
</li>
</ul>
<p>套接字socket &#x3D; (IP地址: 端口号)</p>
<p>TCP 连接::&#x3D; {socket1, socket2}&#x3D;&#x3D; {(IP1: port1)，(IP2: port2)}</p>
<h2 id="5-4可靠传输的工作原理"><a href="#5-4可靠传输的工作原理" class="headerlink" title="5.4可靠传输的工作原理"></a>5.4可靠传输的工作原理</h2><h3 id="5-4-1-停止等待协议"><a href="#5-4-1-停止等待协议" class="headerlink" title="5.4.1 停止等待协议"></a>5.4.1 停止等待协议</h3><p>理想的传输条件有以下两个特点：</p>
<p>(1)传输信道<strong>不产生差错</strong>。</p>
<p>(2) 不管发送方以多快的速度发送数据，接收方总是<strong>来得及处理</strong>收到的数据。</p>
<ul>
<li><p>每发送完一个分组就停止发送，等待对方的确认。在收到确认后再发送下一个分组。</p>
</li>
<li><p>全双工通信的双方既是发送方也是接收方。</p>
</li>
</ul>
<p>1.无差错情况</p>
<p>发完暂停，等待确认，收到确认后，再发送</p>
<p>2.出现差错</p>
<p>传输过程丢失&#x2F;接收时出错</p>
<p>解决办法：超时重传</p>
<p>3.确认丢失和确认迟到</p>
<ul>
<li>确认丢失</li>
</ul>
<p>此A 在<strong>超时计时器</strong>到期后就要<strong>重传</strong>M1</p>
<p>B接收到后可以1丢弃M1 2向A发送确认</p>
<ul>
<li>确认重传</li>
</ul>
<p>B 对分组M1 的确认迟到</p>
<p>A 会收到重复的确认后丢弃</p>
<p>B 仍然会收到重复的M，丢弃重复的M1，并重传确认分组</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/pVMHaGbQcdZSPux.png"></p>
<p><strong>注意</strong></p>
<ul>
<li>在发送完一个分组后，必须暂时保留已发送的分组的副本，以备重发</li>
<li>分组和确认分组都必须进行编号。</li>
<li>在发送完一个分组后，必须暂时保留已发送的分组的副本，以备重发</li>
</ul>
<p>4信道利用率</p>
<p>停止等待协议的优点是简单，缺点是信道利用率太低。</p>
<h3 id="5-4-2-连续ARQ-协议"><a href="#5-4-2-连续ARQ-协议" class="headerlink" title="5.4.2 连续ARQ 协议"></a>5.4.2 连续ARQ 协议</h3><p>连续ARQ 协议规定，发送方每收到一个确认，就把发送窗口向前<strong>滑动一个分组</strong>的位置。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/OINACmrnEJTuHWB.png"></p>
<h4 id="累计确认"><a href="#累计确认" class="headerlink" title="累计确认"></a>累计确认</h4><p>不必对分组逐个发送确认，对到达的最后一个分组发送确认，表示之前的所有我都收到了</p>
<p>优：容易实现，即使确认丢失也不必重传。</p>
<p>？缺：不能向发送方反映出接收方已经正确收到的所有分组的信息。</p>
<h4 id="Go-back-N（回退N）"><a href="#Go-back-N（回退N）" class="headerlink" title="Go-back-N（回退N）"></a>Go-back-N（回退N）</h4><p>Go-back-N（回退N），表示需要再退回来重传已发送过的N 个分组。</p>
<p>比如A发的前5个分组是12345，B收到1245，由于3开始不联系，B只确认2(即2以前都收到)，A不知道后三个分组下落超时后重传</p>
<p>TCP 连接的每一端都必须设有两个窗口——一个<strong>发送窗口</strong>和一个接<strong>收窗口</strong>。</p>
<h4 id="小结-8"><a href="#小结-8" class="headerlink" title="小结"></a>小结</h4><ul>
<li><p>流水线传输允许发送方连续发送多个分组，而不需要等待对方的确认，从而提高信道利用率。</p>
</li>
<li><p>位于发送窗口内的分组可连续发送出去。</p>
</li>
<li><p>发送方每收到一个确认，就把发送窗口向前滑动一个分组的位置</p>
</li>
<li><p>接收方采用累积确认的方式对按序到达的最后<br>一个分组发送确认。</p>
</li>
</ul>
<h2 id="5-5TCP-报文段的首部格式"><a href="#5-5TCP-报文段的首部格式" class="headerlink" title="5.5TCP 报文段的首部格式"></a>5.5TCP 报文段的首部格式</h2><p>面向字节流，传送的数据单元却是报文段。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/FSuVDcPkohBpa8Z.png"></p>
<p>❗源端口和目的端口字段——各占2 字节：端口是运输层与应用层的服务接口。运输层的复用和分用功能都要通过端口才能实现。</p>
<p>❗序号字段——占4 字节：数据流每个字节都编上一个序号，序号字段的值则指的是本报文段所发送的数据的<strong>第一个字节的序号</strong></p>
<p>❗确认号字段——占4 字节：期望收到对方的<strong>下一个报文段的数据的第一个字节</strong>的序号。 比如发的1234，确认号字段就是5</p>
<p>⭐序号确认号</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/GYQApSb5XJPuhnE.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/eEPzRwSKkXbQUA9.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/Ldb8a9EnXloqG26.png"></p>
<p>数据偏移（即首部长度）——占4 位，它指出TCP 报文段的数据起始处距离TCP 报文段的起始处有多远。“数据偏移”的单位是32 位（以<strong>4 字节</strong>为计算单位）。</p>
<p>保留字段——占6 位 目前为0</p>
<p>紧急URG —— 当URG &#x3D; 1 时，表明<strong>紧急指针</strong>字段有效。它告诉系统此报文段中有紧急数据，应尽快传送(相当于<strong>高优先级</strong>的数据)。</p>
<p>❗确认ACK —— 只有当<strong>ACK &#x3D; 1 时确认号字段才有效</strong>。当ACK &#x3D; 0 时，确认号无效。</p>
<p>推送PSH (PuSH) —— 接收TCP 收到PSH &#x3D; 1 的报文段，就<strong>尽快地交付</strong>接收应用进程，而不再等到整个缓存都填满了后再向上交付。</p>
<p>复位RST (ReSeT) —— 当RST  1 时，表明TCP 连接中出现严重差错（如由于主机崩溃或其他原因），必须释放连接，然后再<strong>重新建立运输连接</strong>。</p>
<p>❗同步SYN —— 同步SYN &#x3D; 1 表示这是一个连接请求或连接接受报文。</p>
<p>❗终止FIN (FINish) —— 用来释放一个连接。FIN &#x3D; 1 表明此报文段的<strong>发送端的数据已发送完毕</strong>，并要求<strong>释放运输连接</strong>。</p>
<p>❗窗口字段—— 占2 字节，窗口字段用来控制对方发送的数据量，单位为字节。TCP 连接的一端<strong>根据设置的缓存空间大小确定自己的接收窗口大小</strong>，然后通知对方以<strong>确定对方的发送窗口的上限</strong>。</p>
<blockquote>
<p>窗口字段指出了现在允许对方发送的数据量。窗口值是经常在动态变化的。</p>
<p>如：设确认号是701，窗口字段是1000。这就表明，从701号算起，发送此报文段的一方还有1000个字节数据（字节序号是701-1700）的接收缓存空间。</p>
</blockquote>
<p>检验和(和IP类似)—— 占2 字节。检验和字段检验的范围包括<strong>首部和数据</strong>这两部分。在计算检验和时，要在TCP 报文段的前面加上12 字<br>节的伪首部。</p>
<p>紧急指针字段—— 占16 位 指出紧急数据多少字节 紧急数据放在本报文段<strong>数据的最前面</strong></p>
<p>选项字段—— 长度可变。TCP 最初只规定了一种选项，即最大报文段长度MSS(Maximum Segment Size，TCP报文段长度减去首部长度)</p>
<p>填充字段:使整个首部长度是4字节的整数倍</p>
<h3 id="小结-9"><a href="#小结-9" class="headerlink" title="小结"></a>小结</h3><ul>
<li>TCP的每条连接都有发送序号和确认号。</li>
<li>序号字段是本报文段所发送的数据的第一个字节的序号。</li>
<li>确认号字段是期望收到对方的下一个报文段的数据的第一个字节的序号。</li>
<li>TCP 连接的一端根据缓存空间大小确定自己的窗口大小，利用窗口字段控制对方发送的数据量。</li>
</ul>
<h2 id="5-6-TCP-可靠传输的实现"><a href="#5-6-TCP-可靠传输的实现" class="headerlink" title="5.6 TCP 可靠传输的实现"></a>5.6 TCP 可靠传输的实现</h2><p>TCP 的滑动窗口是以字节为单位的。</p>
<ul>
<li>根据B 给出的<strong>窗口值</strong>，A 构造出自己的发送窗口。</li>
<li>发送窗口表示：在没有收到B 的确认的情况下，A 可以<strong>连续把窗口</strong>内的数据都发送出去。</li>
<li>发送窗口里面的序号表示<strong>允许发送的序号</strong></li>
<li>显然，窗口越大，发送方就可以在收到对方确认之前连续发送更多的数据，因而可能获得更高的传输效率。</li>
</ul>
<h4 id="小结-10"><a href="#小结-10" class="headerlink" title="小结"></a>小结</h4><p>TCP连接的一端根据另一端给出的窗口值构造<br>自己的发送窗口。<br> TCP连接的一端可以连续把发送窗口内的数据<br>都发送出去，而不需要等待对方的确认。<br> 收到新的确认号，发送窗口向前滑动。</p>
<h3 id="5-6-2-超时重传时间的选择"><a href="#5-6-2-超时重传时间的选择" class="headerlink" title="5.6.2 超时重传时间的选择"></a>5.6.2 超时重传时间的选择</h3><p><strong>重传时间的选择是TCP 最复杂的问题之一。</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/Z73TyxQvr81aIng.png"></p>
<p><strong>TCP 采用了一种自适应算法</strong>它记录一个报文段发出的时间，以及收到相应的确认的时间。这两个时间之差就是报文段的往返时间RTT。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/yX12DH5ZT6cRfum.png"></p>
<p>慢慢更新平均往返更新</p>
<p>通过加权平均往返时间RTTs计算<strong>超时重传时间RTO</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/fFd9UeWvzQc6VJY.png"></p>
<h3 id="5-6-3-选择确认SACK"><a href="#5-6-3-选择确认SACK" class="headerlink" title="5.6.3 选择确认SACK"></a>5.6.3 选择确认SACK</h3><p>缺少部分只发送缺少的不全部重传</p>
<p>TCP 的接收方在接收对方发送过来的数据字节流的序号不连续，结果就形成了一些不连续的字节块。</p>
<p>如果使用选择确认，那么原来首部中的“确认号字段”的用法仍然不变。只是以后在TCP 报文段的首部中都增加了SACK 选项，以便<strong>报告收到的不连续的字节块的边界</strong>。</p>
<h4 id="小结-11"><a href="#小结-11" class="headerlink" title="小结"></a>小结</h4><ul>
<li>TCP 采用<strong>自适应算法</strong>计算报文段的往返时间<br>RTT。</li>
<li>超时重传时间RTO<strong>略大于</strong>往返时间RTT。</li>
</ul>
<h2 id="5-7TCP的流量控制"><a href="#5-7TCP的流量控制" class="headerlink" title="5.7TCP的流量控制"></a>5.7TCP的流量控制</h2><h3 id="5-7-1利用滑动窗口实现流量控制"><a href="#5-7-1利用滑动窗口实现流量控制" class="headerlink" title="5.7.1利用滑动窗口实现流量控制"></a>5.7.1利用滑动窗口实现流量控制</h3><ul>
<li>流量控制(flow control) 就是让发送方的发送速率不要太快，既要让接收方来得及接收，也不要使网络发生拥塞。</li>
</ul>
<p>方法：滑动窗口机制</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/6SxcYyeQFVk1H8A.png"></p>
<p>可能发生的问题：互相等待的死锁</p>
<p>方法：持续计时器</p>
<h4 id="持续计时器"><a href="#持续计时器" class="headerlink" title="持续计时器"></a>持续计时器</h4><p>只要TCP 连接的一方收到对方的零窗口通知（举例的最后一条），就启动该持续计时器。</p>
<p>若持续计时器设置的时间到期，就发送一个零窗口探测报文段（仅携带1 字节的数据），而对方就在确认这个探测报文段时给出了现在的窗口值。</p>
<p>若窗口仍然是零，则收到这个报文段的一方就重新设置持续计时器。</p>
<p>若窗口不是零，则死锁的僵局就可以打破了。</p>
<h2 id="5-8-TCP-的拥塞控制"><a href="#5-8-TCP-的拥塞控制" class="headerlink" title="5.8 TCP 的拥塞控制"></a>5.8 TCP 的拥塞控制</h2><h3 id="5-8-1-拥塞控制的一般原理"><a href="#5-8-1-拥塞控制的一般原理" class="headerlink" title="5.8.1 拥塞控制的一般原理"></a>5.8.1 拥塞控制的一般原理</h3><p>某资源需求超过了提供的可用部分，网络性能变坏，发生拥塞</p>
<p>拥塞问题很复杂</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/ysg6Pt1EQCGLblw.png"></p>
<h4 id="开环控制和闭环控制"><a href="#开环控制和闭环控制" class="headerlink" title="开环控制和闭环控制"></a>开环控制和闭环控制</h4><ul>
<li>开环控制</li>
<li>闭环控制</li>
</ul>
<h3 id="5-8-2-TCP-的拥塞控制方法"><a href="#5-8-2-TCP-的拥塞控制方法" class="headerlink" title="5.8.2 TCP 的拥塞控制方法"></a>5.8.2 TCP 的拥塞控制方法</h3><p>TCP 采用基于窗口的方法进行拥塞控制。该方法属于闭环控制方法。</p>
<h4 id="拥塞判断"><a href="#拥塞判断" class="headerlink" title="拥塞判断"></a>拥塞判断</h4><p>重传定时器超时：超时</p>
<p>收到三个相同（重复）的ACK：丢包</p>
<h4 id="TCP拥塞控制算法"><a href="#TCP拥塞控制算法" class="headerlink" title="TCP拥塞控制算法"></a>TCP拥塞控制算法</h4><table>
<thead>
<tr>
<th>拥塞控制算法</th>
<th>含义</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>慢开始</td>
<td>由小到大逐渐增大拥塞窗口数值</td>
<td>防止拥塞窗口增长过大引起网络拥塞</td>
</tr>
<tr>
<td>拥塞避免</td>
<td>每经过一个往返时间就把发送方的拥塞窗口cwnd加1，而不是加倍，使拥塞窗口cwnd按线性规律缓慢增长</td>
<td>加法增大的特点，按线性规律缓慢增长比慢开始算法的增长速率缓慢很多</td>
</tr>
<tr>
<td>快重传</td>
<td>首先要求接收方不要等待自己发送数据时才进行捎带确认，而是要立即发送确认，即时收到了失序的报文段也要立即发出对已收到的报文段的重复确认。</td>
<td>让发送方尽早知道发生了个别报文段的缺失。发送方只要一连收到三个重复确认，就知道接收方确实没有收到，应当立即重传，因此不会出现超时，发送方也不会误认为出现了网络拥塞</td>
</tr>
<tr>
<td>快恢复</td>
<td>发送方收到三次确认可以认为网络没有发送拥塞，不执行慢开始而执行快恢复，新的拥塞窗口等于当前拥塞窗口的一半，并执行拥塞避免算法进行缓慢线性增长</td>
<td>提高网络传输效率，提升吞吐量</td>
</tr>
</tbody></table>
<p><strong>慢开始(slow-start)</strong></p>
<p>算法的思路：由小到大逐渐增大拥塞窗口数值。</p>
<p>发1，收1</p>
<p>发2，收2</p>
<p>发4，收4</p>
<p>发8，收8</p>
<p>指数级增长</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/hjuLDso74NgeRY9.png"></p>
<p><strong>拥塞避免(congestion avoidance)</strong></p>
<p>避免办法：设定阈值，超过后下一轮只加1。当计时器超时(拥塞)，将阈值改为一半，重新进行慢开始</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/Qq7PRsbBZ4S2vIg.png"></p>
<p><strong>快重传(fast retransmit)</strong></p>
<p>3-ACK确认，发送方改为执行快重传和快恢复算法。</p>
<p>发送方只要一连收到三个重复确认，就知道接收方确实没有收到报文段，因而应当立即进行重传（即“快重传”），这样就不会出现超时，发送方也不就会误认为出现了网络拥塞。</p>
<p>不难看出，快重传并非取消重传计时器，而是在某些情况下可更早地重传丢失的报文段。</p>
<p><strong>快恢复(fast recovery)</strong></p>
<p>由于发送方现在认为网络很可能没有发生拥塞，因此现在不执行慢开始算法，而是执行快恢复算法</p>
<p>可以看出，在拥塞避免阶段，拥塞窗口是按照线性规律增大的。这常称为“加法增大” AI(Additive Increase)。</p>
<p>当出现超时或3个重复的确认时，就要把门限值设置为当前拥塞窗口值的<strong>一半</strong>，并大大减小拥塞窗口的数值。这常称为“乘法减小”MD(Multiplicative Decrease)</p>
<p><strong>乘法减小和加法增大</strong></p>
<table>
<thead>
<tr>
<th></th>
<th>用途</th>
</tr>
</thead>
<tbody><tr>
<td>乘法减小</td>
<td>当出现超时或3个重复的确认时，就要把门限值设置为当前拥塞窗口值的一半，并大大减小拥塞窗口的数值。当网络频繁出现拥塞时，门限值就下降得很快，以大大减少注入到网络中的分组数</td>
</tr>
<tr>
<td>加法增大</td>
<td>在拥塞避免阶段，拥塞窗口是按照线性规律增大的，例如在收到对所有报文段得确认后(即经过一个往返时间)，就把拥塞窗口增加一个MSS大小，使拥塞窗口缓慢增大，防止网络过早出现拥塞。</td>
</tr>
</tbody></table>
<p><strong>小结</strong></p>
<ul>
<li>对网络资源的需求超过了可用资源，网络就会<br>出现拥塞。</li>
<li>TCP 采用基于窗口的方法进行拥塞控制。</li>
<li>拥塞窗口的大小取决于网络的拥塞程度。</li>
<li>发送窗口大小取决于接收方公告的窗口和拥塞窗口。</li>
</ul>
<p>后面的跳过了</p>
<h3 id="5-9-TCP-的运输连接管理"><a href="#5-9-TCP-的运输连接管理" class="headerlink" title="5.9 TCP 的运输连接管理"></a>5.9 TCP 的运输连接管理</h3><h3 id="5-9-1-TCP-的连接建立"><a href="#5-9-1-TCP-的连接建立" class="headerlink" title="5.9.1 TCP 的连接建立"></a>5.9.1 TCP 的连接建立</h3><p>TCP 建立连接的过程叫做握手。握手需要在客户和服务器之间交换三个TCP 报文段。称之为三报文握手。</p>
<p>防止失效又突然传送到了，产生错误</p>
<p>1SYN→</p>
<p>2←SYN+ACK</p>
<p>3ACK→</p>
<p>SYN&#x3D;1说明TCP进行确认，确认包ACK&#x3D;1，ack的值是收到的seq+1</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/8RbK23pQO74mGFz.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/f9CPk18DlFL4qXE.png"></p>
<p><strong>练习</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/A83rSCbiIpyuhtf.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/upCVhtfyoDTQAOi.png"></p>
<h3 id="5-9-2-TCP-的连接释放"><a href="#5-9-2-TCP-的连接释放" class="headerlink" title="5.9.2 TCP 的连接释放"></a>5.9.2 TCP 的连接释放</h3><ul>
<li>数据传输结束后，通信的双方都可释放连接。</li>
<li>TCP 连接释放过程是四报文握手。</li>
</ul>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><ul>
<li>掌握运输层的端口的概念及作用；</li>
<li>掌握UDP、TCP的特点；</li>
<li>可靠传输：停止等待协议, 连续ARQ 协议；</li>
<li>了解UDP、TCP 的首部格式**(源端口、目的端口、序号、确认号、窗口)；**</li>
<li>掌握TCP <strong>可靠传输、流量控制、拥塞控制的实现；</strong></li>
<li>掌握TCP 的<strong>连接建立、连接释放</strong>的过程。</li>
<li></li>
</ul>
<p><strong>TCP 连接处于 FIN-WAIT-1 状态。以下的事件相继发生：</strong></p>
<p>（1）收到 ACK 报文段</p>
<p>（2）收到 FIN 报文段</p>
<p>（3）发生了超时</p>
<p>在每一个事件之后，连接的状态是什么？在每一个事件之后发生的动作是什么？</p>
<p>(1) FIN-WAIT2 等待接收方发送连接释放报文</p>
<p>(2) close-wait 进入关闭等待状态半连接</p>
<p>(3) FIN-WAIT1 重传连接释放报文</p>
<h1 id="第6章应用层"><a href="#第6章应用层" class="headerlink" title="第6章应用层"></a>第6章应用层</h1><h2 id="6-1-域名系统DNS"><a href="#6-1-域名系统DNS" class="headerlink" title="6.1 域名系统DNS"></a>6.1 域名系统DNS</h2><h3 id="6-1-1-域名系统概述"><a href="#6-1-1-域名系统概述" class="headerlink" title="6.1.1 域名系统概述"></a>6.1.1 域名系统概述</h3><p>IP地址不便记忆</p>
<p>管理域名的系统就是DNS (Domain Name System) 。</p>
<h3 id="6-1-2-互联网的域名结构"><a href="#6-1-2-互联网的域名结构" class="headerlink" title="6.1.2 互联网的域名结构"></a>6.1.2 互联网的域名结构</h3><p>互联网采用了层次树状结构的命名方法。<br> 任何一个连接在互联网上的主机或路由器，都有一个唯一的层次结构的名字，即域名。<br> 域名的结构由标号序列组成，各标号之间用点隔开：</p>
<p>各标号分别代表不同级别的域名。</p>
<p>域名只是个逻辑概念，并不代表计算机所在的物理地点。</p>
<h3 id="6-1-3-域名服务器"><a href="#6-1-3-域名服务器" class="headerlink" title="6.1.3 域名服务器"></a>6.1.3 域名服务器</h3><p> 一个服务器所负责管辖的（或有权限的）范围<br>叫做<strong>区(zone)<strong>。<br> 每一个区设置相应的</strong>权限域名服务器</strong>，用来保存该区中的所有主机的域名到IP地址的映射。</p>
<h4 id="四种类型"><a href="#四种类型" class="headerlink" title="四种类型"></a>四种类型</h4><p>根域名服务器</p>
<p>顶级域名服务器</p>
<p>权限域名服务器</p>
<p>本地域名服务器</p>
<h2 id="6-2-FTP"><a href="#6-2-FTP" class="headerlink" title="6.2 FTP"></a>6.2 FTP</h2><h4 id="特点-1"><a href="#特点-1" class="headerlink" title="特点"></a>特点</h4><p>使用TCP</p>
<p>主要功能：减少不同操作系统处理文件不兼容性</p>
<p>使用客户服务器方式。服务器进程由一个主进程负责接受新的请求和若干从属进程负责处理单个请求。</p>
<h4 id="两个连接"><a href="#两个连接" class="headerlink" title="两个连接"></a>两个连接</h4><p>21端口控制连接</p>
<p>20端口数据连接</p>
<h2 id="6-3远程终端协议TELNET"><a href="#6-3远程终端协议TELNET" class="headerlink" title="*6.3远程终端协议TELNET"></a>*6.3远程终端协议TELNET</h2><p>本节了解即可</p>
<p>用户用TELNET 就可在其所在地通过TCP 连接注册（即登录）到远地的另一个主机上（使用主机名或IP 地址）。</p>
<p>用户感觉到好像键盘和显示器是直接连在远地主机上。</p>
<h2 id="6-4万维网www"><a href="#6-4万维网www" class="headerlink" title="6.4万维网www"></a>6.4万维网www</h2><h3 id="概述-1"><a href="#概述-1" class="headerlink" title="概述"></a>概述</h3><p>万维网是一个大规模的、联机式的信息储藏所。并非某种特殊的计算机网络。</p>
<h4 id="工作方式"><a href="#工作方式" class="headerlink" title="工作方式"></a>工作方式</h4><p>以客户-服务器方式工作</p>
<p>浏览器就是在用户计算机上的万维网<strong>客户程序</strong></p>
<p>万维网文档所驻留的计算机则运行<strong>服务器程序</strong>，</p>
<p>客户程序向服务器程序发出请求，服务器程序向客户程序送回客户所要的<strong>万维网文档</strong>。<br>在一个客户程序主窗口上显示出的万维网文档称为**页面(page)**。</p>
<h4 id="解决的问题"><a href="#解决的问题" class="headerlink" title="解决的问题"></a>解决的问题</h4><p>（1）怎样标志分布在整个互联网上的万维网文档？<br>使用URL统一资源定位符，唯一标识</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/WADCSdK9JUN4rQ2.png"></p>
<p>输入URL：</p>
<p>解析域名-建立tcp连接-http请求报文–http响应报文–释放TCP连接</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/7pzaB6Y5jwrG9Vu.png"></p>
<h4 id="代理服务器"><a href="#代理服务器" class="headerlink" title="代理服务器"></a>代理服务器</h4><p>使用高速缓存可减少访问互联网服务器的时延</p>
<h3 id="6-4-4万维网的文档-了解"><a href="#6-4-4万维网的文档-了解" class="headerlink" title="6.4.4万维网的文档 了解"></a>6.4.4万维网的文档 了解</h3><p>超文本标记语言HTML</p>
<h3 id="6-4-5-万维网的信息检索系统-了解"><a href="#6-4-5-万维网的信息检索系统-了解" class="headerlink" title="6.4.5 万维网的信息检索系统 了解"></a>6.4.5 万维网的信息检索系统 了解</h3><h3 id="6-4-6-博客和微博-了解"><a href="#6-4-6-博客和微博-了解" class="headerlink" title="6.4.6 博客和微博  了解"></a>6.4.6 博客和微博  了解</h3><h3 id="小结-12"><a href="#小结-12" class="headerlink" title="小结"></a>小结</h3><ul>
<li>万维网是一个大规模的、联机式的<strong>信息储藏所</strong>；</li>
<li>万维网用<strong>链接</strong>的方法从互联网上的一个站点访问另一个站点；</li>
<li>万维网以<strong>客户服务器</strong>方式工作；</li>
<li>万维网使用<strong>URL</strong> 来标志文档；</li>
<li>万维网使用<strong>HTTP协议</strong>在客户程序与服务器程序之间进行交互；</li>
<li>万维网使用<strong>HTML语言</strong>令页面显示出来；</li>
<li>可以使用<strong>搜索引擎</strong>在万维网上查找信息。</li>
</ul>
<h2 id="6-5电子邮件"><a href="#6-5电子邮件" class="headerlink" title="6.5电子邮件"></a>6.5电子邮件</h2><p>发件人调用PC 中的用户代理撰写和编辑要发<br>送的邮件。</p>
<p>发件人的用户代理把邮件用<strong>SMTP 协议</strong>发给发送方邮件服务器，</p>
<p>SMTP 服务器把邮件临时存放在邮件缓存队列中，等待发送。</p>
<p>发送方邮件服务器的SMTP 客户与接收方邮件服务器的SMTP 服务器建立TCP 连接，然后就把邮件缓存队列中的邮件依次发送出去。</p>
<h3 id="6-5-2-简单邮件传送协议SMTP"><a href="#6-5-2-简单邮件传送协议SMTP" class="headerlink" title="6.5.2 简单邮件传送协议SMTP"></a>6.5.2 简单邮件传送协议SMTP</h3><p>使用<strong>客户服务器</strong>方式</p>
<h4 id="SMTP通信的三个阶段"><a href="#SMTP通信的三个阶段" class="headerlink" title="SMTP通信的三个阶段"></a>SMTP通信的三个阶段</h4><ol>
<li><strong>连接建立</strong>：连接是在发送主机的SMTP 客户和接收主机的SMTP 服务器之间建立的。SMTP不使用中间的邮件服务器。</li>
<li><strong>邮件传送</strong></li>
<li><strong>连接释放</strong>：邮件发送完毕后，SMTP 应释放<br>TCP 连接</li>
</ol>
<h3 id="6-5-4-邮件读取协议POP3-和IMAP"><a href="#6-5-4-邮件读取协议POP3-和IMAP" class="headerlink" title="6.5.4 邮件读取协议POP3 和IMAP"></a>6.5.4 邮件读取协议POP3 和IMAP</h3><p>非常简单、但功能有限的邮件读取协议，现在使用的是它的第三个版本POP3。</p>
<p>POP 也使用客户-服务器的工作方式。</p>
<p>缺陷：读取完就在服务器删掉了</p>
<h4 id="IMAP-协议"><a href="#IMAP-协议" class="headerlink" title="IMAP 协议"></a>IMAP 协议</h4><p>客户服务器，IMAP 是一个联机协议</p>
<p>需要的时候才传到用户计算机，附件可以先不下载，存在服务器，节省资源</p>
<h3 id="6-5-5-基于万维网的电子邮件"><a href="#6-5-5-基于万维网的电子邮件" class="headerlink" title="6.5.5 基于万维网的电子邮件"></a>6.5.5 基于万维网的电子邮件</h3><p> 电子邮件从A 发送到网易邮件服务器<strong>使用HTTP 协议</strong>。<br> 两个邮件服务器之间的传送使用<strong>SMTP</strong>。<br> 邮件从新浪邮件服务器传送到B 是使用<strong>HTTP 协议</strong>。</p>
<blockquote>
<p>万维网电子邮件的好处：只要能够找到上网的计算机，打开任何一种浏览器就可以非常方便地收发电子邮件。</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/hr8XmjIZlqsVFWa.png"></p>
<h3 id="6-5-6-通用互联网邮件扩充MIME"><a href="#6-5-6-通用互联网邮件扩充MIME" class="headerlink" title="6.5.6 通用互联网邮件扩充MIME"></a>6.5.6 通用互联网邮件扩充MIME</h3><p>受限于ASCII，无法传输</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/7NI14VChzauGLvp.png"></p>
<h3 id="错题-1"><a href="#错题-1" class="headerlink" title="错题"></a>错题</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/j3V7EKaGOmRFlke.png"></p>
<h2 id="6-6-动态主机配置协议DHCP"><a href="#6-6-动态主机配置协议DHCP" class="headerlink" title="6.6 动态主机配置协议DHCP"></a>6.6 动态主机配置协议DHCP</h2><p>互联网广泛使用的动态主机配置协议DHCP提供了<strong>即插即用连网</strong>的机制</p>
<h4 id="客户-服务器方式"><a href="#客户-服务器方式" class="headerlink" title="客户-服务器方式"></a>客户-服务器方式</h4><p>需要IP 地址的主机在启动时就向DHCP 服务器<strong>广播发送</strong>发现报文（DHCPDISCOVER），这时该主机就成为DHCP 客户。</p>
<p>DHCP 服务器先在其数据库中<strong>查找</strong>该计算机的<strong>配置信息</strong>。若找到，则返回找到的信息。若找不到，则从服务器的IP 地址池(address pool)中取一个地址<strong>分配给该计算机</strong>。DHCP 服务器的回答报文叫做提供报文（DHCPOFFER）。</p>
<h4 id="DHCP-中继代理-relay-agent"><a href="#DHCP-中继代理-relay-agent" class="headerlink" title="DHCP 中继代理(relay agent)"></a>DHCP 中继代理(relay agent)</h4><p>原因：使得DHCP 服务器的数量太多。代理它配置了DHCP 服务器的IP 地址信息。</p>
<p>方法：当DHCP 中继代理收到主机发送的发现报文后，就以<strong>单播</strong>方式向DHCP 服务器转发此报文，并等待其回答。收到DHCP 服务器回答的提供报文后，DHCP 中继代理再将此提供报文发回给主机。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/07/09/ElcWOy3pi5oFTLv.png"></p>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="/./images/ava.jpg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="/./images/ava.jpg" title="头像" alt="头像"></a><div class="post-copyright__author_name">JJuprising</div><div class="post-copyright__author_desc">蓝天白云,花草树木</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://jjuprising.github.io/2023/07/09/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%94%E8%AE%B0/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://jjuprising.github.io/2023/07/09/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%94%E8%AE%B0/')">计算机网络笔记</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://jjuprising.github.io/2023/07/09/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%94%E8%AE%B0/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=计算机网络笔记&amp;url=https://jjuprising.github.io/2023/07/09/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%94%E8%AE%B0/&amp;pic=/img/404.jpg" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://JJuprising.github.io" target="_blank">yjchen</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/%E7%AC%94%E8%AE%B0/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>笔记<span class="tagsPageCount">8</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="/img/default_cover.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/06/08/Android-Studio%E9%99%8D%E9%9B%A8%E7%83%AD%E5%8A%9B%E5%9B%BE/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="/img/default_cover.jpg" onerror="onerror=null;src='https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Android Studio降雨热力图</div></div></a></div><div class="next-post pull-right"><a href="/2023/07/09/%E4%BA%BA%E6%9C%BA%E4%BA%A4%E4%BA%92%E7%AC%94%E8%AE%B0/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="/img/404.jpg" onerror="onerror=null;src='https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">人机交互笔记</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/2023/01/02/Linux%E7%AC%94%E8%AE%B0/" title="Linux笔记"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://www.silicon.es/wp-content/uploads/2016/10/linux-logo-2-684x500.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-01-02</div><div class="title">Linux笔记</div></div></a></div><div><a href="/2023/10/11/latex%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" title="latex常用命令"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/10/17/bGawt1HvRmexfpI.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-10-11</div><div class="title">latex常用命令</div></div></a></div><div><a href="/2023/07/09/%E4%BA%BA%E6%9C%BA%E4%BA%A4%E4%BA%92%E7%AC%94%E8%AE%B0/" title="人机交互笔记"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="/img/404.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-07-09</div><div class="title">人机交互笔记</div></div></a></div><div><a href="/2023/07/10/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AC%94%E8%AE%B0/" title="数据库笔记"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="/img/default_cover.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-07-10</div><div class="title">数据库笔记</div></div></a></div><div><a href="/2022/11/16/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="数据结构学习笔记"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="/img/404.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2022-11-16</div><div class="title">数据结构学习笔记</div></div></a></div><div><a href="/2023/07/10/%E8%BD%AF%E4%BB%B6%E9%9C%80%E6%B1%82%E7%AC%94%E8%AE%B0/" title="软件需求笔记"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="/img/default_cover.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-07-10</div><div class="title">软件需求笔记</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="/./images/ava.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://bu.dusays.com/2021/01/15/8b962544da5c0.png" alt="status"/></div></div><div class="author-info__description"></div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">JJuprising</h1><div class="author-info__desc">蓝天白云,花草树木</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/JJuprising" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="social-icon faa-parent animated-hover" href="https://www.zhihu.com/people/bo-yi-shu-qi-49" target="_blank" title="知乎"><i class="anzhiyufont anzhiyu-icon-box-archive"></i></a></div></div></div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://bu.dusays.com/2023/01/13/63c02edf44033.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(https://bu.dusays.com/2023/05/13/645fa415e8694.png) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%94%99%E9%A2%98"><span class="toc-number">1.</span> <span class="toc-text">错题</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80"><span class="toc-number">2.</span> <span class="toc-text">一</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%A1%E7%BD%91%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">2.1.</span> <span class="toc-text">计网的作用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0"><span class="toc-number">2.2.</span> <span class="toc-text">概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%84%E6%88%90"><span class="toc-number">2.3.</span> <span class="toc-text">组成</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%B5%E8%B7%AF%E4%BA%A4%E6%8D%A2"><span class="toc-number">2.3.1.</span> <span class="toc-text">电路交换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8A%A5%E6%96%87%E4%BA%A4%E6%8D%A2"><span class="toc-number">2.3.2.</span> <span class="toc-text">报文交换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E4%BA%A4%E6%8D%A2"><span class="toc-number">2.3.3.</span> <span class="toc-text">分组交换</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E5%99%A8"><span class="toc-number">2.3.3.1.</span> <span class="toc-text">路由器</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%AD%90%E4%B8%89%E7%A7%8D%E4%BA%A4%E6%8D%A2%E6%AF%94%E8%BE%83"><span class="toc-number">2.3.4.</span> <span class="toc-text">⭐三种交换比较</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%A1%E7%BD%91%E5%9C%A8%E6%88%91%E5%9B%BD%E7%9A%84%E5%8F%91%E5%B1%95"><span class="toc-number">2.4.</span> <span class="toc-text">计网在我国的发展</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9A%84%E7%B1%BB%E5%88%AB"><span class="toc-number">2.5.</span> <span class="toc-text">计算机网络的类别</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89"><span class="toc-number">2.5.1.</span> <span class="toc-text">定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E7%B1%BB"><span class="toc-number">2.5.2.</span> <span class="toc-text">分类</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E8%B7%AF%E7%9A%84%E6%80%A7%E8%83%BD"><span class="toc-number">2.6.</span> <span class="toc-text">计算机网路的性能</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87"><span class="toc-number">2.6.1.</span> <span class="toc-text">性能指标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%9E%E6%80%A7%E8%83%BD%E7%89%B9%E5%BE%81"><span class="toc-number">2.6.2.</span> <span class="toc-text">非性能特征</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9A%84%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84"><span class="toc-number">2.7.</span> <span class="toc-text">计算机网络的体系结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E7%9A%84%E5%BD%A2%E6%88%90"><span class="toc-number">2.7.1.</span> <span class="toc-text">体系结构的形成</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%8F%E8%AE%AE%E4%B8%8E%E5%88%92%E5%88%86%E5%B1%82%E6%AC%A1"><span class="toc-number">2.7.2.</span> <span class="toc-text">协议与划分层次</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%89%E7%A7%8D%E5%88%86%E5%B1%82%E6%A6%82%E5%BF%B5"><span class="toc-number">2.7.2.1.</span> <span class="toc-text">三种分层概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%94%E5%B1%82%E5%8D%8F%E8%AE%AE"><span class="toc-number">2.7.2.2.</span> <span class="toc-text">五层协议</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%8F%E8%AE%AE%E4%B8%8E%E6%9C%8D%E5%8A%A1%E6%9C%89%E4%BD%95%E5%8C%BA%E5%88%AB%EF%BC%9F%E6%9C%89%E4%BD%95%E5%85%B3%E7%B3%BB%EF%BC%9F"><span class="toc-number">2.7.2.3.</span> <span class="toc-text">协议与服务有何区别？有何关系？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E4%BA%9B%E5%90%8D%E8%AF%8D"><span class="toc-number">2.8.</span> <span class="toc-text">一些名词</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C-%E7%89%A9%E7%90%86%E5%B1%82"><span class="toc-number">3.</span> <span class="toc-text">二 物理层</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BB%E8%A6%81%E4%BB%BB%E5%8A%A1"><span class="toc-number">3.1.</span> <span class="toc-text">主要任务</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E9%80%9A%E4%BF%A1"><span class="toc-number">3.2.</span> <span class="toc-text">数据通信</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E5%9E%8B"><span class="toc-number">3.2.1.</span> <span class="toc-text">模型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%A1%E9%81%93"><span class="toc-number">3.2.2.</span> <span class="toc-text">信道</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E7%BC%96%E7%A0%81%E6%96%B9%E5%BC%8F"><span class="toc-number">3.2.2.1.</span> <span class="toc-text">常见编码方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E7%9A%84%E5%B8%A6%E9%80%9A%E8%B0%83%E5%88%B6%E6%96%B9%E6%B3%95"><span class="toc-number">3.2.2.2.</span> <span class="toc-text">基本的带通调制方法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%AD%90%E4%BF%A1%E9%81%93%E7%9A%84%E6%9E%81%E9%99%90%E5%AE%B9%E9%87%8F"><span class="toc-number">3.2.3.</span> <span class="toc-text">⭐信道的极限容量</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BC%A0%E8%BE%93%E5%AA%92%E4%BD%93"><span class="toc-number">3.3.</span> <span class="toc-text">传输媒体</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%BC%E5%BC%95%E5%9E%8B"><span class="toc-number">3.3.1.</span> <span class="toc-text">导引型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%8C%E7%BB%9E%E7%BA%BF"><span class="toc-number">3.3.1.1.</span> <span class="toc-text">双绞线</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%8C%E8%BD%B4%E7%94%B5%E7%BC%86"><span class="toc-number">3.3.1.2.</span> <span class="toc-text">同轴电缆</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%89%E7%BC%86"><span class="toc-number">3.3.1.3.</span> <span class="toc-text">光缆</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%9E%E5%AF%BC%E5%BC%95%E5%9E%8B"><span class="toc-number">3.3.2.</span> <span class="toc-text">非导引型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9F%AD%E6%B3%A2%E9%80%9A%E4%BF%A1"><span class="toc-number">3.3.2.1.</span> <span class="toc-text">短波通信</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BE%AE%E6%B3%A2%E9%80%9A%E4%BF%A1"><span class="toc-number">3.3.2.2.</span> <span class="toc-text">微波通信</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E2%AD%90%E4%BF%A1%E9%81%93%E5%A4%8D%E7%94%A8%E6%8A%80%E6%9C%AF"><span class="toc-number">3.4.</span> <span class="toc-text">⭐信道复用技术</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A2%91%E5%88%86%E5%A4%8D%E7%94%A8%E3%80%81%E6%97%B6%E5%88%86%E5%A4%8D%E7%94%A8%E5%92%8C%E7%BB%9F%E8%AE%A1%E6%97%B6%E5%88%86%E5%A4%8D%E7%94%A8"><span class="toc-number">3.4.1.</span> <span class="toc-text">频分复用、时分复用和统计时分复用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A2%91%E5%88%86%E5%A4%8D%E7%94%A8"><span class="toc-number">3.4.1.1.</span> <span class="toc-text">频分复用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%B6%E5%88%86%E5%A4%8D%E7%94%A8"><span class="toc-number">3.4.1.2.</span> <span class="toc-text">时分复用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A2%E5%88%86%E5%A4%8D%E7%94%A8"><span class="toc-number">3.4.1.3.</span> <span class="toc-text">波分复用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%AD%90%E7%A0%81%E5%88%86%E5%A4%8D%E7%94%A8CDMA"><span class="toc-number">3.4.1.4.</span> <span class="toc-text">⭐码分复用CDMA</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%A0%81%E7%89%87%E5%BA%8F%E5%88%97"><span class="toc-number">3.4.1.4.1.</span> <span class="toc-text">码片序列</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BA%94%E7%94%A8"><span class="toc-number">3.4.1.4.2.</span> <span class="toc-text">应用</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BE%8B%E9%A2%98"><span class="toc-number">3.5.</span> <span class="toc-text">例题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E5%AD%97%E4%BC%A0%E8%BE%93%E7%B3%BB%E7%BB%9F"><span class="toc-number">3.6.</span> <span class="toc-text">数字传输系统</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%8C%E6%AD%A5%E5%85%89%E7%BA%A4%E7%BD%91SONET"><span class="toc-number">3.6.1.</span> <span class="toc-text">同步光纤网SONET</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%8C%E6%AD%A5%E6%95%B0%E5%AD%97%E5%BA%8F%E5%88%97SDH"><span class="toc-number">3.6.2.</span> <span class="toc-text">同步数字序列SDH</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%BD%E5%B8%A6%E6%8E%A5%E5%85%A5%E6%8A%80%E6%9C%AF"><span class="toc-number">3.7.</span> <span class="toc-text">宽带接入技术</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ADSL%E6%8A%80%E6%9C%AF"><span class="toc-number">3.7.1.</span> <span class="toc-text">ADSL技术</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%89%E7%BA%A4%E5%90%8C%E8%BD%B4%E6%B7%B7%E5%90%88%E7%BD%91%EF%BC%88HFC%E7%BD%91%EF%BC%89"><span class="toc-number">3.7.2.</span> <span class="toc-text">光纤同轴混合网（HFC网）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#FTTx%E6%8A%80%E6%9C%AF"><span class="toc-number">3.7.3.</span> <span class="toc-text">FTTx技术</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%F0%9F%96%BC%E5%9B%BE%E5%BA%8A%E8%87%B3%E6%AD%A4%E4%B8%BA%E6%AD%A2"><span class="toc-number">4.</span> <span class="toc-text">🖼图床至此为止</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82"><span class="toc-number">5.</span> <span class="toc-text">三 数据链路层</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%92%8C%E5%B8%A7"><span class="toc-number">5.1.</span> <span class="toc-text">数据链路和帧</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E4%B8%AA%E5%9F%BA%E6%9C%AC%E9%97%AE%E9%A2%98"><span class="toc-number">5.1.1.</span> <span class="toc-text">三个基本问题</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B0%81%E8%A3%85%E6%88%90%E5%B8%A7"><span class="toc-number">5.1.1.1.</span> <span class="toc-text">封装成帧</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%8F%E6%98%8E%E4%BC%A0%E8%BE%93"><span class="toc-number">5.1.1.2.</span> <span class="toc-text">透明传输</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B7%AE%E9%94%99%E6%8E%A7%E5%88%B6"><span class="toc-number">5.1.1.3.</span> <span class="toc-text">差错控制</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2%E7%82%B9%E5%AF%B9%E7%82%B9%E5%8D%8F%E8%AE%AEPPP"><span class="toc-number">5.2.</span> <span class="toc-text">3.2点对点协议PPP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-2PPP-%E5%8D%8F%E8%AE%AE%E7%9A%84%E5%B8%A7%E6%A0%BC%E5%BC%8F"><span class="toc-number">5.2.1.</span> <span class="toc-text">3.2.2PPP 协议的帧格式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%8F%E6%98%8E%E4%BC%A0%E8%BE%93%E9%97%AE%E9%A2%98"><span class="toc-number">5.2.1.1.</span> <span class="toc-text">透明传输问题</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3%E4%BD%BF%E7%94%A8%E5%B9%BF%E6%92%AD%E4%BF%A1%E9%81%93%E7%9A%84%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82"><span class="toc-number">5.3.</span> <span class="toc-text">3.3使用广播信道的数据链路层</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#CSMA-x2F-CD%E5%8D%8F%E8%AE%AE"><span class="toc-number">5.3.0.1.</span> <span class="toc-text">CSMA&#x2F;CD协议</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BA%89%E7%94%A8%E6%9C%9F"><span class="toc-number">5.3.0.1.1.</span> <span class="toc-text">争用期</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%8C%87%E6%95%B0%E7%B1%BB%E5%9E%8B%E9%80%80%E9%81%BF%E7%AE%97%E6%B3%95"><span class="toc-number">5.3.0.1.2.</span> <span class="toc-text">二进制指数类型退避算法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%A6%81%E7%82%B9"><span class="toc-number">5.3.0.1.3.</span> <span class="toc-text">要点</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E9%9B%86%E7%BA%BF%E5%99%A8%E7%9A%84%E6%98%9F%E5%BD%A2%E6%8B%93%E6%89%91"><span class="toc-number">5.3.1.</span> <span class="toc-text">使用集线器的星形拓扑</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%82%E6%95%B0%CE%B1%E4%B8%8E%E5%88%A9%E7%94%A8%E7%8E%87"><span class="toc-number">5.3.1.1.</span> <span class="toc-text">参数α与利用率</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E7%BD%91%E7%9A%84MAC%E5%B1%82"><span class="toc-number">5.3.2.</span> <span class="toc-text">以太网的MAC层</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#MAC%E5%B1%82%E7%A1%AC%E4%BB%B6%E5%9C%B0%E5%9D%80"><span class="toc-number">5.3.2.1.</span> <span class="toc-text">MAC层硬件地址</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%82%E9%85%8D%E5%99%A8%E6%A3%80%E6%9F%A5MAC%E5%9C%B0%E5%9D%80"><span class="toc-number">5.3.2.2.</span> <span class="toc-text">适配器检查MAC地址</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-4-%E6%89%A9%E5%B1%95%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="toc-number">5.4.</span> <span class="toc-text">3.4 扩展以太网</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%A8%E7%89%A9%E7%90%86%E5%B1%82%E6%89%A9%E5%B1%95%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="toc-number">5.4.1.</span> <span class="toc-text">在物理层扩展以太网</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%A8%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E6%89%A9%E5%B1%95%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="toc-number">5.4.2.</span> <span class="toc-text">在数据链路层扩展以太网</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E7%BD%91%E4%BA%A4%E6%8D%A2%E6%9C%BA"><span class="toc-number">5.4.2.1.</span> <span class="toc-text">以太网交换机</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%8E%E6%80%BB%E7%BA%BF%E4%BB%A5%E5%A4%AA%E7%BD%91%E5%88%B0%E6%98%9F%E5%BD%A2%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="toc-number">5.4.2.2.</span> <span class="toc-text">从总线以太网到星形以太网</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%99%9A%E6%8B%9F%E5%B1%80%E5%9F%9F%E7%BD%91"><span class="toc-number">5.4.3.</span> <span class="toc-text">虚拟局域网</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-5-%E9%AB%98%E9%80%9F%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="toc-number">5.5.</span> <span class="toc-text">3.5 高速以太网</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9B-%E7%BD%91%E7%BB%9C%E5%B1%82"><span class="toc-number">6.</span> <span class="toc-text">四 网络层</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-%E7%BD%91%E9%99%85%E5%8D%8F%E8%AE%AEIP"><span class="toc-number">6.1.</span> <span class="toc-text">4.2 网际协议IP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-1-%E8%99%9A%E6%8B%9F%E4%BA%92%E8%BF%9E%E7%BD%91%E7%BB%9C"><span class="toc-number">6.1.1.</span> <span class="toc-text">4.2.1 虚拟互连网络</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-2-%E5%88%86%E7%B1%BB%E7%9A%84IP%E5%9C%B0%E5%9D%80"><span class="toc-number">6.1.2.</span> <span class="toc-text">4.2.2 分类的IP地址</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%82%B9%E5%88%86%E5%8D%81%E8%BF%9B%E5%88%B6%E8%AE%B0%E6%B3%95"><span class="toc-number">6.1.2.1.</span> <span class="toc-text">点分十进制记法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#IP%E5%9C%B0%E5%9D%80%E7%9A%84%E9%87%8D%E8%A6%81%E7%89%B9%E7%82%B9"><span class="toc-number">6.1.2.2.</span> <span class="toc-text">IP地址的重要特点</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93"><span class="toc-number">6.1.3.</span> <span class="toc-text">小结</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-3-IP%E5%9C%B0%E5%9D%80%E4%B8%8E%E7%A1%AC%E4%BB%B6%E5%9C%B0%E5%9D%80"><span class="toc-number">6.1.4.</span> <span class="toc-text">4.2.3 IP地址与硬件地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-4-%E5%9C%B0%E5%9D%80%E8%A7%A3%E6%9E%90%E5%8D%8F%E8%AE%AEARP"><span class="toc-number">6.1.5.</span> <span class="toc-text">4.2.4 地址解析协议ARP</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E6%88%91%E4%BB%AC%E4%B8%8D%E7%9B%B4%E6%8E%A5%E4%BD%BF%E7%94%A8%E7%A1%AC%E4%BB%B6%E5%9C%B0%E5%9D%80%E8%BF%9B%E8%A1%8C%E9%80%9A%E4%BF%A1%EF%BC%9F"><span class="toc-number">6.1.5.1.</span> <span class="toc-text">为什么我们不直接使用硬件地址进行通信？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-1"><span class="toc-number">6.1.5.2.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-5IP%E6%95%B0%E6%8D%AE%E6%8A%A5%E7%9A%84%E6%A0%BC%E5%BC%8F"><span class="toc-number">6.1.6.</span> <span class="toc-text">4.2.5IP数据报的格式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#IP-%E6%95%B0%E6%8D%AE%E6%8A%A5%E9%A6%96%E9%83%A8%E7%9A%84%E5%9B%BA%E5%AE%9A%E9%83%A8%E5%88%86%E4%B8%AD%E7%9A%84%E5%90%84%E5%AD%97%E6%AE%B5"><span class="toc-number">6.1.6.1.</span> <span class="toc-text">IP 数据报首部的固定部分中的各字段</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%BB%E4%BA%A1%E4%B9%8Bping"><span class="toc-number">6.1.6.2.</span> <span class="toc-text">死亡之ping</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0"><span class="toc-number">6.1.6.3.</span> <span class="toc-text">练习</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-2"><span class="toc-number">6.1.6.4.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-6-IP-%E5%B1%82%E8%BD%AC%E5%8F%91%E5%88%86%E7%BB%84%E7%9A%84%E6%B5%81%E7%A8%8B"><span class="toc-number">6.1.7.</span> <span class="toc-text">4.2.6 IP 层转发分组的流程</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E2%9A%A04-3%E5%88%92%E5%88%86%E5%AD%90%E7%BD%91%E5%92%8C%E6%9E%84%E9%80%A0%E8%B6%85%E7%BD%91"><span class="toc-number">6.2.</span> <span class="toc-text">⚠4.3划分子网和构造超网</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-1%E5%88%92%E5%88%86%E5%AD%90%E7%BD%91"><span class="toc-number">6.2.1.</span> <span class="toc-text">4.3.1划分子网</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%90%E7%BD%91%E6%8E%A9%E7%A0%81"><span class="toc-number">6.2.1.1.</span> <span class="toc-text">子网掩码</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-2-%E4%BD%BF%E7%94%A8%E5%AD%90%E7%BD%91%E6%97%B6%E5%88%86%E7%BB%84%E7%9A%84%E8%BD%AC%E5%8F%91"><span class="toc-number">6.2.2.</span> <span class="toc-text">4.3.2 使用子网时分组的转发</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-3-%E6%97%A0%E5%88%86%E7%B1%BB%E7%BC%96%E5%9D%80-CIDR"><span class="toc-number">6.2.3.</span> <span class="toc-text">4.3.3 无分类编址 CIDR</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E8%81%9A%E5%90%88"><span class="toc-number">6.2.3.1.</span> <span class="toc-text">路由聚合</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9E%84%E6%88%90%E8%B6%85%E7%BD%91"><span class="toc-number">6.2.3.2.</span> <span class="toc-text">构成超网</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%80%E9%95%BF%E5%89%8D%E7%BC%80%E5%8C%B9%E9%85%8D"><span class="toc-number">6.2.3.3.</span> <span class="toc-text">最长前缀匹配</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C%E5%8F%89%E7%BA%BF%E7%B4%A2%E6%B3%95"><span class="toc-number">6.2.3.4.</span> <span class="toc-text">二叉线索法</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-4%E7%BD%91%E9%99%85%E6%8E%A7%E5%88%B6%E6%8A%A5%E6%96%87%E5%8D%8F%E8%AE%AEICMP"><span class="toc-number">6.3.</span> <span class="toc-text">4.4网际控制报文协议ICMP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-1ICMP%E6%8A%A5%E6%96%87%E7%9A%84%E7%A7%8D%E7%B1%BB"><span class="toc-number">6.3.1.</span> <span class="toc-text">4.4.1ICMP报文的种类</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ICMP-%E5%B7%AE%E9%94%99%E6%8A%A5%E5%91%8A%E6%8A%A5%E6%96%87"><span class="toc-number">6.3.1.1.</span> <span class="toc-text">ICMP 差错报告报文</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ICMP-%E8%AF%A2%E9%97%AE%E6%8A%A5%E6%96%87"><span class="toc-number">6.3.1.2.</span> <span class="toc-text">ICMP 询问报文</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-2ICMP%E7%9A%84%E5%BA%94%E7%94%A8%E8%B7%9D%E7%A6%BB"><span class="toc-number">6.3.2.</span> <span class="toc-text">4.4.2ICMP的应用距离</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#PING-Packet-InterNet-Groper"><span class="toc-number">6.3.2.1.</span> <span class="toc-text">PING(Packet InterNet Groper)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Traceroute"><span class="toc-number">6.3.2.2.</span> <span class="toc-text">Traceroute</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-3"><span class="toc-number">6.3.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-5%E4%BA%92%E8%81%94%E7%BD%91%E7%9A%84%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE"><span class="toc-number">6.4.</span> <span class="toc-text">4.5互联网的路由选择协议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-1%E6%9C%89%E5%85%B3%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE%E7%9A%84%E5%87%A0%E4%B8%AA%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">6.4.1.</span> <span class="toc-text">4.5.1有关路由选择协议的几个基本概念</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E5%B1%82%E6%AC%A1%E7%9A%84%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE"><span class="toc-number">6.4.1.1.</span> <span class="toc-text">分层次的路由选择协议</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%92%E8%81%94%E7%BD%91%E6%9C%89%E4%B8%A4%E5%A4%A7%E7%B1%BB%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE"><span class="toc-number">6.4.1.2.</span> <span class="toc-text">互联网有两大类路由选择协议</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-4"><span class="toc-number">6.4.1.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-2RIP%E5%86%85%E9%83%A8%E7%BD%91%E5%85%B3%E5%8D%8F%E8%AE%AE"><span class="toc-number">6.4.2.</span> <span class="toc-text">4.5.2RIP内部网关协议</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%B9%E7%82%B9"><span class="toc-number">6.4.2.1.</span> <span class="toc-text">特点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RIP2%E6%8A%A5%E6%96%87"><span class="toc-number">6.4.2.2.</span> <span class="toc-text">RIP2报文</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-5"><span class="toc-number">6.4.2.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#OSPF%E5%86%85%E9%83%A8%E7%BD%91%E5%85%B3%E5%8D%8F%E8%AE%AE"><span class="toc-number">6.4.3.</span> <span class="toc-text">OSPF内部网关协议</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%92%E5%88%86%E5%8C%BA%E5%9F%9F"><span class="toc-number">6.4.3.1.</span> <span class="toc-text">划分区域</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-6"><span class="toc-number">6.4.3.2.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-4BGP%E5%A4%96%E9%83%A8%E7%BD%91%E5%85%B3%E5%8D%8F%E8%AE%AE"><span class="toc-number">6.4.4.</span> <span class="toc-text">*4.5.4BGP外部网关协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-5%E8%B7%AF%E7%94%B1%E5%99%A8%E7%9A%84%E6%9E%84%E6%88%90"><span class="toc-number">6.4.5.</span> <span class="toc-text">*4.5.5路由器的构成</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-6-IPV6"><span class="toc-number">6.5.</span> <span class="toc-text">4.6 IPV6</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-6-1-IPv6%E7%9A%84%E5%9F%BA%E6%9C%AC%E9%A6%96%E9%83%A8"><span class="toc-number">6.5.1.</span> <span class="toc-text">4.6.1 IPv6的基本首部</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-6-2-IPv6%E7%9A%84%E5%9C%B0%E5%9D%80"><span class="toc-number">6.5.2.</span> <span class="toc-text">4.6.2 IPv6的地址</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%92%E5%88%86%E5%8D%81%E5%85%AD%E8%BF%9B%E5%88%B6"><span class="toc-number">6.5.2.1.</span> <span class="toc-text">冒分十六进制</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-6-3-%E4%BB%8EIPv4%E5%90%91IPv6%E8%BF%87%E6%B8%A1"><span class="toc-number">6.5.3.</span> <span class="toc-text">4.6.3 从IPv4向IPv6过渡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-6-4-ICMPv6"><span class="toc-number">6.5.4.</span> <span class="toc-text">*4.6.4 ICMPv6</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-8-%E8%99%9A%E6%8B%9F%E4%B8%93%E7%94%A8%E7%BD%91VPN%E5%92%8C%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2NAT"><span class="toc-number">6.6.</span> <span class="toc-text">4.8 虚拟专用网VPN和网络地址转换NAT</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-8-1-%E8%99%9A%E6%8B%9F%E4%B8%93%E7%94%A8%E7%BD%91VPN"><span class="toc-number">6.6.1.</span> <span class="toc-text">4.8.1 虚拟专用网VPN</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%99%9A%E6%8B%9F%E4%B8%93%E7%94%A8%E7%BD%91"><span class="toc-number">6.6.1.1.</span> <span class="toc-text">虚拟专用网</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%9C%E7%A8%8B%E6%8E%A5%E5%85%A5VPN"><span class="toc-number">6.6.1.2.</span> <span class="toc-text">远程接入VPN</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-7"><span class="toc-number">6.6.1.3.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-8-2-%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2NAT"><span class="toc-number">6.6.2.</span> <span class="toc-text">4.8.2 网络地址转换NAT</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-9-%E5%A4%9A%E5%8D%8F%E8%AE%AE%E6%A0%87%E8%AE%B0%E4%BA%A4%E6%8D%A2MPLS"><span class="toc-number">6.7.</span> <span class="toc-text">*4.9 多协议标记交换MPLS</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%AC%E7%AB%A0%E6%80%BB%E7%BB%93"><span class="toc-number">6.7.1.</span> <span class="toc-text">本章总结</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5%E4%BC%A0%E8%BE%93%E5%B1%82"><span class="toc-number">7.</span> <span class="toc-text">5传输层</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1-%E8%BF%90%E8%BE%93%E5%B1%82%E5%8D%8F%E8%AE%AE%E6%A6%82%E8%BF%B0"><span class="toc-number">7.1.</span> <span class="toc-text">5.1 运输层协议概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-1-%E8%BF%9B%E7%A8%8B%E4%B9%8B%E9%97%B4%E7%9A%84%E9%80%9A%E4%BF%A1"><span class="toc-number">7.1.1.</span> <span class="toc-text">5.1.1 进程之间的通信</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%A4%E5%A4%A7%E7%B1%BB%E7%AB%AF%E5%8F%A3"><span class="toc-number">7.1.1.1.</span> <span class="toc-text">两大类端口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E7%9A%84%E7%86%9F%E7%9F%A5%E7%AB%AF%E5%8F%A3%E2%80%93%E8%AE%B0%E5%BF%86"><span class="toc-number">7.1.1.2.</span> <span class="toc-text">常用的熟知端口–记忆</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-2-%E8%BF%90%E8%BE%93%E5%B1%82%E7%9A%84%E4%B8%A4%E4%B8%AA%E4%B8%BB%E8%A6%81%E5%8D%8F%E8%AE%AE"><span class="toc-number">7.1.2.</span> <span class="toc-text">5.1.2 运输层的两个主要协议</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#TCP%E4%B8%8EUDP-%E8%A1%A8%E6%A0%BC"><span class="toc-number">7.1.2.1.</span> <span class="toc-text">TCP与UDP 表格</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2-%E7%94%A8%E6%88%B7%E6%95%B0%E6%8D%AE%E6%8A%A5%E5%8D%8F%E8%AE%AEUDP"><span class="toc-number">7.2.</span> <span class="toc-text">5.2 用户数据报协议UDP</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#UDP%E4%B8%BB%E8%A6%81%E7%89%B9%E7%82%B9"><span class="toc-number">7.2.0.1.</span> <span class="toc-text">UDP主要特点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A3%80%E9%AA%8C%E5%92%8C"><span class="toc-number">7.2.0.2.</span> <span class="toc-text">检验和</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#UDP%E7%9A%84%E5%BA%94%E7%94%A8"><span class="toc-number">7.2.0.3.</span> <span class="toc-text">UDP的应用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#IP%E3%80%81ICMP%E3%80%81UDP%E3%80%81TCP%E6%8A%A5%E6%96%87%E9%A6%96%E9%83%A8%E6%A3%80%E9%AA%8C%E5%92%8C%E5%AD%97%E6%AE%B5"><span class="toc-number">7.2.0.4.</span> <span class="toc-text">IP、ICMP、UDP、TCP报文首部检验和字段</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-3-%E4%BC%A0%E8%BE%93%E6%8E%A7%E5%88%B6%E5%8D%8F%E8%AE%AETCP-%E6%A6%82%E8%BF%B0"><span class="toc-number">7.3.</span> <span class="toc-text">5.3 传输控制协议TCP 概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-1-TCP-%E6%9C%80%E4%B8%BB%E8%A6%81%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">7.3.1.</span> <span class="toc-text">5.3.1 TCP 最主要的特点</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-4%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">7.4.</span> <span class="toc-text">5.4可靠传输的工作原理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-1-%E5%81%9C%E6%AD%A2%E7%AD%89%E5%BE%85%E5%8D%8F%E8%AE%AE"><span class="toc-number">7.4.1.</span> <span class="toc-text">5.4.1 停止等待协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-2-%E8%BF%9E%E7%BB%ADARQ-%E5%8D%8F%E8%AE%AE"><span class="toc-number">7.4.2.</span> <span class="toc-text">5.4.2 连续ARQ 协议</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%B4%AF%E8%AE%A1%E7%A1%AE%E8%AE%A4"><span class="toc-number">7.4.2.1.</span> <span class="toc-text">累计确认</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Go-back-N%EF%BC%88%E5%9B%9E%E9%80%80N%EF%BC%89"><span class="toc-number">7.4.2.2.</span> <span class="toc-text">Go-back-N（回退N）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-8"><span class="toc-number">7.4.2.3.</span> <span class="toc-text">小结</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-5TCP-%E6%8A%A5%E6%96%87%E6%AE%B5%E7%9A%84%E9%A6%96%E9%83%A8%E6%A0%BC%E5%BC%8F"><span class="toc-number">7.5.</span> <span class="toc-text">5.5TCP 报文段的首部格式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-9"><span class="toc-number">7.5.1.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-6-TCP-%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="toc-number">7.6.</span> <span class="toc-text">5.6 TCP 可靠传输的实现</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-10"><span class="toc-number">7.6.0.1.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-6-2-%E8%B6%85%E6%97%B6%E9%87%8D%E4%BC%A0%E6%97%B6%E9%97%B4%E7%9A%84%E9%80%89%E6%8B%A9"><span class="toc-number">7.6.1.</span> <span class="toc-text">5.6.2 超时重传时间的选择</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-6-3-%E9%80%89%E6%8B%A9%E7%A1%AE%E8%AE%A4SACK"><span class="toc-number">7.6.2.</span> <span class="toc-text">5.6.3 选择确认SACK</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-11"><span class="toc-number">7.6.2.1.</span> <span class="toc-text">小结</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-7TCP%E7%9A%84%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6"><span class="toc-number">7.7.</span> <span class="toc-text">5.7TCP的流量控制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-7-1%E5%88%A9%E7%94%A8%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E5%AE%9E%E7%8E%B0%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6"><span class="toc-number">7.7.1.</span> <span class="toc-text">5.7.1利用滑动窗口实现流量控制</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8C%81%E7%BB%AD%E8%AE%A1%E6%97%B6%E5%99%A8"><span class="toc-number">7.7.1.1.</span> <span class="toc-text">持续计时器</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-8-TCP-%E7%9A%84%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6"><span class="toc-number">7.8.</span> <span class="toc-text">5.8 TCP 的拥塞控制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-8-1-%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E7%9A%84%E4%B8%80%E8%88%AC%E5%8E%9F%E7%90%86"><span class="toc-number">7.8.1.</span> <span class="toc-text">5.8.1 拥塞控制的一般原理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%80%E7%8E%AF%E6%8E%A7%E5%88%B6%E5%92%8C%E9%97%AD%E7%8E%AF%E6%8E%A7%E5%88%B6"><span class="toc-number">7.8.1.1.</span> <span class="toc-text">开环控制和闭环控制</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-8-2-TCP-%E7%9A%84%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E6%96%B9%E6%B3%95"><span class="toc-number">7.8.2.</span> <span class="toc-text">5.8.2 TCP 的拥塞控制方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8B%A5%E5%A1%9E%E5%88%A4%E6%96%AD"><span class="toc-number">7.8.2.1.</span> <span class="toc-text">拥塞判断</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#TCP%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E7%AE%97%E6%B3%95"><span class="toc-number">7.8.2.2.</span> <span class="toc-text">TCP拥塞控制算法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-9-TCP-%E7%9A%84%E8%BF%90%E8%BE%93%E8%BF%9E%E6%8E%A5%E7%AE%A1%E7%90%86"><span class="toc-number">7.8.3.</span> <span class="toc-text">5.9 TCP 的运输连接管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-9-1-TCP-%E7%9A%84%E8%BF%9E%E6%8E%A5%E5%BB%BA%E7%AB%8B"><span class="toc-number">7.8.4.</span> <span class="toc-text">5.9.1 TCP 的连接建立</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-9-2-TCP-%E7%9A%84%E8%BF%9E%E6%8E%A5%E9%87%8A%E6%94%BE"><span class="toc-number">7.8.5.</span> <span class="toc-text">5.9.2 TCP 的连接释放</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">7.8.6.</span> <span class="toc-text">总结</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC6%E7%AB%A0%E5%BA%94%E7%94%A8%E5%B1%82"><span class="toc-number">8.</span> <span class="toc-text">第6章应用层</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#6-1-%E5%9F%9F%E5%90%8D%E7%B3%BB%E7%BB%9FDNS"><span class="toc-number">8.1.</span> <span class="toc-text">6.1 域名系统DNS</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-1-%E5%9F%9F%E5%90%8D%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%BF%B0"><span class="toc-number">8.1.1.</span> <span class="toc-text">6.1.1 域名系统概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-2-%E4%BA%92%E8%81%94%E7%BD%91%E7%9A%84%E5%9F%9F%E5%90%8D%E7%BB%93%E6%9E%84"><span class="toc-number">8.1.2.</span> <span class="toc-text">6.1.2 互联网的域名结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-3-%E5%9F%9F%E5%90%8D%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">8.1.3.</span> <span class="toc-text">6.1.3 域名服务器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%9B%E7%A7%8D%E7%B1%BB%E5%9E%8B"><span class="toc-number">8.1.3.1.</span> <span class="toc-text">四种类型</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-2-FTP"><span class="toc-number">8.2.</span> <span class="toc-text">6.2 FTP</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%B9%E7%82%B9-1"><span class="toc-number">8.2.0.1.</span> <span class="toc-text">特点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%A4%E4%B8%AA%E8%BF%9E%E6%8E%A5"><span class="toc-number">8.2.0.2.</span> <span class="toc-text">两个连接</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-3%E8%BF%9C%E7%A8%8B%E7%BB%88%E7%AB%AF%E5%8D%8F%E8%AE%AETELNET"><span class="toc-number">8.3.</span> <span class="toc-text">*6.3远程终端协议TELNET</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-4%E4%B8%87%E7%BB%B4%E7%BD%91www"><span class="toc-number">8.4.</span> <span class="toc-text">6.4万维网www</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0-1"><span class="toc-number">8.4.1.</span> <span class="toc-text">概述</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B7%A5%E4%BD%9C%E6%96%B9%E5%BC%8F"><span class="toc-number">8.4.1.1.</span> <span class="toc-text">工作方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">8.4.1.2.</span> <span class="toc-text">解决的问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">8.4.1.3.</span> <span class="toc-text">代理服务器</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-4%E4%B8%87%E7%BB%B4%E7%BD%91%E7%9A%84%E6%96%87%E6%A1%A3-%E4%BA%86%E8%A7%A3"><span class="toc-number">8.4.2.</span> <span class="toc-text">6.4.4万维网的文档 了解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-5-%E4%B8%87%E7%BB%B4%E7%BD%91%E7%9A%84%E4%BF%A1%E6%81%AF%E6%A3%80%E7%B4%A2%E7%B3%BB%E7%BB%9F-%E4%BA%86%E8%A7%A3"><span class="toc-number">8.4.3.</span> <span class="toc-text">6.4.5 万维网的信息检索系统 了解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-6-%E5%8D%9A%E5%AE%A2%E5%92%8C%E5%BE%AE%E5%8D%9A-%E4%BA%86%E8%A7%A3"><span class="toc-number">8.4.4.</span> <span class="toc-text">6.4.6 博客和微博  了解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-12"><span class="toc-number">8.4.5.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-5%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6"><span class="toc-number">8.5.</span> <span class="toc-text">6.5电子邮件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-2-%E7%AE%80%E5%8D%95%E9%82%AE%E4%BB%B6%E4%BC%A0%E9%80%81%E5%8D%8F%E8%AE%AESMTP"><span class="toc-number">8.5.1.</span> <span class="toc-text">6.5.2 简单邮件传送协议SMTP</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#SMTP%E9%80%9A%E4%BF%A1%E7%9A%84%E4%B8%89%E4%B8%AA%E9%98%B6%E6%AE%B5"><span class="toc-number">8.5.1.1.</span> <span class="toc-text">SMTP通信的三个阶段</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-4-%E9%82%AE%E4%BB%B6%E8%AF%BB%E5%8F%96%E5%8D%8F%E8%AE%AEPOP3-%E5%92%8CIMAP"><span class="toc-number">8.5.2.</span> <span class="toc-text">6.5.4 邮件读取协议POP3 和IMAP</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#IMAP-%E5%8D%8F%E8%AE%AE"><span class="toc-number">8.5.2.1.</span> <span class="toc-text">IMAP 协议</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-5-%E5%9F%BA%E4%BA%8E%E4%B8%87%E7%BB%B4%E7%BD%91%E7%9A%84%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6"><span class="toc-number">8.5.3.</span> <span class="toc-text">6.5.5 基于万维网的电子邮件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-6-%E9%80%9A%E7%94%A8%E4%BA%92%E8%81%94%E7%BD%91%E9%82%AE%E4%BB%B6%E6%89%A9%E5%85%85MIME"><span class="toc-number">8.5.4.</span> <span class="toc-text">6.5.6 通用互联网邮件扩充MIME</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%94%99%E9%A2%98-1"><span class="toc-number">8.5.5.</span> <span class="toc-text">错题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-6-%E5%8A%A8%E6%80%81%E4%B8%BB%E6%9C%BA%E9%85%8D%E7%BD%AE%E5%8D%8F%E8%AE%AEDHCP"><span class="toc-number">8.6.</span> <span class="toc-text">6.6 动态主机配置协议DHCP</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%A2%E6%88%B7-%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%96%B9%E5%BC%8F"><span class="toc-number">8.6.0.1.</span> <span class="toc-text">客户-服务器方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DHCP-%E4%B8%AD%E7%BB%A7%E4%BB%A3%E7%90%86-relay-agent"><span class="toc-number">8.6.0.2.</span> <span class="toc-text">DHCP 中继代理(relay agent)</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/05/27/%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95/" title="软件测试"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="/img/default_cover.jpg" onerror="this.onerror=null;this.src='https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg'" alt="软件测试"/></a><div class="content"><a class="title" href="/2024/05/27/%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95/" title="软件测试">软件测试</a><time datetime="2024-05-27T08:22:42.000Z" title="发表于 2024-05-27 16:22:42">2024-05-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/04/22/%E8%AE%BA%E6%96%87%E5%86%99%E4%BD%9C%E7%BB%8F%E9%AA%8C/" title="论文写作经验"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="/img/default_cover.jpg" onerror="this.onerror=null;this.src='https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg'" alt="论文写作经验"/></a><div class="content"><a class="title" href="/2024/04/22/%E8%AE%BA%E6%96%87%E5%86%99%E4%BD%9C%E7%BB%8F%E9%AA%8C/" title="论文写作经验">论文写作经验</a><time datetime="2024-04-22T08:47:18.000Z" title="发表于 2024-04-22 16:47:18">2024-04-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/03/18/%E8%AE%BA%E6%96%87%E7%B2%BE%E8%AF%BB-AlexNet/" title="AlexNet"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="/img/404.jpg" onerror="this.onerror=null;this.src='https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg'" alt="AlexNet"/></a><div class="content"><a class="title" href="/2024/03/18/%E8%AE%BA%E6%96%87%E7%B2%BE%E8%AF%BB-AlexNet/" title="AlexNet">AlexNet</a><time datetime="2024-03-17T16:23:18.534Z" title="发表于 2024-03-18 00:23:18">2024-03-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/03/07/%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%8E%9F%E7%90%86%E4%B8%8E%E5%AE%9E%E8%B7%B5/" title="大数据原理与实践"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="/img/404.jpg" onerror="this.onerror=null;this.src='https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg'" alt="大数据原理与实践"/></a><div class="content"><a class="title" href="/2024/03/07/%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%8E%9F%E7%90%86%E4%B8%8E%E5%AE%9E%E8%B7%B5/" title="大数据原理与实践">大数据原理与实践</a><time datetime="2024-03-07T06:09:38.555Z" title="发表于 2024-03-07 14:09:38">2024-03-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/11/19/%E6%95%B0%E6%A8%A1notes/" title="数模notes"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="/img/default_cover.jpg" onerror="this.onerror=null;this.src='https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg'" alt="数模notes"/></a><div class="content"><a class="title" href="/2023/11/19/%E6%95%B0%E6%A8%A1notes/" title="数模notes">数模notes</a><time datetime="2023-11-18T16:00:00.000Z" title="发表于 2023-11-19 00:00:00">2023-11-19</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2020 - 2024 By <a class="footer-bar-link" href="/" title="JJuprising" target="_blank">JJuprising</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">44</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">21</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">4</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" href="https://jjuprising.github.io/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="安知鱼图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://www.itra.co.jp/uploads/media/2019/05/20190528205238_1.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="安知鱼图床"/><span class="back-menu-item-text">安知鱼图床</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/cv/cyj_CV.pdf"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> CV</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/C/" style="font-size: 0.88rem;">C++<sup>1</sup></a><a href="/tags/DL/" style="font-size: 0.88rem;">DL<sup>1</sup></a><a href="/tags/JavaScript/" style="font-size: 0.88rem;">JavaScript<sup>1</sup></a><a href="/tags/Linux/" style="font-size: 0.88rem;">Linux<sup>2</sup></a><a href="/tags/c/" style="font-size: 0.88rem;">c++<sup>1</sup></a><a href="/tags/html/" style="font-size: 0.88rem;">html<sup>2</sup></a><a href="/tags/javascript/" style="font-size: 0.88rem;">javascript<sup>1</sup></a><a href="/tags/minecraft/" style="font-size: 0.88rem;">minecraft<sup>1</sup></a><a href="/tags/python/" style="font-size: 0.88rem;">python<sup>2</sup></a><a href="/tags/%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8/" style="font-size: 0.88rem;">云服务器<sup>1</sup></a><a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 0.88rem;">前端<sup>1</sup></a><a href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/" style="font-size: 0.88rem;">小程序<sup>1</sup></a><a href="/tags/%E6%95%99%E7%A8%8B/" style="font-size: 0.88rem;">教程<sup>2</sup></a><a href="/tags/%E6%95%B0%E5%AD%A6/" style="font-size: 0.88rem;">数学<sup>2</sup></a><a href="/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/" style="font-size: 0.88rem;">服务器<sup>1</sup></a><a href="/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" style="font-size: 0.88rem;">深度学习<sup>1</sup></a><a href="/tags/%E7%AC%94%E8%AE%B0/" style="font-size: 0.88rem;">笔记<sup>8</sup></a><a href="/tags/%E7%BB%8F%E9%AA%8C%E5%88%86%E4%BA%AB/" style="font-size: 0.88rem;">经验分享<sup>1</sup></a><a href="/tags/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" style="font-size: 0.88rem;">编程语言<sup>6</sup></a><a href="/tags/%E8%84%91%E7%94%B5/" style="font-size: 0.88rem;">脑电<sup>1</sup></a><a href="/tags/%E9%A1%B9%E7%9B%AE/" style="font-size: 0.88rem;">项目<sup>5</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("04/01/2021 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2020 By 安知鱼 V1.6.12",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 JJuprising 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><div class="js-pjax"><input type="hidden" name="page-type" id="page-type" value="post"></div><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>